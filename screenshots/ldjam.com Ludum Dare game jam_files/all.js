!function(){var t={emojiList:{100:"1f4af",1234:"1f522",kiss_ww:"1f469-2764-1f48b-1f469",kiss_mm:"1f468-2764-1f48b-1f468",family_mmbb:"1f468-1f468-1f466-1f466",family_mmgb:"1f468-1f468-1f467-1f466",family_mmgg:"1f468-1f468-1f467-1f467",family_mwbb:"1f468-1f469-1f466-1f466",family_mwgb:"1f468-1f469-1f467-1f466",family_mwgg:"1f468-1f469-1f467-1f467",family_wwbb:"1f469-1f469-1f466-1f466",family_wwgb:"1f469-1f469-1f467-1f466",family_wwgg:"1f469-1f469-1f467-1f467",couple_ww:"1f469-2764-1f469",couple_mm:"1f468-2764-1f468",family_mmb:"1f468-1f468-1f466",family_mmg:"1f468-1f468-1f467",family_mwg:"1f468-1f469-1f467",family_wwb:"1f469-1f469-1f466",family_wwg:"1f469-1f469-1f467",eye_in_speech_bubble:"1f441-1f5e8",hash:"0023-20e3",zero:"0030-20e3",one:"0031-20e3",two:"0032-20e3",three:"0033-20e3",four:"0034-20e3",five:"0035-20e3",six:"0036-20e3",seven:"0037-20e3",eight:"0038-20e3",nine:"0039-20e3",asterisk:"002a-20e3",handball_tone5:"1f93e-1f3ff",handball_tone4:"1f93e-1f3fe",handball_tone3:"1f93e-1f3fd",handball_tone2:"1f93e-1f3fc",handball_tone1:"1f93e-1f3fb",water_polo_tone5:"1f93d-1f3ff",water_polo_tone4:"1f93d-1f3fe",water_polo_tone3:"1f93d-1f3fd",water_polo_tone2:"1f93d-1f3fc",water_polo_tone1:"1f93d-1f3fb",wrestlers_tone5:"1f93c-1f3ff",wrestlers_tone4:"1f93c-1f3fe",wrestlers_tone3:"1f93c-1f3fd",wrestlers_tone2:"1f93c-1f3fc",wrestlers_tone1:"1f93c-1f3fb",juggling_tone5:"1f939-1f3ff",juggling_tone4:"1f939-1f3fe",juggling_tone3:"1f939-1f3fd",juggling_tone2:"1f939-1f3fc",juggling_tone1:"1f939-1f3fb",cartwheel_tone5:"1f938-1f3ff",cartwheel_tone4:"1f938-1f3fe",cartwheel_tone3:"1f938-1f3fd",cartwheel_tone2:"1f938-1f3fc",cartwheel_tone1:"1f938-1f3fb",shrug_tone5:"1f937-1f3ff",shrug_tone4:"1f937-1f3fe",shrug_tone3:"1f937-1f3fd",shrug_tone2:"1f937-1f3fc",shrug_tone1:"1f937-1f3fb",mrs_claus_tone5:"1f936-1f3ff",mrs_claus_tone4:"1f936-1f3fe",mrs_claus_tone3:"1f936-1f3fd",mrs_claus_tone2:"1f936-1f3fc",mrs_claus_tone1:"1f936-1f3fb",man_in_tuxedo_tone5:"1f935-1f3ff",man_in_tuxedo_tone4:"1f935-1f3fe",man_in_tuxedo_tone3:"1f935-1f3fd",man_in_tuxedo_tone2:"1f935-1f3fc",man_in_tuxedo_tone1:"1f935-1f3fb",prince_tone5:"1f934-1f3ff",prince_tone4:"1f934-1f3fe",prince_tone3:"1f934-1f3fd",prince_tone2:"1f934-1f3fc",prince_tone1:"1f934-1f3fb",selfie_tone5:"1f933-1f3ff",selfie_tone4:"1f933-1f3fe",selfie_tone3:"1f933-1f3fd",selfie_tone2:"1f933-1f3fc",selfie_tone1:"1f933-1f3fb",pregnant_woman_tone5:"1f930-1f3ff",pregnant_woman_tone4:"1f930-1f3fe",pregnant_woman_tone3:"1f930-1f3fd",pregnant_woman_tone2:"1f930-1f3fc",pregnant_woman_tone1:"1f930-1f3fb",face_palm_tone5:"1f926-1f3ff",face_palm_tone4:"1f926-1f3fe",face_palm_tone3:"1f926-1f3fd",face_palm_tone2:"1f926-1f3fc",face_palm_tone1:"1f926-1f3fb",fingers_crossed_tone5:"1f91e-1f3ff",fingers_crossed_tone4:"1f91e-1f3fe",fingers_crossed_tone3:"1f91e-1f3fd",fingers_crossed_tone2:"1f91e-1f3fc",fingers_crossed_tone1:"1f91e-1f3fb",handshake_tone5:"1f91d-1f3ff",handshake_tone4:"1f91d-1f3fe",handshake_tone3:"1f91d-1f3fd",handshake_tone2:"1f91d-1f3fc",handshake_tone1:"1f91d-1f3fb",right_facing_fist_tone5:"1f91c-1f3ff",right_facing_fist_tone4:"1f91c-1f3fe",right_facing_fist_tone3:"1f91c-1f3fd",right_facing_fist_tone2:"1f91c-1f3fc",right_facing_fist_tone1:"1f91c-1f3fb",left_facing_fist_tone5:"1f91b-1f3ff",left_facing_fist_tone4:"1f91b-1f3fe",left_facing_fist_tone3:"1f91b-1f3fd",left_facing_fist_tone2:"1f91b-1f3fc",left_facing_fist_tone1:"1f91b-1f3fb",raised_back_of_hand_tone5:"1f91a-1f3ff",raised_back_of_hand_tone4:"1f91a-1f3fe",raised_back_of_hand_tone3:"1f91a-1f3fd",raised_back_of_hand_tone2:"1f91a-1f3fc",raised_back_of_hand_tone1:"1f91a-1f3fb",call_me_tone5:"1f919-1f3ff",call_me_tone4:"1f919-1f3fe",call_me_tone3:"1f919-1f3fd",call_me_tone2:"1f919-1f3fc",call_me_tone1:"1f919-1f3fb",metal_tone5:"1f918-1f3ff",metal_tone4:"1f918-1f3fe",metal_tone3:"1f918-1f3fd",metal_tone2:"1f918-1f3fc",metal_tone1:"1f918-1f3fb",bath_tone5:"1f6c0-1f3ff",bath_tone4:"1f6c0-1f3fe",bath_tone3:"1f6c0-1f3fd",bath_tone2:"1f6c0-1f3fc",bath_tone1:"1f6c0-1f3fb",walking_tone5:"1f6b6-1f3ff",walking_tone4:"1f6b6-1f3fe",walking_tone3:"1f6b6-1f3fd",walking_tone2:"1f6b6-1f3fc",walking_tone1:"1f6b6-1f3fb",mountain_bicyclist_tone5:"1f6b5-1f3ff",mountain_bicyclist_tone4:"1f6b5-1f3fe",mountain_bicyclist_tone3:"1f6b5-1f3fd",mountain_bicyclist_tone2:"1f6b5-1f3fc",mountain_bicyclist_tone1:"1f6b5-1f3fb",bicyclist_tone5:"1f6b4-1f3ff",bicyclist_tone4:"1f6b4-1f3fe",bicyclist_tone3:"1f6b4-1f3fd",bicyclist_tone2:"1f6b4-1f3fc",bicyclist_tone1:"1f6b4-1f3fb",rowboat_tone5:"1f6a3-1f3ff",rowboat_tone4:"1f6a3-1f3fe",rowboat_tone3:"1f6a3-1f3fd",rowboat_tone2:"1f6a3-1f3fc",rowboat_tone1:"1f6a3-1f3fb",pray_tone5:"1f64f-1f3ff",pray_tone4:"1f64f-1f3fe",pray_tone3:"1f64f-1f3fd",pray_tone2:"1f64f-1f3fc",pray_tone1:"1f64f-1f3fb",person_with_pouting_face_tone5:"1f64e-1f3ff",person_with_pouting_face_tone4:"1f64e-1f3fe",person_with_pouting_face_tone3:"1f64e-1f3fd",person_with_pouting_face_tone2:"1f64e-1f3fc",person_with_pouting_face_tone1:"1f64e-1f3fb",person_frowning_tone5:"1f64d-1f3ff",person_frowning_tone4:"1f64d-1f3fe",person_frowning_tone3:"1f64d-1f3fd",person_frowning_tone2:"1f64d-1f3fc",person_frowning_tone1:"1f64d-1f3fb",raised_hands_tone5:"1f64c-1f3ff",raised_hands_tone4:"1f64c-1f3fe",raised_hands_tone3:"1f64c-1f3fd",raised_hands_tone2:"1f64c-1f3fc",raised_hands_tone1:"1f64c-1f3fb",raising_hand_tone5:"1f64b-1f3ff",raising_hand_tone4:"1f64b-1f3fe",raising_hand_tone3:"1f64b-1f3fd",raising_hand_tone2:"1f64b-1f3fc",raising_hand_tone1:"1f64b-1f3fb",bow_tone5:"1f647-1f3ff",bow_tone4:"1f647-1f3fe",bow_tone3:"1f647-1f3fd",bow_tone2:"1f647-1f3fc",bow_tone1:"1f647-1f3fb",ok_woman_tone5:"1f646-1f3ff",ok_woman_tone4:"1f646-1f3fe",ok_woman_tone3:"1f646-1f3fd",ok_woman_tone2:"1f646-1f3fc",ok_woman_tone1:"1f646-1f3fb",no_good_tone5:"1f645-1f3ff",no_good_tone4:"1f645-1f3fe",no_good_tone3:"1f645-1f3fd",no_good_tone2:"1f645-1f3fc",no_good_tone1:"1f645-1f3fb",vulcan_tone5:"1f596-1f3ff",vulcan_tone4:"1f596-1f3fe",vulcan_tone3:"1f596-1f3fd",vulcan_tone2:"1f596-1f3fc",vulcan_tone1:"1f596-1f3fb",middle_finger_tone5:"1f595-1f3ff",middle_finger_tone4:"1f595-1f3fe",middle_finger_tone3:"1f595-1f3fd",middle_finger_tone2:"1f595-1f3fc",middle_finger_tone1:"1f595-1f3fb",hand_splayed_tone5:"1f590-1f3ff",hand_splayed_tone4:"1f590-1f3fe",hand_splayed_tone3:"1f590-1f3fd",hand_splayed_tone2:"1f590-1f3fc",hand_splayed_tone1:"1f590-1f3fb",man_dancing_tone5:"1f57a-1f3ff",man_dancing_tone4:"1f57a-1f3fe",man_dancing_tone3:"1f57a-1f3fd",man_dancing_tone2:"1f57a-1f3fc",man_dancing_tone1:"1f57a-1f3fb",spy_tone5:"1f575-1f3ff",spy_tone4:"1f575-1f3fe",spy_tone3:"1f575-1f3fd",spy_tone2:"1f575-1f3fc",spy_tone1:"1f575-1f3fb",muscle_tone5:"1f4aa-1f3ff",muscle_tone4:"1f4aa-1f3fe",muscle_tone3:"1f4aa-1f3fd",muscle_tone2:"1f4aa-1f3fc",muscle_tone1:"1f4aa-1f3fb",haircut_tone5:"1f487-1f3ff",haircut_tone4:"1f487-1f3fe",haircut_tone3:"1f487-1f3fd",haircut_tone2:"1f487-1f3fc",haircut_tone1:"1f487-1f3fb",massage_tone5:"1f486-1f3ff",massage_tone4:"1f486-1f3fe",massage_tone3:"1f486-1f3fd",massage_tone2:"1f486-1f3fc",massage_tone1:"1f486-1f3fb",nail_care_tone5:"1f485-1f3ff",nail_care_tone4:"1f485-1f3fe",nail_care_tone3:"1f485-1f3fd",nail_care_tone2:"1f485-1f3fc",nail_care_tone1:"1f485-1f3fb",dancer_tone5:"1f483-1f3ff",dancer_tone4:"1f483-1f3fe",dancer_tone3:"1f483-1f3fd",dancer_tone2:"1f483-1f3fc",dancer_tone1:"1f483-1f3fb",guardsman_tone5:"1f482-1f3ff",guardsman_tone4:"1f482-1f3fe",guardsman_tone3:"1f482-1f3fd",guardsman_tone2:"1f482-1f3fc",guardsman_tone1:"1f482-1f3fb",information_desk_person_tone5:"1f481-1f3ff",information_desk_person_tone4:"1f481-1f3fe",information_desk_person_tone3:"1f481-1f3fd",information_desk_person_tone2:"1f481-1f3fc",information_desk_person_tone1:"1f481-1f3fb",angel_tone5:"1f47c-1f3ff",angel_tone4:"1f47c-1f3fe",angel_tone3:"1f47c-1f3fd",angel_tone2:"1f47c-1f3fc",angel_tone1:"1f47c-1f3fb",princess_tone5:"1f478-1f3ff",princess_tone4:"1f478-1f3fe",princess_tone3:"1f478-1f3fd",princess_tone2:"1f478-1f3fc",princess_tone1:"1f478-1f3fb",construction_worker_tone5:"1f477-1f3ff",construction_worker_tone4:"1f477-1f3fe",construction_worker_tone3:"1f477-1f3fd",construction_worker_tone2:"1f477-1f3fc",construction_worker_tone1:"1f477-1f3fb",baby_tone5:"1f476-1f3ff",baby_tone4:"1f476-1f3fe",baby_tone3:"1f476-1f3fd",baby_tone2:"1f476-1f3fc",baby_tone1:"1f476-1f3fb",older_woman_tone5:"1f475-1f3ff",older_woman_tone4:"1f475-1f3fe",older_woman_tone3:"1f475-1f3fd",older_woman_tone2:"1f475-1f3fc",older_woman_tone1:"1f475-1f3fb",older_man_tone5:"1f474-1f3ff",older_man_tone4:"1f474-1f3fe",older_man_tone3:"1f474-1f3fd",older_man_tone2:"1f474-1f3fc",older_man_tone1:"1f474-1f3fb",man_with_turban_tone5:"1f473-1f3ff",man_with_turban_tone4:"1f473-1f3fe",man_with_turban_tone3:"1f473-1f3fd",man_with_turban_tone2:"1f473-1f3fc",man_with_turban_tone1:"1f473-1f3fb",man_with_gua_pi_mao_tone5:"1f472-1f3ff",man_with_gua_pi_mao_tone4:"1f472-1f3fe",man_with_gua_pi_mao_tone3:"1f472-1f3fd",man_with_gua_pi_mao_tone2:"1f472-1f3fc",man_with_gua_pi_mao_tone1:"1f472-1f3fb",person_with_blond_hair_tone5:"1f471-1f3ff",person_with_blond_hair_tone4:"1f471-1f3fe",person_with_blond_hair_tone3:"1f471-1f3fd",person_with_blond_hair_tone2:"1f471-1f3fc",person_with_blond_hair_tone1:"1f471-1f3fb",bride_with_veil_tone5:"1f470-1f3ff",bride_with_veil_tone4:"1f470-1f3fe",bride_with_veil_tone3:"1f470-1f3fd",bride_with_veil_tone2:"1f470-1f3fc",bride_with_veil_tone1:"1f470-1f3fb",cop_tone5:"1f46e-1f3ff",cop_tone4:"1f46e-1f3fe",cop_tone3:"1f46e-1f3fd",cop_tone2:"1f46e-1f3fc",cop_tone1:"1f46e-1f3fb",woman_tone5:"1f469-1f3ff",woman_tone4:"1f469-1f3fe",woman_tone3:"1f469-1f3fd",woman_tone2:"1f469-1f3fc",woman_tone1:"1f469-1f3fb",man_tone5:"1f468-1f3ff",man_tone4:"1f468-1f3fe",man_tone3:"1f468-1f3fd",man_tone2:"1f468-1f3fc",man_tone1:"1f468-1f3fb",girl_tone5:"1f467-1f3ff",girl_tone4:"1f467-1f3fe",girl_tone3:"1f467-1f3fd",girl_tone2:"1f467-1f3fc",girl_tone1:"1f467-1f3fb",boy_tone5:"1f466-1f3ff",boy_tone4:"1f466-1f3fe",boy_tone3:"1f466-1f3fd",boy_tone2:"1f466-1f3fc",boy_tone1:"1f466-1f3fb",open_hands_tone5:"1f450-1f3ff",open_hands_tone4:"1f450-1f3fe",open_hands_tone3:"1f450-1f3fd",open_hands_tone2:"1f450-1f3fc",open_hands_tone1:"1f450-1f3fb",clap_tone5:"1f44f-1f3ff",clap_tone4:"1f44f-1f3fe",clap_tone3:"1f44f-1f3fd",clap_tone2:"1f44f-1f3fc",clap_tone1:"1f44f-1f3fb",thumbsdown_tone5:"1f44e-1f3ff",thumbsdown_tone4:"1f44e-1f3fe",thumbsdown_tone3:"1f44e-1f3fd",thumbsdown_tone2:"1f44e-1f3fc",thumbsdown_tone1:"1f44e-1f3fb",thumbsup_tone5:"1f44d-1f3ff",thumbsup_tone4:"1f44d-1f3fe",thumbsup_tone3:"1f44d-1f3fd",thumbsup_tone2:"1f44d-1f3fc",thumbsup_tone1:"1f44d-1f3fb",ok_hand_tone5:"1f44c-1f3ff",ok_hand_tone4:"1f44c-1f3fe",ok_hand_tone3:"1f44c-1f3fd",ok_hand_tone2:"1f44c-1f3fc",ok_hand_tone1:"1f44c-1f3fb",wave_tone5:"1f44b-1f3ff",wave_tone4:"1f44b-1f3fe",wave_tone3:"1f44b-1f3fd",wave_tone2:"1f44b-1f3fc",wave_tone1:"1f44b-1f3fb",punch_tone5:"1f44a-1f3ff",punch_tone4:"1f44a-1f3fe",punch_tone3:"1f44a-1f3fd",punch_tone2:"1f44a-1f3fc",punch_tone1:"1f44a-1f3fb",point_right_tone5:"1f449-1f3ff",point_right_tone4:"1f449-1f3fe",point_right_tone3:"1f449-1f3fd",point_right_tone2:"1f449-1f3fc",point_right_tone1:"1f449-1f3fb",point_left_tone5:"1f448-1f3ff",point_left_tone4:"1f448-1f3fe",point_left_tone3:"1f448-1f3fd",point_left_tone2:"1f448-1f3fc",point_left_tone1:"1f448-1f3fb",point_down_tone5:"1f447-1f3ff",point_down_tone4:"1f447-1f3fe",point_down_tone3:"1f447-1f3fd",point_down_tone2:"1f447-1f3fc",point_down_tone1:"1f447-1f3fb",point_up_2_tone5:"1f446-1f3ff",point_up_2_tone4:"1f446-1f3fe",point_up_2_tone3:"1f446-1f3fd",point_up_2_tone2:"1f446-1f3fc",point_up_2_tone1:"1f446-1f3fb",nose_tone5:"1f443-1f3ff",nose_tone4:"1f443-1f3fe",nose_tone3:"1f443-1f3fd",nose_tone2:"1f443-1f3fc",nose_tone1:"1f443-1f3fb",ear_tone5:"1f442-1f3ff",ear_tone4:"1f442-1f3fe",ear_tone3:"1f442-1f3fd",ear_tone2:"1f442-1f3fc",ear_tone1:"1f442-1f3fb",gay_pride_flag:"1f3f3-1f308",lifter_tone5:"1f3cb-1f3ff",lifter_tone4:"1f3cb-1f3fe",lifter_tone3:"1f3cb-1f3fd",lifter_tone2:"1f3cb-1f3fc",lifter_tone1:"1f3cb-1f3fb",swimmer_tone5:"1f3ca-1f3ff",swimmer_tone4:"1f3ca-1f3fe",swimmer_tone3:"1f3ca-1f3fd",swimmer_tone2:"1f3ca-1f3fc",swimmer_tone1:"1f3ca-1f3fb",horse_racing_tone5:"1f3c7-1f3ff",horse_racing_tone4:"1f3c7-1f3fe",horse_racing_tone3:"1f3c7-1f3fd",horse_racing_tone2:"1f3c7-1f3fc",horse_racing_tone1:"1f3c7-1f3fb",surfer_tone5:"1f3c4-1f3ff",surfer_tone4:"1f3c4-1f3fe",surfer_tone3:"1f3c4-1f3fd",surfer_tone2:"1f3c4-1f3fc",surfer_tone1:"1f3c4-1f3fb",runner_tone5:"1f3c3-1f3ff",runner_tone4:"1f3c3-1f3fe",runner_tone3:"1f3c3-1f3fd",runner_tone2:"1f3c3-1f3fc",runner_tone1:"1f3c3-1f3fb",santa_tone5:"1f385-1f3ff",santa_tone4:"1f385-1f3fe",santa_tone3:"1f385-1f3fd",santa_tone2:"1f385-1f3fc",santa_tone1:"1f385-1f3fb",flag_zw:"1f1ff-1f1fc",flag_zm:"1f1ff-1f1f2",flag_za:"1f1ff-1f1e6",flag_yt:"1f1fe-1f1f9",flag_ye:"1f1fe-1f1ea",flag_xk:"1f1fd-1f1f0",flag_ws:"1f1fc-1f1f8",flag_wf:"1f1fc-1f1eb",flag_vu:"1f1fb-1f1fa",flag_vn:"1f1fb-1f1f3",flag_vi:"1f1fb-1f1ee",flag_vg:"1f1fb-1f1ec",flag_ve:"1f1fb-1f1ea",flag_vc:"1f1fb-1f1e8",flag_va:"1f1fb-1f1e6",flag_uz:"1f1fa-1f1ff",flag_uy:"1f1fa-1f1fe",flag_us:"1f1fa-1f1f8",flag_um:"1f1fa-1f1f2",flag_ug:"1f1fa-1f1ec",flag_ua:"1f1fa-1f1e6",flag_tz:"1f1f9-1f1ff",flag_tw:"1f1f9-1f1fc",flag_tv:"1f1f9-1f1fb",flag_tt:"1f1f9-1f1f9",flag_tr:"1f1f9-1f1f7",flag_to:"1f1f9-1f1f4",flag_tn:"1f1f9-1f1f3",flag_tm:"1f1f9-1f1f2",flag_tl:"1f1f9-1f1f1",flag_tk:"1f1f9-1f1f0",flag_tj:"1f1f9-1f1ef",flag_th:"1f1f9-1f1ed",flag_tg:"1f1f9-1f1ec",flag_tf:"1f1f9-1f1eb",flag_td:"1f1f9-1f1e9",flag_tc:"1f1f9-1f1e8",flag_ta:"1f1f9-1f1e6",flag_sz:"1f1f8-1f1ff",flag_sy:"1f1f8-1f1fe",flag_sx:"1f1f8-1f1fd",flag_sv:"1f1f8-1f1fb",flag_st:"1f1f8-1f1f9",flag_ss:"1f1f8-1f1f8",flag_sr:"1f1f8-1f1f7",flag_so:"1f1f8-1f1f4",flag_sn:"1f1f8-1f1f3",flag_sm:"1f1f8-1f1f2",flag_sl:"1f1f8-1f1f1",flag_sk:"1f1f8-1f1f0",flag_sj:"1f1f8-1f1ef",flag_si:"1f1f8-1f1ee",flag_sh:"1f1f8-1f1ed",flag_sg:"1f1f8-1f1ec",flag_se:"1f1f8-1f1ea",flag_sd:"1f1f8-1f1e9",flag_sc:"1f1f8-1f1e8",flag_sb:"1f1f8-1f1e7",flag_sa:"1f1f8-1f1e6",flag_rw:"1f1f7-1f1fc",flag_ru:"1f1f7-1f1fa",flag_rs:"1f1f7-1f1f8",flag_ro:"1f1f7-1f1f4",flag_re:"1f1f7-1f1ea",flag_qa:"1f1f6-1f1e6",flag_py:"1f1f5-1f1fe",flag_pw:"1f1f5-1f1fc",flag_pt:"1f1f5-1f1f9",flag_ps:"1f1f5-1f1f8",flag_pr:"1f1f5-1f1f7",flag_pn:"1f1f5-1f1f3",flag_pm:"1f1f5-1f1f2",flag_pl:"1f1f5-1f1f1",flag_pk:"1f1f5-1f1f0",flag_ph:"1f1f5-1f1ed",flag_pg:"1f1f5-1f1ec",flag_pf:"1f1f5-1f1eb",flag_pe:"1f1f5-1f1ea",flag_pa:"1f1f5-1f1e6",flag_om:"1f1f4-1f1f2",flag_nz:"1f1f3-1f1ff",flag_nu:"1f1f3-1f1fa",flag_nr:"1f1f3-1f1f7",flag_np:"1f1f3-1f1f5",flag_no:"1f1f3-1f1f4",flag_nl:"1f1f3-1f1f1",flag_ni:"1f1f3-1f1ee",flag_ng:"1f1f3-1f1ec",flag_nf:"1f1f3-1f1eb",flag_ne:"1f1f3-1f1ea",flag_nc:"1f1f3-1f1e8",flag_na:"1f1f3-1f1e6",flag_mz:"1f1f2-1f1ff",flag_my:"1f1f2-1f1fe",flag_mx:"1f1f2-1f1fd",flag_mw:"1f1f2-1f1fc",flag_mv:"1f1f2-1f1fb",flag_mu:"1f1f2-1f1fa",flag_mt:"1f1f2-1f1f9",flag_ms:"1f1f2-1f1f8",flag_mr:"1f1f2-1f1f7",flag_mq:"1f1f2-1f1f6",flag_mp:"1f1f2-1f1f5",flag_mo:"1f1f2-1f1f4",flag_mn:"1f1f2-1f1f3",flag_mm:"1f1f2-1f1f2",flag_ml:"1f1f2-1f1f1",flag_mk:"1f1f2-1f1f0",flag_mh:"1f1f2-1f1ed",flag_mg:"1f1f2-1f1ec",flag_mf:"1f1f2-1f1eb",flag_me:"1f1f2-1f1ea",flag_md:"1f1f2-1f1e9",flag_mc:"1f1f2-1f1e8",flag_ma:"1f1f2-1f1e6",flag_ly:"1f1f1-1f1fe",flag_lv:"1f1f1-1f1fb",flag_lu:"1f1f1-1f1fa",flag_lt:"1f1f1-1f1f9",flag_ls:"1f1f1-1f1f8",flag_lr:"1f1f1-1f1f7",flag_lk:"1f1f1-1f1f0",flag_li:"1f1f1-1f1ee",flag_lc:"1f1f1-1f1e8",flag_lb:"1f1f1-1f1e7",flag_la:"1f1f1-1f1e6",flag_kz:"1f1f0-1f1ff",flag_ky:"1f1f0-1f1fe",flag_kw:"1f1f0-1f1fc",flag_kr:"1f1f0-1f1f7",flag_kp:"1f1f0-1f1f5",flag_kn:"1f1f0-1f1f3",flag_km:"1f1f0-1f1f2",flag_ki:"1f1f0-1f1ee",flag_kh:"1f1f0-1f1ed",flag_kg:"1f1f0-1f1ec",flag_ke:"1f1f0-1f1ea",flag_jp:"1f1ef-1f1f5",flag_jo:"1f1ef-1f1f4",flag_jm:"1f1ef-1f1f2",flag_je:"1f1ef-1f1ea",flag_it:"1f1ee-1f1f9",flag_is:"1f1ee-1f1f8",flag_ir:"1f1ee-1f1f7",flag_iq:"1f1ee-1f1f6",flag_io:"1f1ee-1f1f4",flag_in:"1f1ee-1f1f3",flag_im:"1f1ee-1f1f2",flag_il:"1f1ee-1f1f1",flag_ie:"1f1ee-1f1ea",flag_id:"1f1ee-1f1e9",flag_ic:"1f1ee-1f1e8",flag_hu:"1f1ed-1f1fa",flag_ht:"1f1ed-1f1f9",flag_hr:"1f1ed-1f1f7",flag_hn:"1f1ed-1f1f3",flag_hm:"1f1ed-1f1f2",flag_hk:"1f1ed-1f1f0",flag_gy:"1f1ec-1f1fe",flag_gw:"1f1ec-1f1fc",flag_gu:"1f1ec-1f1fa",flag_gt:"1f1ec-1f1f9",flag_gs:"1f1ec-1f1f8",flag_gr:"1f1ec-1f1f7",flag_gq:"1f1ec-1f1f6",flag_gp:"1f1ec-1f1f5",flag_gn:"1f1ec-1f1f3",flag_gm:"1f1ec-1f1f2",flag_gl:"1f1ec-1f1f1",flag_gi:"1f1ec-1f1ee",flag_gh:"1f1ec-1f1ed",flag_gg:"1f1ec-1f1ec",flag_gf:"1f1ec-1f1eb",flag_ge:"1f1ec-1f1ea",flag_gd:"1f1ec-1f1e9",flag_gb:"1f1ec-1f1e7",flag_ga:"1f1ec-1f1e6",flag_fr:"1f1eb-1f1f7",flag_fo:"1f1eb-1f1f4",flag_fm:"1f1eb-1f1f2",flag_fk:"1f1eb-1f1f0",flag_fj:"1f1eb-1f1ef",flag_fi:"1f1eb-1f1ee",flag_eu:"1f1ea-1f1fa",flag_et:"1f1ea-1f1f9",flag_es:"1f1ea-1f1f8",flag_er:"1f1ea-1f1f7",flag_eh:"1f1ea-1f1ed",flag_eg:"1f1ea-1f1ec",flag_ee:"1f1ea-1f1ea",flag_ec:"1f1ea-1f1e8",flag_ea:"1f1ea-1f1e6",flag_dz:"1f1e9-1f1ff",flag_do:"1f1e9-1f1f4",flag_dm:"1f1e9-1f1f2",flag_dk:"1f1e9-1f1f0",flag_dj:"1f1e9-1f1ef",flag_dg:"1f1e9-1f1ec",flag_de:"1f1e9-1f1ea",flag_cz:"1f1e8-1f1ff",flag_cy:"1f1e8-1f1fe",flag_cx:"1f1e8-1f1fd",flag_cw:"1f1e8-1f1fc",flag_cv:"1f1e8-1f1fb",flag_cu:"1f1e8-1f1fa",flag_cr:"1f1e8-1f1f7",flag_cp:"1f1e8-1f1f5",flag_co:"1f1e8-1f1f4",flag_cn:"1f1e8-1f1f3",flag_cm:"1f1e8-1f1f2",flag_cl:"1f1e8-1f1f1",flag_ck:"1f1e8-1f1f0",flag_ci:"1f1e8-1f1ee",flag_ch:"1f1e8-1f1ed",flag_cg:"1f1e8-1f1ec",flag_cf:"1f1e8-1f1eb",flag_cd:"1f1e8-1f1e9",flag_cc:"1f1e8-1f1e8",flag_ca:"1f1e8-1f1e6",flag_bz:"1f1e7-1f1ff",flag_by:"1f1e7-1f1fe",flag_bw:"1f1e7-1f1fc",flag_bv:"1f1e7-1f1fb",flag_bt:"1f1e7-1f1f9",flag_bs:"1f1e7-1f1f8",flag_br:"1f1e7-1f1f7",flag_bq:"1f1e7-1f1f6",flag_bo:"1f1e7-1f1f4",flag_bn:"1f1e7-1f1f3",flag_bm:"1f1e7-1f1f2",flag_bl:"1f1e7-1f1f1",flag_bj:"1f1e7-1f1ef",flag_bi:"1f1e7-1f1ee",flag_bh:"1f1e7-1f1ed",flag_bg:"1f1e7-1f1ec",flag_bf:"1f1e7-1f1eb",flag_be:"1f1e7-1f1ea",flag_bd:"1f1e7-1f1e9",flag_bb:"1f1e7-1f1e7",flag_ba:"1f1e7-1f1e6",flag_az:"1f1e6-1f1ff",flag_ax:"1f1e6-1f1fd",flag_aw:"1f1e6-1f1fc",flag_au:"1f1e6-1f1fa",flag_at:"1f1e6-1f1f9",flag_as:"1f1e6-1f1f8",flag_ar:"1f1e6-1f1f7",flag_aq:"1f1e6-1f1f6",flag_ao:"1f1e6-1f1f4",flag_am:"1f1e6-1f1f2",flag_al:"1f1e6-1f1f1",flag_ai:"1f1e6-1f1ee",flag_ag:"1f1e6-1f1ec",flag_af:"1f1e6-1f1eb",flag_ae:"1f1e6-1f1ea",flag_ad:"1f1e6-1f1e9",flag_ac:"1f1e6-1f1e8",mahjong:"1f004",parking:"1f17f",sa:"1f202",u7121:"1f21a",u6307:"1f22f",u6708:"1f237",film_frames:"1f39e",tickets:"1f39f",lifter:"1f3cb",golfer:"1f3cc",motorcycle:"1f3cd",race_car:"1f3ce",military_medal:"1f396",reminder_ribbon:"1f397",hot_pepper:"1f336",cloud_rain:"1f327",cloud_snow:"1f328",cloud_lightning:"1f329",cloud_tornado:"1f32a",fog:"1f32b",wind_blowing_face:"1f32c",chipmunk:"1f43f",spider:"1f577",spider_web:"1f578",thermometer:"1f321",microphone2:"1f399",level_slider:"1f39a",control_knobs:"1f39b",flag_white:"1f3f3",rosette:"1f3f5",label:"1f3f7",projector:"1f4fd",om_symbol:"1f549",dove:"1f54a",candle:"1f56f",clock:"1f570",hole:"1f573",dark_sunglasses:"1f576",joystick:"1f579",paperclips:"1f587",pen_ballpoint:"1f58a",pen_fountain:"1f58b",paintbrush:"1f58c",crayon:"1f58d",desktop:"1f5a5",printer:"1f5a8",trackball:"1f5b2",frame_photo:"1f5bc",dividers:"1f5c2",card_box:"1f5c3",file_cabinet:"1f5c4",wastebasket:"1f5d1",notepad_spiral:"1f5d2",calendar_spiral:"1f5d3",compression:"1f5dc",key2:"1f5dd",newspaper2:"1f5de",dagger:"1f5e1",speaking_head:"1f5e3",speech_left:"1f5e8",anger_right:"1f5ef",ballot_box:"1f5f3",map:"1f5fa",tools:"1f6e0",shield:"1f6e1",oil:"1f6e2",satellite_orbital:"1f6f0",fork_knife_plate:"1f37d",eye:"1f441",levitate:"1f574",spy:"1f575",hand_splayed:"1f590",mountain_snow:"1f3d4",camping:"1f3d5",beach:"1f3d6",construction_site:"1f3d7",homes:"1f3d8",cityscape:"1f3d9",house_abandoned:"1f3da",classical_building:"1f3db",desert:"1f3dc",island:"1f3dd",park:"1f3de",stadium:"1f3df",couch:"1f6cb",shopping_bags:"1f6cd",bellhop:"1f6ce",bed:"1f6cf",motorway:"1f6e3",railway_track:"1f6e4",motorboat:"1f6e5",airplane_small:"1f6e9",cruise_ship:"1f6f3",white_sun_small_cloud:"1f324",white_sun_cloud:"1f325",white_sun_rain_cloud:"1f326",mouse_three_button:"1f5b1",point_up_tone1:"261d-1f3fb",point_up_tone2:"261d-1f3fc",point_up_tone3:"261d-1f3fd",point_up_tone4:"261d-1f3fe",point_up_tone5:"261d-1f3ff",v_tone1:"270c-1f3fb",v_tone2:"270c-1f3fc",v_tone3:"270c-1f3fd",v_tone4:"270c-1f3fe",v_tone5:"270c-1f3ff",fist_tone1:"270a-1f3fb",fist_tone2:"270a-1f3fc",fist_tone3:"270a-1f3fd",fist_tone4:"270a-1f3fe",fist_tone5:"270a-1f3ff",raised_hand_tone1:"270b-1f3fb",raised_hand_tone2:"270b-1f3fc",raised_hand_tone3:"270b-1f3fd",raised_hand_tone4:"270b-1f3fe",raised_hand_tone5:"270b-1f3ff",writing_hand_tone1:"270d-1f3fb",writing_hand_tone2:"270d-1f3fc",writing_hand_tone3:"270d-1f3fd",writing_hand_tone4:"270d-1f3fe",writing_hand_tone5:"270d-1f3ff",basketball_player_tone1:"26f9-1f3fb",basketball_player_tone2:"26f9-1f3fc",basketball_player_tone3:"26f9-1f3fd",basketball_player_tone4:"26f9-1f3fe",basketball_player_tone5:"26f9-1f3ff",copyright:"00a9",registered:"00ae",bangbang:"203c",interrobang:"2049",tm:"2122",information_source:"2139",left_right_arrow:"2194",arrow_up_down:"2195",arrow_upper_left:"2196",arrow_upper_right:"2197",arrow_lower_right:"2198",arrow_lower_left:"2199",leftwards_arrow_with_hook:"21a9",arrow_right_hook:"21aa",watch:"231a",hourglass:"231b",m:"24c2",black_small_square:"25aa",white_small_square:"25ab",arrow_forward:"25b6",arrow_backward:"25c0",white_medium_square:"25fb",black_medium_square:"25fc",white_medium_small_square:"25fd",black_medium_small_square:"25fe",sunny:"2600",cloud:"2601",telephone:"260e",ballot_box_with_check:"2611",umbrella:"2614",coffee:"2615",point_up:"261d",relaxed:"263a",aries:"2648",taurus:"2649",gemini:"264a",cancer:"264b",leo:"264c",virgo:"264d",libra:"264e",scorpius:"264f",sagittarius:"2650",capricorn:"2651",aquarius:"2652",pisces:"2653",spades:"2660",clubs:"2663",hearts:"2665",diamonds:"2666",hotsprings:"2668",recycle:"267b",wheelchair:"267f",anchor:"2693",warning:"26a0",zap:"26a1",white_circle:"26aa",black_circle:"26ab",soccer:"26bd",baseball:"26be",snowman:"26c4",partly_sunny:"26c5",no_entry:"26d4",church:"26ea",fountain:"26f2",golf:"26f3",sailboat:"26f5",tent:"26fa",fuelpump:"26fd",scissors:"2702",airplane:"2708",envelope:"2709",v:"270c",pencil2:"270f",black_nib:"2712",heavy_check_mark:"2714",heavy_multiplication_x:"2716",eight_spoked_asterisk:"2733",eight_pointed_black_star:"2734",snowflake:"2744",sparkle:"2747",exclamation:"2757",heart:"2764",arrow_right:"27a1",arrow_heading_up:"2934",arrow_heading_down:"2935",arrow_left:"2b05",arrow_up:"2b06",arrow_down:"2b07",black_large_square:"2b1b",white_large_square:"2b1c",star:"2b50",o:"2b55",wavy_dash:"3030",part_alternation_mark:"303d",congratulations:"3297",secret:"3299",cross:"271d",keyboard:"2328",writing_hand:"270d",eject:"23cf",track_next:"23ed",track_previous:"23ee",play_pause:"23ef",stopwatch:"23f1",timer:"23f2",pause_button:"23f8",stop_button:"23f9",record_button:"23fa",umbrella2:"2602",snowman2:"2603",comet:"2604",shamrock:"2618",skull_crossbones:"2620",radioactive:"2622",biohazard:"2623",orthodox_cross:"2626",star_and_crescent:"262a",peace:"262e",yin_yang:"262f",wheel_of_dharma:"2638",frowning2:"2639",hammer_pick:"2692",crossed_swords:"2694",scales:"2696",alembic:"2697",gear:"2699",atom:"269b","fleur-de-lis":"269c",coffin:"26b0",urn:"26b1",thunder_cloud_rain:"26c8",pick:"26cf",helmet_with_cross:"26d1",chains:"26d3",shinto_shrine:"26e9",mountain:"26f0",beach_umbrella:"26f1",ferry:"26f4",skier:"26f7",ice_skate:"26f8",basketball_player:"26f9",star_of_david:"2721",heart_exclamation:"2763",third_place:"1f949",second_place:"1f948",first_place:"1f947",fencer:"1f93a",goal:"1f945",handball:"1f93e",regional_indicator_z:"1f1ff",water_polo:"1f93d",martial_arts_uniform:"1f94b",boxing_glove:"1f94a",wrestlers:"1f93c",juggling:"1f939",cartwheel:"1f938",canoe:"1f6f6",motor_scooter:"1f6f5",scooter:"1f6f4",shopping_cart:"1f6d2",black_joker:"1f0cf",a:"1f170",b:"1f171",o2:"1f17e",octagonal_sign:"1f6d1",ab:"1f18e",cl:"1f191",regional_indicator_y:"1f1fe",cool:"1f192",free:"1f193",id:"1f194",new:"1f195",ng:"1f196",ok:"1f197",sos:"1f198",spoon:"1f944",up:"1f199",vs:"1f19a",champagne_glass:"1f942",tumbler_glass:"1f943",koko:"1f201",stuffed_flatbread:"1f959",u7981:"1f232",u7a7a:"1f233",u5408:"1f234",u6e80:"1f235",u6709:"1f236",shallow_pan_of_food:"1f958",u7533:"1f238",u5272:"1f239",salad:"1f957",u55b6:"1f23a",ideograph_advantage:"1f250",accept:"1f251",cyclone:"1f300",french_bread:"1f956",foggy:"1f301",closed_umbrella:"1f302",night_with_stars:"1f303",sunrise_over_mountains:"1f304",sunrise:"1f305",city_dusk:"1f306",carrot:"1f955",city_sunset:"1f307",rainbow:"1f308",potato:"1f954",bridge_at_night:"1f309",ocean:"1f30a",volcano:"1f30b",milky_way:"1f30c",earth_asia:"1f30f",new_moon:"1f311",bacon:"1f953",first_quarter_moon:"1f313",waxing_gibbous_moon:"1f314",full_moon:"1f315",crescent_moon:"1f319",first_quarter_moon_with_face:"1f31b",star2:"1f31f",cucumber:"1f952",stars:"1f320",chestnut:"1f330",avocado:"1f951",seedling:"1f331",palm_tree:"1f334",cactus:"1f335",tulip:"1f337",cherry_blossom:"1f338",rose:"1f339",hibiscus:"1f33a",sunflower:"1f33b",blossom:"1f33c",corn:"1f33d",croissant:"1f950",ear_of_rice:"1f33e",herb:"1f33f",four_leaf_clover:"1f340",maple_leaf:"1f341",fallen_leaf:"1f342",leaves:"1f343",mushroom:"1f344",tomato:"1f345",eggplant:"1f346",grapes:"1f347",melon:"1f348",watermelon:"1f349",tangerine:"1f34a",wilted_rose:"1f940",banana:"1f34c",pineapple:"1f34d",apple:"1f34e",green_apple:"1f34f",peach:"1f351",cherries:"1f352",strawberry:"1f353",rhino:"1f98f",hamburger:"1f354",pizza:"1f355",meat_on_bone:"1f356",lizard:"1f98e",poultry_leg:"1f357",rice_cracker:"1f358",rice_ball:"1f359",gorilla:"1f98d",rice:"1f35a",curry:"1f35b",deer:"1f98c",ramen:"1f35c",spaghetti:"1f35d",bread:"1f35e",fries:"1f35f",butterfly:"1f98b",sweet_potato:"1f360",dango:"1f361",fox:"1f98a",oden:"1f362",sushi:"1f363",owl:"1f989",fried_shrimp:"1f364",fish_cake:"1f365",shark:"1f988",icecream:"1f366",bat:"1f987",shaved_ice:"1f367",regional_indicator_x:"1f1fd",ice_cream:"1f368",duck:"1f986",doughnut:"1f369",eagle:"1f985",cookie:"1f36a",black_heart:"1f5a4",chocolate_bar:"1f36b",candy:"1f36c",lollipop:"1f36d",custard:"1f36e",honey_pot:"1f36f",fingers_crossed:"1f91e",cake:"1f370",bento:"1f371",stew:"1f372",handshake:"1f91d",cooking:"1f373",fork_and_knife:"1f374",tea:"1f375",sake:"1f376",wine_glass:"1f377",cocktail:"1f378",tropical_drink:"1f379",beer:"1f37a",beers:"1f37b",ribbon:"1f380",gift:"1f381",birthday:"1f382",jack_o_lantern:"1f383",left_facing_fist:"1f91b",right_facing_fist:"1f91c",christmas_tree:"1f384",santa:"1f385",fireworks:"1f386",raised_back_of_hand:"1f91a",sparkler:"1f387",balloon:"1f388",tada:"1f389",confetti_ball:"1f38a",tanabata_tree:"1f38b",crossed_flags:"1f38c",call_me:"1f919",bamboo:"1f38d",man_dancing:"1f57a",dolls:"1f38e",selfie:"1f933",flags:"1f38f",pregnant_woman:"1f930",wind_chime:"1f390",face_palm:"1f926",shrug:"1f937",rice_scene:"1f391",school_satchel:"1f392",mortar_board:"1f393",carousel_horse:"1f3a0",ferris_wheel:"1f3a1",roller_coaster:"1f3a2",fishing_pole_and_fish:"1f3a3",microphone:"1f3a4",movie_camera:"1f3a5",cinema:"1f3a6",headphones:"1f3a7",mrs_claus:"1f936",art:"1f3a8",man_in_tuxedo:"1f935",tophat:"1f3a9",circus_tent:"1f3aa",prince:"1f934",ticket:"1f3ab",clapper:"1f3ac",performing_arts:"1f3ad",sneezing_face:"1f927",video_game:"1f3ae",dart:"1f3af",slot_machine:"1f3b0","8ball":"1f3b1",game_die:"1f3b2",bowling:"1f3b3",flower_playing_cards:"1f3b4",lying_face:"1f925",musical_note:"1f3b5",notes:"1f3b6",saxophone:"1f3b7",drooling_face:"1f924",guitar:"1f3b8",musical_keyboard:"1f3b9",trumpet:"1f3ba",rofl:"1f923",violin:"1f3bb",musical_score:"1f3bc",running_shirt_with_sash:"1f3bd",nauseated_face:"1f922",tennis:"1f3be",ski:"1f3bf",basketball:"1f3c0",checkered_flag:"1f3c1",clown:"1f921",snowboarder:"1f3c2",runner:"1f3c3",surfer:"1f3c4",trophy:"1f3c6",football:"1f3c8",swimmer:"1f3ca",house:"1f3e0",house_with_garden:"1f3e1",office:"1f3e2",post_office:"1f3e3",hospital:"1f3e5",bank:"1f3e6",atm:"1f3e7",hotel:"1f3e8",love_hotel:"1f3e9",convenience_store:"1f3ea",school:"1f3eb",department_store:"1f3ec",cowboy:"1f920",factory:"1f3ed",izakaya_lantern:"1f3ee",japanese_castle:"1f3ef",european_castle:"1f3f0",snail:"1f40c",snake:"1f40d",racehorse:"1f40e",sheep:"1f411",monkey:"1f412",chicken:"1f414",boar:"1f417",elephant:"1f418",octopus:"1f419",shell:"1f41a",bug:"1f41b",ant:"1f41c",bee:"1f41d",beetle:"1f41e",fish:"1f41f",tropical_fish:"1f420",blowfish:"1f421",turtle:"1f422",hatching_chick:"1f423",baby_chick:"1f424",hatched_chick:"1f425",bird:"1f426",penguin:"1f427",koala:"1f428",poodle:"1f429",camel:"1f42b",dolphin:"1f42c",mouse:"1f42d",cow:"1f42e",tiger:"1f42f",rabbit:"1f430",cat:"1f431",dragon_face:"1f432",whale:"1f433",horse:"1f434",monkey_face:"1f435",dog:"1f436",pig:"1f437",frog:"1f438",hamster:"1f439",wolf:"1f43a",bear:"1f43b",panda_face:"1f43c",pig_nose:"1f43d",feet:"1f43e",eyes:"1f440",ear:"1f442",nose:"1f443",lips:"1f444",tongue:"1f445",point_up_2:"1f446",point_down:"1f447",point_left:"1f448",point_right:"1f449",punch:"1f44a",wave:"1f44b",ok_hand:"1f44c",thumbsup:"1f44d",thumbsdown:"1f44e",clap:"1f44f",open_hands:"1f450",crown:"1f451",womans_hat:"1f452",eyeglasses:"1f453",necktie:"1f454",shirt:"1f455",jeans:"1f456",dress:"1f457",kimono:"1f458",bikini:"1f459",womans_clothes:"1f45a",purse:"1f45b",handbag:"1f45c",pouch:"1f45d",mans_shoe:"1f45e",athletic_shoe:"1f45f",high_heel:"1f460",sandal:"1f461",boot:"1f462",footprints:"1f463",bust_in_silhouette:"1f464",boy:"1f466",girl:"1f467",man:"1f468",woman:"1f469",family:"1f46a",couple:"1f46b",cop:"1f46e",dancers:"1f46f",bride_with_veil:"1f470",person_with_blond_hair:"1f471",man_with_gua_pi_mao:"1f472",man_with_turban:"1f473",older_man:"1f474",older_woman:"1f475",baby:"1f476",construction_worker:"1f477",princess:"1f478",japanese_ogre:"1f479",japanese_goblin:"1f47a",ghost:"1f47b",angel:"1f47c",alien:"1f47d",space_invader:"1f47e",imp:"1f47f",skull:"1f480",card_index:"1f4c7",information_desk_person:"1f481",guardsman:"1f482",dancer:"1f483",lipstick:"1f484",nail_care:"1f485",ledger:"1f4d2",massage:"1f486",notebook:"1f4d3",haircut:"1f487",notebook_with_decorative_cover:"1f4d4",barber:"1f488",closed_book:"1f4d5",syringe:"1f489",book:"1f4d6",pill:"1f48a",green_book:"1f4d7",kiss:"1f48b",blue_book:"1f4d8",love_letter:"1f48c",orange_book:"1f4d9",ring:"1f48d",books:"1f4da",gem:"1f48e",name_badge:"1f4db",couplekiss:"1f48f",scroll:"1f4dc",bouquet:"1f490",pencil:"1f4dd",couple_with_heart:"1f491",telephone_receiver:"1f4de",wedding:"1f492",pager:"1f4df",fax:"1f4e0",heartbeat:"1f493",satellite:"1f4e1",loudspeaker:"1f4e2",broken_heart:"1f494",mega:"1f4e3",outbox_tray:"1f4e4",two_hearts:"1f495",inbox_tray:"1f4e5",package:"1f4e6",sparkling_heart:"1f496","e-mail":"1f4e7",incoming_envelope:"1f4e8",heartpulse:"1f497",envelope_with_arrow:"1f4e9",mailbox_closed:"1f4ea",cupid:"1f498",mailbox:"1f4eb",postbox:"1f4ee",blue_heart:"1f499",newspaper:"1f4f0",iphone:"1f4f1",green_heart:"1f49a",calling:"1f4f2",vibration_mode:"1f4f3",yellow_heart:"1f49b",mobile_phone_off:"1f4f4",signal_strength:"1f4f6",purple_heart:"1f49c",camera:"1f4f7",video_camera:"1f4f9",gift_heart:"1f49d",tv:"1f4fa",radio:"1f4fb",revolving_hearts:"1f49e",vhs:"1f4fc",arrows_clockwise:"1f503",heart_decoration:"1f49f",loud_sound:"1f50a",battery:"1f50b",diamond_shape_with_a_dot_inside:"1f4a0",electric_plug:"1f50c",mag:"1f50d",bulb:"1f4a1",mag_right:"1f50e",lock_with_ink_pen:"1f50f",anger:"1f4a2",closed_lock_with_key:"1f510",key:"1f511",bomb:"1f4a3",lock:"1f512",unlock:"1f513",zzz:"1f4a4",bell:"1f514",bookmark:"1f516",boom:"1f4a5",link:"1f517",radio_button:"1f518",sweat_drops:"1f4a6",back:"1f519",end:"1f51a",droplet:"1f4a7",on:"1f51b",soon:"1f51c",dash:"1f4a8",top:"1f51d",underage:"1f51e",poop:"1f4a9",keycap_ten:"1f51f",muscle:"1f4aa",capital_abcd:"1f520",abcd:"1f521",dizzy:"1f4ab",symbols:"1f523",speech_balloon:"1f4ac",abc:"1f524",fire:"1f525",white_flower:"1f4ae",flashlight:"1f526",wrench:"1f527",hammer:"1f528",nut_and_bolt:"1f529",moneybag:"1f4b0",knife:"1f52a",gun:"1f52b",currency_exchange:"1f4b1",crystal_ball:"1f52e",heavy_dollar_sign:"1f4b2",six_pointed_star:"1f52f",credit_card:"1f4b3",beginner:"1f530",trident:"1f531",yen:"1f4b4",black_square_button:"1f532",white_square_button:"1f533",dollar:"1f4b5",red_circle:"1f534",large_blue_circle:"1f535",money_with_wings:"1f4b8",large_orange_diamond:"1f536",large_blue_diamond:"1f537",chart:"1f4b9",small_orange_diamond:"1f538",small_blue_diamond:"1f539",seat:"1f4ba",small_red_triangle:"1f53a",small_red_triangle_down:"1f53b",computer:"1f4bb",arrow_up_small:"1f53c",briefcase:"1f4bc",arrow_down_small:"1f53d",clock1:"1f550",minidisc:"1f4bd",clock2:"1f551",floppy_disk:"1f4be",clock3:"1f552",cd:"1f4bf",clock4:"1f553",dvd:"1f4c0",clock5:"1f554",clock6:"1f555",file_folder:"1f4c1",clock7:"1f556",clock8:"1f557",open_file_folder:"1f4c2",clock9:"1f558",clock10:"1f559",page_with_curl:"1f4c3",clock11:"1f55a",clock12:"1f55b",page_facing_up:"1f4c4",mount_fuji:"1f5fb",tokyo_tower:"1f5fc",date:"1f4c5",statue_of_liberty:"1f5fd",japan:"1f5fe",calendar:"1f4c6",moyai:"1f5ff",grin:"1f601",joy:"1f602",smiley:"1f603",chart_with_upwards_trend:"1f4c8",smile:"1f604",sweat_smile:"1f605",chart_with_downwards_trend:"1f4c9",laughing:"1f606",wink:"1f609",bar_chart:"1f4ca",blush:"1f60a",yum:"1f60b",clipboard:"1f4cb",relieved:"1f60c",heart_eyes:"1f60d",pushpin:"1f4cc",smirk:"1f60f",unamused:"1f612",round_pushpin:"1f4cd",sweat:"1f613",pensive:"1f614",paperclip:"1f4ce",confounded:"1f616",kissing_heart:"1f618",straight_ruler:"1f4cf",kissing_closed_eyes:"1f61a",stuck_out_tongue_winking_eye:"1f61c",triangular_ruler:"1f4d0",stuck_out_tongue_closed_eyes:"1f61d",disappointed:"1f61e",bookmark_tabs:"1f4d1",angry:"1f620",rage:"1f621",cry:"1f622",persevere:"1f623",triumph:"1f624",disappointed_relieved:"1f625",fearful:"1f628",weary:"1f629",sleepy:"1f62a",tired_face:"1f62b",sob:"1f62d",cold_sweat:"1f630",scream:"1f631",astonished:"1f632",flushed:"1f633",dizzy_face:"1f635",mask:"1f637",smile_cat:"1f638",joy_cat:"1f639",smiley_cat:"1f63a",heart_eyes_cat:"1f63b",smirk_cat:"1f63c",kissing_cat:"1f63d",pouting_cat:"1f63e",crying_cat_face:"1f63f",scream_cat:"1f640",no_good:"1f645",ok_woman:"1f646",bow:"1f647",see_no_evil:"1f648",hear_no_evil:"1f649",speak_no_evil:"1f64a",raising_hand:"1f64b",raised_hands:"1f64c",person_frowning:"1f64d",person_with_pouting_face:"1f64e",pray:"1f64f",rocket:"1f680",railway_car:"1f683",bullettrain_side:"1f684",bullettrain_front:"1f685",metro:"1f687",station:"1f689",bus:"1f68c",busstop:"1f68f",ambulance:"1f691",fire_engine:"1f692",police_car:"1f693",taxi:"1f695",red_car:"1f697",blue_car:"1f699",truck:"1f69a",ship:"1f6a2",speedboat:"1f6a4",traffic_light:"1f6a5",construction:"1f6a7",rotating_light:"1f6a8",triangular_flag_on_post:"1f6a9",door:"1f6aa",no_entry_sign:"1f6ab",smoking:"1f6ac",no_smoking:"1f6ad",bike:"1f6b2",walking:"1f6b6",mens:"1f6b9",womens:"1f6ba",restroom:"1f6bb",baby_symbol:"1f6bc",toilet:"1f6bd",wc:"1f6be",bath:"1f6c0",metal:"1f918",grinning:"1f600",innocent:"1f607",smiling_imp:"1f608",sunglasses:"1f60e",neutral_face:"1f610",expressionless:"1f611",confused:"1f615",kissing:"1f617",kissing_smiling_eyes:"1f619",stuck_out_tongue:"1f61b",worried:"1f61f",frowning:"1f626",anguished:"1f627",grimacing:"1f62c",open_mouth:"1f62e",hushed:"1f62f",sleeping:"1f634",no_mouth:"1f636",helicopter:"1f681",steam_locomotive:"1f682",train2:"1f686",light_rail:"1f688",tram:"1f68a",oncoming_bus:"1f68d",trolleybus:"1f68e",minibus:"1f690",oncoming_police_car:"1f694",oncoming_taxi:"1f696",oncoming_automobile:"1f698",articulated_lorry:"1f69b",tractor:"1f69c",monorail:"1f69d",mountain_railway:"1f69e",suspension_railway:"1f69f",mountain_cableway:"1f6a0",aerial_tramway:"1f6a1",rowboat:"1f6a3",vertical_traffic_light:"1f6a6",put_litter_in_its_place:"1f6ae",do_not_litter:"1f6af",potable_water:"1f6b0","non-potable_water":"1f6b1",no_bicycles:"1f6b3",bicyclist:"1f6b4",mountain_bicyclist:"1f6b5",no_pedestrians:"1f6b7",children_crossing:"1f6b8",shower:"1f6bf",bathtub:"1f6c1",passport_control:"1f6c2",customs:"1f6c3",baggage_claim:"1f6c4",left_luggage:"1f6c5",earth_africa:"1f30d",earth_americas:"1f30e",globe_with_meridians:"1f310",waxing_crescent_moon:"1f312",waning_gibbous_moon:"1f316",last_quarter_moon:"1f317",waning_crescent_moon:"1f318",new_moon_with_face:"1f31a",last_quarter_moon_with_face:"1f31c",full_moon_with_face:"1f31d",sun_with_face:"1f31e",evergreen_tree:"1f332",deciduous_tree:"1f333",lemon:"1f34b",pear:"1f350",baby_bottle:"1f37c",horse_racing:"1f3c7",rugby_football:"1f3c9",european_post_office:"1f3e4",rat:"1f400",mouse2:"1f401",ox:"1f402",water_buffalo:"1f403",cow2:"1f404",tiger2:"1f405",leopard:"1f406",rabbit2:"1f407",cat2:"1f408",dragon:"1f409",crocodile:"1f40a",whale2:"1f40b",ram:"1f40f",goat:"1f410",rooster:"1f413",dog2:"1f415",pig2:"1f416",dromedary_camel:"1f42a",busts_in_silhouette:"1f465",two_men_holding_hands:"1f46c",two_women_holding_hands:"1f46d",thought_balloon:"1f4ad",euro:"1f4b6",pound:"1f4b7",mailbox_with_mail:"1f4ec",mailbox_with_no_mail:"1f4ed",postal_horn:"1f4ef",no_mobile_phones:"1f4f5",twisted_rightwards_arrows:"1f500",repeat:"1f501",repeat_one:"1f502",arrows_counterclockwise:"1f504",low_brightness:"1f505",high_brightness:"1f506",mute:"1f507",sound:"1f509",no_bell:"1f515",microscope:"1f52c",telescope:"1f52d",clock130:"1f55c",clock230:"1f55d",clock330:"1f55e",clock430:"1f55f",clock530:"1f560",clock630:"1f561",clock730:"1f562",clock830:"1f563",clock930:"1f564",clock1030:"1f565",clock1130:"1f566",clock1230:"1f567",speaker:"1f508",train:"1f68b",medal:"1f3c5",flag_black:"1f3f4",camera_with_flash:"1f4f8",sleeping_accommodation:"1f6cc",middle_finger:"1f595",vulcan:"1f596",slight_frown:"1f641",slight_smile:"1f642",airplane_departure:"1f6eb",airplane_arriving:"1f6ec",tone1:"1f3fb",tone2:"1f3fc",tone3:"1f3fd",tone4:"1f3fe",tone5:"1f3ff",upside_down:"1f643",money_mouth:"1f911",nerd:"1f913",hugging:"1f917",rolling_eyes:"1f644",thinking:"1f914",zipper_mouth:"1f910",thermometer_face:"1f912",head_bandage:"1f915",robot:"1f916",lion_face:"1f981",unicorn:"1f984",scorpion:"1f982",crab:"1f980",turkey:"1f983",cheese:"1f9c0",hotdog:"1f32d",taco:"1f32e",burrito:"1f32f",popcorn:"1f37f",champagne:"1f37e",bow_and_arrow:"1f3f9",amphora:"1f3fa",place_of_worship:"1f6d0",kaaba:"1f54b",mosque:"1f54c",synagogue:"1f54d",menorah:"1f54e",prayer_beads:"1f4ff",cricket:"1f3cf",volleyball:"1f3d0",field_hockey:"1f3d1",hockey:"1f3d2",ping_pong:"1f3d3",badminton:"1f3f8",drum:"1f941",shrimp:"1f990",squid:"1f991",egg:"1f95a",milk:"1f95b",peanuts:"1f95c",kiwi:"1f95d",pancakes:"1f95e",regional_indicator_w:"1f1fc",regional_indicator_v:"1f1fb",regional_indicator_u:"1f1fa",regional_indicator_t:"1f1f9",regional_indicator_s:"1f1f8",regional_indicator_r:"1f1f7",regional_indicator_q:"1f1f6",regional_indicator_p:"1f1f5",regional_indicator_o:"1f1f4",regional_indicator_n:"1f1f3",regional_indicator_m:"1f1f2",regional_indicator_l:"1f1f1",regional_indicator_k:"1f1f0",regional_indicator_j:"1f1ef",regional_indicator_i:"1f1ee",regional_indicator_h:"1f1ed",regional_indicator_g:"1f1ec",regional_indicator_f:"1f1eb",regional_indicator_e:"1f1ea",regional_indicator_d:"1f1e9",regional_indicator_c:"1f1e8",regional_indicator_b:"1f1e7",regional_indicator_a:"1f1e6",fast_forward:"23e9",rewind:"23ea",arrow_double_up:"23eb",arrow_double_down:"23ec",alarm_clock:"23f0",hourglass_flowing_sand:"23f3",ophiuchus:"26ce",white_check_mark:"2705",fist:"270a",raised_hand:"270b",sparkles:"2728",x:"274c",negative_squared_cross_mark:"274e",question:"2753",grey_question:"2754",grey_exclamation:"2755",heavy_plus_sign:"2795",heavy_minus_sign:"2796",heavy_division_sign:"2797",curly_loop:"27b0",loop:"27bf"},ext:".png",path:"//cdn.jsdelivr.net/emojione/assets/3.0/png/64/",shortnameToImage:function(e){return e&&e in t.emojiList?'<img class="emoji" alt="'+e+'" title=":'+e+':" src="'+t.path+t.emojiList[e]+t.ext+'"/>':":"+e+":"},shortnameToURL:function(e){if(e&&e in t.emojiList)return t.path+t.emojiList[e]+t.ext}};window.emoji=t}(),function(){var r={}.hasOwnProperty;window.cN=function(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"==o||"number"==o)e.push(n);else if(Array.isArray(n))e.push(cN.apply(null,n));else if("object"==o)for(var i in n)r.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}}();var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var s=/\blang(?:uage)?-(\w+)\b/i,t=0,N=_self.Prism={util:{encode:function(e){return e instanceof a?new a(e.type,N.util.encode(e.content),e.alias):"Array"===N.util.type(e)?e.map(N.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){switch(N.util.type(e)){case"Object":var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=N.util.clone(e[t]));return n;case"Array":return e.map&&e.map(function(e){return N.util.clone(e)})}return e}},languages:{extend:function(e,t){var n,o=N.util.clone(N.languages[e]);for(n in t)o[n]=t[n];return o},insertBefore:function(n,e,t,o){var i=(o=o||N.languages)[n];if(2==arguments.length){for(var r in t=e)t.hasOwnProperty(r)&&(i[r]=t[r]);return i}var a,s={};for(a in i)if(i.hasOwnProperty(a)){if(a==e)for(var r in t)t.hasOwnProperty(r)&&(s[r]=t[r]);s[a]=i[a]}return N.languages.DFS(N.languages,function(e,t){t===o[n]&&e!=n&&(this[e]=s)}),o[n]=s},DFS:function(e,t,n,o){for(var i in o=o||{},e)e.hasOwnProperty(i)&&(t.call(e,i,e[i],n||i),"Object"!==N.util.type(e[i])||o[N.util.objId(e[i])]?"Array"!==N.util.type(e[i])||o[N.util.objId(e[i])]||(o[N.util.objId(e[i])]=!0,N.languages.DFS(e[i],t,i,o)):(o[N.util.objId(e[i])]=!0,N.languages.DFS(e[i],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};N.hooks.run("before-highlightall",n);for(var o,i=n.elements||document.querySelectorAll(n.selector),r=0;o=i[r++];)N.highlightElement(o,!0===e,n.callback)},highlightElement:function(e,t,n){for(var o,i,r=e;r&&!s.test(r.className);)r=r.parentNode;r&&(o=(r.className.match(s)||[,""])[1].toLowerCase(),i=N.languages[o]),e.className=e.className.replace(s,"").replace(/\s+/g," ")+" language-"+o,r=e.parentNode,/pre/i.test(r.nodeName)&&(r.className=r.className.replace(s,"").replace(/\s+/g," ")+" language-"+o);var a={element:e,language:o,grammar:i,code:e.textContent};N.hooks.run("before-sanity-check",a),a.code&&a.grammar?(N.hooks.run("before-highlight",a),t&&_self.Worker?((t=new Worker(N.filename)).onmessage=function(e){a.highlightedCode=e.data,N.hooks.run("before-insert",a),a.element.innerHTML=a.highlightedCode,n&&n.call(a.element),N.hooks.run("after-highlight",a),N.hooks.run("complete",a)},t.postMessage(JSON.stringify({language:a.language,code:a.code,immediateClose:!0}))):(a.highlightedCode=N.highlight(a.code,a.grammar,a.language),N.hooks.run("before-insert",a),a.element.innerHTML=a.highlightedCode,n&&n.call(e),N.hooks.run("after-highlight",a),N.hooks.run("complete",a))):N.hooks.run("complete",a)},highlight:function(e,t,n){t=N.tokenize(e,t);return a.stringify(N.util.encode(t),n)},tokenize:function(e,t,n){var o=N.Token,i=[e],r=t.rest;if(r){for(var a in r)t[a]=r[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a])for(var s=t[a],s="Array"===N.util.type(s)?s:[s],l=0;l<s.length;++l){var c,h=(m=s[l]).inside,u=!!m.lookbehind,f=!!m.greedy,d=0,p=m.alias;f&&!m.pattern.global&&(c=m.pattern.toString().match(/[imuy]*$/)[0],m.pattern=RegExp(m.pattern.source,c+"g"));for(var m=m.pattern||m,g=0,v=0;g<i.length;v+=(i[g].matchedStr||i[g]).length,++g){var b=i[g];if(i.length>e.length)break e;if(!(b instanceof o)){m.lastIndex=0;var _,y=m.exec(b),$=1;if(!y&&f&&g!=i.length-1){if(m.lastIndex=v,!(y=m.exec(e)))break;for(var w=y.index+(u?y[1].length:0),k=y.index+y[0].length,C=g,S=v,x=i.length;C<x&&S<k;++C)(S+=(i[C].matchedStr||i[C]).length)<=w&&(++g,v=S);if(i[g]instanceof o||i[C-1].greedy)continue;$=C-g,b=e.slice(v,S),y.index-=v}y&&(u&&(d=y[1].length),k=(w=y.index+d)+(y=y[0].slice(d)).length,_=b.slice(0,w),b=b.slice(k),$=[g,$],_&&$.push(_),y=new o(a,h?N.tokenize(y,h):y,p,y,f),$.push(y),b&&$.push(b),Array.prototype.splice.apply(i,$))}}}return i},hooks:{all:{},add:function(e,t){var n=N.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=N.hooks.all[e];if(n&&n.length)for(var o,i=0;o=n[i++];)o(t)}}},a=N.Token=function(e,t,n,o,i){this.type=e,this.content=t,this.alias=n,this.matchedStr=o||null,this.greedy=!!i};if(a.stringify=function(t,n,e){if("string"==typeof t)return t;if("Array"===N.util.type(t))return t.map(function(e){return a.stringify(e,n,t)}).join("");var o={type:t.type,content:a.stringify(t.content,n,e),tag:"span",classes:["token",t.type],attributes:{},language:n,parent:e};"comment"==o.type&&(o.attributes.spellcheck="true"),t.alias&&(e="Array"===N.util.type(t.alias)?t.alias:[t.alias],Array.prototype.push.apply(o.classes,e)),N.hooks.run("wrap",o);var i,r="";for(i in o.attributes)r+=(r?" ":"")+i+'="'+(o.attributes[i]||"")+'"';return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(r?" "+r:"")+">"+o.content+"</"+o.tag+">"},!_self.document)return _self.addEventListener&&_self.addEventListener("message",function(e){var t=JSON.parse(e.data),n=t.language,e=t.code,t=t.immediateClose;_self.postMessage(N.highlight(e,N.languages[n],n)),t&&_self.close()},!1),_self.Prism;var e=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return e&&(N.filename=e.src,document.addEventListener&&!e.hasAttribute("data-manual")&&("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(N.highlightAll):window.setTimeout(N.highlightAll,16):document.addEventListener("DOMContentLoaded",N.highlightAll))),_self.Prism}();function VNode(){}"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.c=Prism.languages.extend("clike",{keyword:/\b(asm|typeof|inline|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|union|unsigned|void|volatile|while)\b/,operator:/\-[>-]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|?\||[~^%?*\/]/,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)[ful]*\b/i}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^\s*)#\s*[a-z]+([^\r\n\\]|\\.|\\(?:\r\n?|\n))*/im,lookbehind:!0,alias:"property",inside:{string:{pattern:/(#\s*include\s*)(<.+?>|("|')(\\?.)+?\3)/,lookbehind:!0},directive:{pattern:/(#\s*)\b(define|elif|else|endif|error|ifdef|ifndef|if|import|include|line|pragma|undef|using)\b/,lookbehind:!0,alias:"keyword"}}},constant:/\b(__FILE__|__LINE__|__DATE__|__TIME__|__TIMESTAMP__|__func__|EOF|NULL|stdin|stdout|stderr)\b/}),delete Prism.languages.c["class-name"],delete Prism.languages.c.boolean,Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,Prism.languages.markdown=Prism.languages.extend("markup",{}),Prism.languages.insertBefore("markdown","prolog",{blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},code:[{pattern:/^(?: {4}|\t).+/m,alias:"keyword"},{pattern:/``.+?``|`[^`\n]+`/,alias:"keyword"}],title:[{pattern:/\w+.*(?:\r?\n|\r)(?:==+|--+)/,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#+.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])([\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:/(^|[^\\])(\*\*|__)(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^\*\*|^__|\*\*$|__$/}},italic:{pattern:/(^|[^\\])([*_])(?:(?:\r?\n|\r)(?!\r?\n|\r)|.)+?\2/,lookbehind:!0,inside:{punctuation:/^[*_]|[*_]$/}},url:{pattern:/!?\[[^\]]+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)| ?\[[^\]\n]*\])/,inside:{variable:{pattern:/(!?\[)[^\]]+(?=\]$)/,lookbehind:!0},string:{pattern:/"(?:\\.|[^"\\])*"(?=\)$)/}}}}),Prism.languages.markdown.bold.inside.url=Prism.util.clone(Prism.languages.markdown.url),Prism.languages.markdown.italic.inside.url=Prism.util.clone(Prism.languages.markdown.url),Prism.languages.markdown.bold.inside.italic=Prism.util.clone(Prism.languages.markdown.italic),Prism.languages.markdown.italic.inside.bold=Prism.util.clone(Prism.languages.markdown.bold),Prism.languages.lua={comment:/^#!.+|--(?:\[(=*)\[[\s\S]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\r\n]|\\z(?:\r\n|\s)|\\(?:\r\n|[\s\S]))*\1|\[(=*)\[[\s\S]*?\]\2\]/,greedy:!0},number:/\b0x[a-f\d]+\.?[a-f\d]*(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|\.?\d*(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|for|function|goto|if|in|local|nil|not|or|repeat|return|then|true|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:[/[-+*%^&|#]|\/\/?|<[<=]?|>[>=]?|[=~]=?/,{pattern:/(^|[^.])\.\.(?!\.)/,lookbehind:!0}],punctuation:/[\[\](){},;]|\.+|:+/},Prism.languages.haxe=Prism.languages.extend("clike",{string:{pattern:/(["'])(?:(?!\1)[^\\]|\\[\s\S])*\1/,inside:{interpolation:{pattern:/(^|[^\\])\$(?:\w+|\{[^}]+\})/,lookbehind:!0,inside:{interpolation:{pattern:/^\$\w*/,alias:"variable"}}}}},keyword:/\bthis\b|\b(?:abstract|as|break|case|cast|catch|class|continue|default|do|dynamic|else|enum|extends|extern|from|for|function|if|implements|import|in|inline|interface|macro|new|null|override|public|private|return|static|super|switch|throw|to|try|typedef|using|var|while)(?!\.)\b/,operator:/\.{3}|\+\+?|-[->]?|[=!]=?|&&?|\|\|?|<[<=]?|>[>=]?|[*\/%~^]/}),Prism.languages.insertBefore("haxe","class-name",{regex:{pattern:/~\/(?:[^\/\\\r\n]|\\.)+\/[igmsu]*/}}),Prism.languages.insertBefore("haxe","keyword",{preprocessor:{pattern:/#\w+/,alias:"builtin"},metadata:{pattern:/@:?\w+/,alias:"symbol"},reification:{pattern:/\$(?:\w+|(?=\{))/,alias:"variable"}}),Prism.languages.haxe.string.inside.interpolation.inside.rest=Prism.util.clone(Prism.languages.haxe),delete Prism.languages.haxe["class-name"],Prism.languages.json={property:/".*?"(?=\s*:)/gi,string:/"(?!:)(\\?[^"])*?"(?!:)/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee]-?\d+)?)\b/g,punctuation:/[{}[\]);,]/g,operator:/:/g,boolean:/\b(true|false)\b/gi,null:/\bnull\b/gi},Prism.languages.jsonp=Prism.languages.json,Prism.languages.csharp=Prism.languages.extend("clike",{keyword:/\b(abstract|as|async|await|base|bool|break|byte|case|catch|char|checked|class|const|continue|decimal|default|delegate|do|double|else|enum|event|explicit|extern|false|finally|fixed|float|for|foreach|goto|if|implicit|in|int|interface|internal|is|lock|long|namespace|new|null|object|operator|out|override|params|private|protected|public|readonly|ref|return|sbyte|sealed|short|sizeof|stackalloc|static|string|struct|switch|this|throw|true|try|typeof|uint|ulong|unchecked|unsafe|ushort|using|virtual|void|volatile|while|add|alias|ascending|async|await|descending|dynamic|from|get|global|group|into|join|let|orderby|partial|remove|select|set|value|var|where|yield)\b/,string:[/@("|')(\1\1|\\\1|\\?(?!\1)[\s\S])*\1/,/("|')(\\?.)*?\1/],number:/\b-?(0x[\da-f]+|\d*\.?\d+f?)\b/i}),Prism.languages.insertBefore("csharp","keyword",{"generic-method":{pattern:/[a-z0-9_]+\s*<[^>\r\n]+?>\s*(?=\()/i,alias:"function",inside:{keyword:Prism.languages.csharp.keyword,punctuation:/[<>(),.:]/}},preprocessor:{pattern:/(^\s*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(\s*#)\b(define|elif|else|endif|endregion|error|if|line|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}}),Prism.languages.python={"triple-quoted-string":{pattern:/"""[\s\S]+?"""|'''[\s\S]+?'''/,alias:"string"},comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0},string:{pattern:/("|')(?:\\\\|\\?[^\\\r\n])*?\1/,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_][a-zA-Z0-9_]*(?=\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)[a-z0-9_]+/i,lookbehind:!0},keyword:/\b(?:as|assert|async|await|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|pass|print|raise|return|try|while|with|yield)\b/,boolean:/\b(?:True|False)\b/,number:/\b-?(?:0[bo])?(?:(?:\d|0x[\da-f])[\da-f]*\.?\d*|\.\d+)(?:e[+-]?\d+)?j?\b/i,operator:/[-+%=]=?|!=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]|\b(?:or|and|not)\b/,punctuation:/[{}[\];(),.:]/},Prism.languages.cpp=Prism.languages.extend("c",{keyword:/\b(alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|class|compl|const|constexpr|const_cast|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|float|for|friend|goto|if|inline|int|long|mutable|namespace|new|noexcept|nullptr|operator|private|protected|public|register|reinterpret_cast|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,boolean:/\b(true|false)\b/,operator:/[-+]{1,2}|!=?|<{1,2}=?|>{1,2}=?|\->|:{1,2}|={1,2}|\^|~|%|&{1,2}|\|?\||\?|\*|\/|\b(and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/}),Prism.languages.insertBefore("cpp","keyword",{"class-name":{pattern:/(class\s+)[a-z0-9_]+/i,lookbehind:!0}}),"undefined"!=typeof self&&self.Prism&&self.document&&Prism.hooks.add("complete",function(e){var t,n,o;e.code&&(o=/\s*\bline-numbers\b\s*/,(t=e.element.parentNode)&&/pre/i.test(t.nodeName)&&(o.test(t.className)||o.test(e.element.className))&&(e.element.querySelector(".line-numbers-rows")||(o.test(e.element.className)&&(e.element.className=e.element.className.replace(o,"")),o.test(t.className)||(t.className+=" line-numbers"),o=(n=e.code.match(/\n(?!$)/g))?n.length+1:1,n=(n=new Array(o+1)).join("<span></span>"),(o=document.createElement("span")).setAttribute("aria-hidden","true"),o.className="line-numbers-rows",o.innerHTML=n,t.hasAttribute("data-start")&&(t.style.counterReset="linenumber "+(parseInt(t.getAttribute("data-start"),10)-1)),e.element.appendChild(o))))}),window.node_IsPublished=function(e){return e?e.published:null},window.node_IsAuthor=function(e,t){return t&&e?!!t.id&&(e.author==t.id||!(!e.meta||!e.meta.author||-1==e.meta.author.indexOf(t.id))):null},window.node_CountAuthors=function(e){return e.meta&&e.meta.author?e.meta.author.length:e.author?1:0},window.nodeUser_IsFriend=function(e,t){return e&&t?!!(t.id&&e.private&&e.private.refs&&e.private.refs.star&&e.private.meta&&e.private.meta.star)&&(-1!==e.private.refs.star.indexOf(t.id)&&-1!==e.private.meta.star.indexOf(t.id)):null},window.nodeUser_IsFollowing=function(e,t){return e&&t?!!(t.id&&e.private&&e.private.meta&&e.private.meta.star)&&-1!==e.private.meta.star.indexOf(t.id):null},window.nodeUser_GetFriends=function(e){return e?e.private&&e.private.refs&&e.private.refs.star&&e.private.meta&&e.private.meta.star?(t=e.private.meta.star,(n=e.private.refs.star).length>t.length&&(e=n,n=t,t=e),t.filter(function(e){return-1<n.indexOf(e)})):[]:null;var t,n},window.node_CanCreate=function(e,t=null){return e&&e.meta?"can-create"in e.meta!=!1&&(1==e.meta["can-create"].length?1==parseInt(e.meta["can-create"]):null===t?0<e.meta["can-create"].length:0<=e.meta["can-create"].split("+").indexOf(t)):null},window.node_CanTransform=function(e,t=null){return e&&e.meta?"can-transform"in e.meta!=!1&&(null===t?0<e.meta["can-transform"].length:0<=e.meta["can-transform"].split("+").indexOf(t)):null},window.nodeEvent_CanTheme=function(e){return e?e.meta&&parseInt(e.meta["can-theme"]):null},window.nodeEvent_CanGrade=function(e){return e?e.meta&&parseInt(e.meta["can-grade"]):null},window.nodeEvent_IsFinished=function(e){return e?e.meta&&parseInt(e.meta["event-finished"]):null},window.node_CanPublish=function(e,t=null){return e&&e.meta?"can-publish"in e.meta!=!1&&(1==e.meta["can-publish"].length?1==parseInt(e.meta["can-publish"]):null===t?0<e.meta["can-publish"].length:0<=e.meta["can-publish"].split("+").indexOf(t)):null},window.node_GetFullType=function(e){if(!e)return null;var t=e.type;return e.subtype&&(t+="/"+e.subtype),e.subsubtype&&(t+="/"+e.subsubtype),t},window.nodeItem_GetPlatforms=function(e){return e&&e.meta&&e.meta.platform?e.meta.platform:[]},window.nodeItem_GetTags=function(e){return e&&e.meta&&e.meta.tag?e.meta.tag:[]},window.nodes_HasParent=function(e,t){if(!e)return null;for(idx=0;idx<e.length;idx++)if(e[idx].parent==t)return!0;return!1},window.nodeKeys_HasParent=function(e,t){if(!e)return null;for(var n in e)if(e[n].parent==t)return!0;return!1},window.nodeKeys_HasPublishedParent=function(e,t){if(!e)return null;for(var n in e)if(e[n].parent==t&&e[n].published)return!0;return!1},window.getCountdownInWeeks=function(e,t,n){var o=e%60,i=Math.floor(e/60)%60,r=Math.floor(e/3600)%24,a=Math.floor(e/86400)%7,s=Math.floor(e/604800)%365,l=Math.floor(e/220752e3),c=0,e="";return(c<(t=t||10)&&0<l||c&&c<t&&n)&&(c++,e+=1==l?l+" year":l+" years"),(c<t&&0<s||c&&c<t&&n)&&(c++,e&&(e+=", "),e+=1==s?s+" week":s+" weeks"),(c<t&&0<a||c&&c<t&&n)&&(c++,e&&(e+=", "),e+=1==a?a+" day":a+" days"),(c<t&&0<r||c&&c<t&&n)&&(c++,e&&(e+=", "),e+=1==r?r+" hour":r+" hours"),(c<t&&0<i||c&&c<t&&n)&&(c++,e&&(e+=", "),e+=1==i?i+" minute":i+" minutes"),(c<t&&0<o||c&&c<t&&n)&&(c++,e&&(e+=", "),e+=1==o?o+" second":o+" seconds"),e},window.getRoughAge=function(e){return e<0?"in the future":e<12e4?"right now":e<36e5?Math.floor(e/6e4)+" minutes ago":e<72e5?e<54e5?"an hour ago":"an hour and a half ago":e<864e5?Math.floor(e/36e5)+" hours ago":e<1728e5?e<1296e5?"a day ago":"a day and a half ago":e<12096e5?Math.floor(e/864e5)+" days ago":e<79056e5?Math.floor(e/6048e5)+" weeks ago":e<471744e5?Math.floor(e/26352e5)+" months ago":e<63072e6?"a year and a half ago":Math.floor(e/31536e6)+" years ago"},function(){var t=["th","st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=["January","February","March","April","May","June","July","August","September","October","November","December"],i=navigator.language,e={"en-GB":"en-US"};e.hasOwnProperty(navigator.language)&&(i=e[navigator.language]);var r={"Argentina Standard Time":"ART","GMT Standard Time":"BST","Central Europe Daylight Time":"CEST","Central European Daylight Time":"CEST","Western European Daylight Time":"CEST","Western European Summer Time":"CEST","Romance Standard Time":"CET","Romance Daylight Time":"CEST","Mitteleuropische Zeit":"MEZ","Mitteleuropische Sommerzeit":"MESZ","Moscow Standard Time":"MSK","Paris, Madrid (heure dt)":"CEST","Eastern Europe Daylight Time":"EEST","W. Europe Standard Time":"CET"},a={"en-IE":{"GMT Standard Time":"IST"}};a[navigator.language]&&(r=Object.assign(r,a[navigator.language])),navigator.languages&&navigator.languages.forEach(function(e){a[e]&&(r=Object.assign(r,a[e]))}),window.getLocale=function(){return i},window.getLocaleNumberSuffix=function(e){e=Math.abs(e)%100;return 10<e&&e<20?"th":t[e%10]},window.getLocaleTime=function(e){if("toLocaleTimeString"in Date.prototype&&-1<e.toLocaleTimeString(i).indexOf("M")||0<=i.indexOf("en-")){var t=0<=e.getHours()-12,n=e.getHours()%12;return(n=0==n?12:n)+":"+new String("00"+e.getMinutes()).slice(-2)+(t?" PM":" AM")}return new String("00"+e.getHours()).slice(-2)+":"+new String("00"+e.getMinutes()).slice(-2)},window.getLocaleDay=function(e){return n[e.getDay()]},window.getLocaleDate=function(e){return o[e.getMonth()]+" "+e.getDate()+t[e.getDate()%20]+", "+e.getFullYear()},window.getLocaleMonthDay=function(e){return o[e.getMonth()]+" "+e.getDate()+t[e.getDate()%20]},window.getLocaleTimeZone=function(e){for(var t in e=e.toString(),r)e=e.replace(t,r[t]);var n,o=-1<e.indexOf("(")?(o=(n=e.match(/\([^\)]+\)/)[0])?(o=n.match(/[A-Z]/g))&&o.join(""):o)||n:e.match(/[A-Z]{3,4}/)[0];return o="GMT"==o&&/(GMT\W*\d{4})/.test(e)?RegExp.$1:o},window.getLocaleTimeStamp=function(e){return getLocaleDay(e)+" "+getLocaleDate(e)+" "+getLocaleTime(e)+" "+getLocaleTimeZone(e)}}(),window.extractFromURL=function(e){var o={};o.origin=e.substr();var t=e.indexOf("#");o.hash="",-1!=t&&(o.hash=e.substr(t),e=e.substr(0,t));t=e.indexOf("?");o.query="",o.args={},-1!=t&&(o.query=e.substr(t),o.query=o.query.replace("&amp;","&"),e=e.substr(0,t),1<o.query.length&&o.query.substr(1).split("&").forEach(function(e,t,n){e=e.split("=");1<e.length?o.args[e[0]]=e[1]:o.args[e[0]]=!0})),o.url=e,o.internal=!1,-1==o.url.indexOf("//")&&-1!=o.url.indexOf(".")&&(-1==o.url.indexOf("/")||o.url.indexOf(".")<o.url.indexOf("/"))?o.url="http://"+o.url:-1==o.url.indexOf("//")&&(o.internal=!0),o.internal&&o.hash.length&&(o.hash="#/"+o.hash.substr(1)),o.body="",o.path="",o.paths=[],o.domain="",o.protocol="";e=o.url.indexOf("//");return-1!=e?(o.protocol=o.url.substr(0,e).toLowerCase(),o.body=o.url.substr(e+2),o.paths=o.body.split("/"),o.domain=o.paths.shift().toLowerCase()):o.paths=o.url.split("/"),o.path=o.paths.length?"/"+o.paths.join("/"):"",o.href=o.url+(o.query||"")+(o.hash||""),o},function(){function e(){this.next_token=/[*_~`]/,this.styles={italic:/^_([^_\s][\s\S]+?[^_\s]?)_(?!_)\b|^\*([^\*\s][\s\S]+?[^\*\s]?)\*(?!\*)/,bold:/^__([^_\s][\s\S]+?[^_\s]?)__(?!_)\b|^\*\*([^\*\s][\s\S]+?[^\*\s]?)\*\*(?!\*)/,italic_bold:/^___([^_\s][\s\S]+?[^_\s]?)___\b|^\*\*\*([^\*\s][\s\S]+?[^\*\s]?)\*\*\*/,del:/^~~([^~\s][\s\S]+?[^~\s]?)~~/,code:/^(`+)([^`][\s\S]+?)\1(?!`)/},this.style_funcs={italic:this.makeItalic,bold:this.makeBold,italic_bold:this.makeItalicBold,del:this.makeDel,code:this.makeCode},this.strip_funcs={italic:this.nop,bold:this.nop,italic_bold:this.nop,del:this.nop,code:this.nop}}e.prototype.makeBold=function(e){return"<strong>"+e+"</strong>"},e.prototype.makeItalic=function(e){return"<em>"+e+"</em>"},e.prototype.makeItalicBold=function(e){return"<em><strong>"+e+"</strong></em>"},e.prototype.makeDel=function(e){return"<del>"+e+"</del>"},e.prototype.makeCode=function(e){return e},e.prototype.nop=function(e){return e},e.prototype.parse=function(i,e){var r="",a=this.style_funcs;for(e&&(a=this.strip_funcs);0<i.length;){var t=i.search(this.next_token);if(-1===t){r+=i;break}r+=i.slice(0,t),i=i.slice(t);var s,l=!1;for(s in this.styles)if(i.replace(this.styles[s],function(e,t,n,o){r+=a[s](n||t),i=i.slice(e.length),l=!0}.bind(this)),l)break;l||(r+=i.slice(0,1),i=i.slice(1))}return r},window.titleParser=new e}(),function(){HashService=function(){this.list={},this.previous="",this.previous_args=[],this.previous_string=""},HashService.prototype.register=function(e,n,o,i){this.list[e]=o|i?function(e,t){0<e?n&&n(t):e<0?o&&o(t):i&&i(t)}:n};function t(e){var t,n;window.location.hash!==this.previous_string&&(n=(t=window.location.hash.split("/")).slice(1),t[0]!==this.previous?(""!==this.previous&&this.list[this.previous]&&this.list[this.previous](-1,this.previous_args),this.list[t[0]]&&this.list[t[0]](1,n),this.previous=t[0],this.previous_args=n,this.previous_string=window.location.hash):""!==this.previous&&this.list[this.previous]&&(this.list[this.previous](0,n),this.previous_args=n,this.previous_string=window.location.hash))}window.hashService=new HashService,HashService.prototype.force=function(){var e=new t;window.dispatchEvent(e)},window.addEventListener("hashchange",t.bind(window.hashService))}(),hashService.register("#tv",function(e){console.log("got it",e)},function(e){console.log("lost it",e)},function(e){console.log("changed it",e)}),hashService.register("#voles",function(e,t){console.log("got "+e,t)});var options={},stack=[],EMPTY_CHILDREN=[];function h$1(e,t){for(var n,o,i,r=arguments,a=EMPTY_CHILDREN,s=arguments.length;2<s--;)stack.push(r[s]);for(t&&null!=t.children&&(stack.length||stack.push(t.children),delete t.children);stack.length;)if((o=stack.pop())&&void 0!==o.pop)for(s=o.length;s--;)stack.push(o[s]);else"boolean"==typeof o&&(o=null),(i="function"!=typeof e)&&(null==o?o="":"number"==typeof o?o=String(o):"string"!=typeof o&&(i=!1)),i&&n?a[a.length-1]+=o:a===EMPTY_CHILDREN?a=[o]:a.push(o),n=i;var l=new VNode;return l.nodeName=e,l.children=a,l.attributes=null==t?void 0:t,l.key=null==t?void 0:t.key,void 0!==options.vnode&&options.vnode(l),l}function extend(e,t){for(var n in t)e[n]=t[n];return e}var defer="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function cloneElement(e,t){return h$1(e.nodeName,extend(extend({},e.attributes),t),2<arguments.length?[].slice.call(arguments,2):e.children)}var NO_RENDER=0,SYNC_RENDER=1,FORCE_RENDER=2,ASYNC_RENDER=3,ATTR_KEY="__preactattr_",IS_NON_DIMENSIONAL=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,items=[];function enqueueRender(e){!e._dirty&&(e._dirty=!0)&&1==items.push(e)&&(options.debounceRendering||defer)(rerender)}function rerender(){var e,t=items;for(items=[];e=t.pop();)e._dirty&&renderComponent(e)}function isSameNodeType(e,t,n){return"string"==typeof t||"number"==typeof t?void 0!==e.splitText:"string"==typeof t.nodeName?!e._componentConstructor&&isNamedNode(e,t.nodeName):n||e._componentConstructor===t.nodeName}function isNamedNode(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function getNodeProps(e){var t=extend({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var o in n)void 0===t[o]&&(t[o]=n[o]);return t}function createNode(e,t){t=t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return t.normalizedNodeName=e,t}function removeNode(e){var t=e.parentNode;t&&t.removeChild(e)}function setAccessor(e,t,n,o,i){if("key"!==(t="className"===t?"class":t))if("ref"===t)n&&n(null),o&&o(e);else if("class"!==t||i)if("style"===t){if(o&&"string"!=typeof o&&"string"!=typeof n||(e.style.cssText=o||""),o&&"object"==typeof o){if("string"!=typeof n)for(var r in n)r in o||(e.style[r]="");for(var a in o)e.style[a]="number"==typeof o[a]&&!1===IS_NON_DIMENSIONAL.test(a)?o[a]+"px":o[a]}}else{var s;"dangerouslySetInnerHTML"===t?o&&(e.innerHTML=o.__html||""):"o"==t[0]&&"n"==t[1]?(s=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase().substring(2),o?n||e.addEventListener(t,eventProxy,s):e.removeEventListener(t,eventProxy,s),(e._listeners||(e._listeners={}))[t]=o):"list"!==t&&"type"!==t&&!i&&t in e?(setProperty(e,t,null==o?"":o),null!=o&&!1!==o||e.removeAttribute(t)):(i=i&&t!==(t=t.replace(/^xlink\:?/,"")),null==o||!1===o?i?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof o&&(i?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),o):e.setAttribute(t,o)))}else e.className=o||""}function setProperty(e,t,n){try{e[t]=n}catch(e){}}function eventProxy(e){return this._listeners[e.type](options.event&&options.event(e)||e)}var mounts=[],diffLevel=0,isSvgMode=!1,hydrating=!1;function flushMounts(){for(var e;e=mounts.pop();)options.afterMount&&options.afterMount(e),e.componentDidMount&&e.componentDidMount()}function diff(e,t,n,o,i,r){diffLevel++||(isSvgMode=null!=i&&void 0!==i.ownerSVGElement,hydrating=null!=e&&!(ATTR_KEY in e));o=idiff(e,t,n,o,r);return i&&o.parentNode!==i&&i.appendChild(o),--diffLevel||(hydrating=!1,r||flushMounts()),o}function idiff(e,t,n,o,i){var r=e,a=isSvgMode;if("string"==typeof(t=null==t||"boolean"==typeof t?"":t)||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||i)?e.nodeValue!=t&&(e.nodeValue=t):(r=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(r,e),recollectNodeTree(e,!0))),r[ATTR_KEY]=!0,r;var s=t.nodeName;if("function"==typeof s)return buildComponentFromVNode(e,t,n,o);if(isSvgMode="svg"===s||"foreignObject"!==s&&isSvgMode,s=String(s),(!e||!isNamedNode(e,s))&&(r=createNode(s,isSvgMode),e)){for(;e.firstChild;)r.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(r,e),recollectNodeTree(e,!0)}var i=r.firstChild,l=r[ATTR_KEY],s=t.children;if(null==l)for(var l=r[ATTR_KEY]={},c=r.attributes,h=c.length;h--;)l[c[h].name]=c[h].value;return!hydrating&&s&&1===s.length&&"string"==typeof s[0]&&null!=i&&void 0!==i.splitText&&null==i.nextSibling?i.nodeValue!=s[0]&&(i.nodeValue=s[0]):(s&&s.length||null!=i)&&innerDiffNode(r,s,n,o,hydrating||null!=l.dangerouslySetInnerHTML),diffAttributes(r,t.attributes,l),isSvgMode=a,r}function innerDiffNode(e,t,n,o,i){var r,a,s=e.childNodes,l=[],c={},h=0,u=0,f=s.length,d=0,p=t?t.length:0;if(0!==f)for(var m=0;m<f;m++){var g=s[m],v=g[ATTR_KEY],b=p&&v?g._component?g._component.__key:v.key:null;null!=b?(h++,c[b]=g):(v||(void 0!==g.splitText?!i||g.nodeValue.trim():i))&&(l[d++]=g)}if(0!==p)for(var _=0;_<p;_++){var y,$=null,w=(y=t[_]).key;if(null!=w)h&&void 0!==c[w]&&($=c[w],c[w]=void 0,h--);else if(!$&&u<d)for(r=u;r<d;r++)if(void 0!==l[r]&&isSameNodeType(a=l[r],y,i)){$=a,l[r]=void 0,r===d-1&&d--,r===u&&u++;break}$=idiff($,y,n,o),w=s[_],$&&$!==e&&$!==w&&(null==w?e.appendChild($):$===w.nextSibling?removeNode(w):e.insertBefore($,w))}if(h)for(var k in c)void 0!==c[k]&&recollectNodeTree(c[k],!1);for(;u<=d;)void 0!==($=l[d--])&&recollectNodeTree($,!1)}function recollectNodeTree(e,t){var n=e._component;n?unmountComponent(n):(null!=e[ATTR_KEY]&&e[ATTR_KEY].ref&&e[ATTR_KEY].ref(null),!1!==t&&null!=e[ATTR_KEY]||removeNode(e),removeChildren(e))}function removeChildren(e){for(e=e.lastChild;e;){var t=e.previousSibling;recollectNodeTree(e,!0),e=t}}function diffAttributes(e,t,n){for(var o in n)t&&null!=t[o]||null==n[o]||setAccessor(e,o,n[o],n[o]=void 0,isSvgMode);for(o in t)"children"===o||"innerHTML"===o||o in n&&t[o]===("value"===o||"checked"===o?e:n)[o]||setAccessor(e,o,n[o],n[o]=t[o],isSvgMode)}var components={};function collectComponent(e){var t=e.constructor.name;(components[t]||(components[t]=[])).push(e)}function createComponent(e,t,n){var o,i=components[e.name];if(e.prototype&&e.prototype.render?(o=new e(t,n),Component.call(o,t,n)):((o=new Component(t,n)).constructor=e,o.render=doRender),i)for(var r=i.length;r--;)if(i[r].constructor===e){o.nextBase=i[r].nextBase,i.splice(r,1);break}return o}function doRender(e,t,n){return this.constructor(e,n)}function setComponentProps(e,t,n,o,i){e._disable||(e._disable=!0,(e.__ref=t.ref)&&delete t.ref,(e.__key=t.key)&&delete t.key,!e.base||i?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,o),o&&o!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=o),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,n!==NO_RENDER&&(n!==SYNC_RENDER&&!1===options.syncComponentUpdates&&e.base?enqueueRender(e):renderComponent(e,SYNC_RENDER,i)),e.__ref&&e.__ref(e))}function renderComponent(e,t,n,o){if(!e._disable){var i=e.props,r=e.state,a=e.context,s=e.prevProps||i,l=e.prevState||r,c=e.prevContext||a,h=e.base,u=e.nextBase,f=h||u,d=e._component,p=!1;if(h&&(e.props=s,e.state=l,e.context=c,t!==FORCE_RENDER&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(i,r,a)?p=!0:e.componentWillUpdate&&e.componentWillUpdate(i,r,a),e.props=i,e.state=r,e.context=a),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!p){i=e.render(i,r,a),e.getChildContext&&(a=extend(extend({},a),e.getChildContext()));var m,g,v,b,r=i&&i.nodeName;if("function"==typeof r?(v=getNodeProps(i),(b=d)&&b.constructor===r&&v.key==b.__key?setComponentProps(b,v,SYNC_RENDER,a,!1):(m=b,e._component=b=createComponent(r,v,a),b.nextBase=b.nextBase||u,b._parentComponent=e,setComponentProps(b,v,NO_RENDER,a,!1),renderComponent(b,SYNC_RENDER,n,!0)),g=b.base):(v=f,(m=d)&&(v=e._component=null),!f&&t!==SYNC_RENDER||(v&&(v._component=null),g=diff(v,i,a,n||!h,f&&f.parentNode,!0))),!f||g===f||b===d||(d=f.parentNode)&&g!==d&&(d.replaceChild(g,f),m||(f._component=null,recollectNodeTree(f,!1))),m&&unmountComponent(m),(e.base=g)&&!o){for(var _=e,y=e;y=y._parentComponent;)(_=y).base=g;g._component=_,g._componentConstructor=_.constructor}}if(!h||n?mounts.unshift(e):p||(e.componentDidUpdate&&e.componentDidUpdate(s,l,c),options.afterUpdate&&options.afterUpdate(e)),null!=e._renderCallbacks)for(;e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);diffLevel||o||flushMounts()}}function buildComponentFromVNode(e,t,n,o){for(var i=e&&e._component,r=i,a=e,s=i&&e._componentConstructor===t.nodeName,l=s,c=getNodeProps(t);i&&!l&&(i=i._parentComponent);)l=i.constructor===t.nodeName;return i&&l&&(!o||i._component)?(setComponentProps(i,c,ASYNC_RENDER,n,o),e=i.base):(r&&!s&&(unmountComponent(r),e=a=null),i=createComponent(t.nodeName,c,n),e&&!i.nextBase&&(i.nextBase=e,a=null),setComponentProps(i,c,SYNC_RENDER,n,o),e=i.base,a&&e!==a&&(a._component=null,recollectNodeTree(a,!1))),e}function unmountComponent(e){options.beforeUnmount&&options.beforeUnmount(e);var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?unmountComponent(n):t&&(t[ATTR_KEY]&&t[ATTR_KEY].ref&&t[ATTR_KEY].ref(null),removeNode(e.nextBase=t),collectComponent(e),removeChildren(t)),e.__ref&&e.__ref(null)}function Component(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{}}function render(e,t,n){return diff(n,e,{},!1,t,!1)}extend(Component.prototype,{setState:function(e,t){var n=this.state;this.prevState||(this.prevState=extend({},n)),extend(n,"function"==typeof e?e(n,this.props):e),t&&(this._renderCallbacks=this._renderCallbacks||[]).push(t),enqueueRender(this)},forceUpdate:function(e){e&&(this._renderCallbacks=this._renderCallbacks||[]).push(e),renderComponent(this,FORCE_RENDER)},render:function(){}});var CSanitize=function(){this.slugify_Name=this.slugify_Name.bind(this),this.slugify_PathName=this.slugify_PathName.bind(this),this.clean_Path=this.clean_Path.bind(this),this.clean_Query=this.clean_Query.bind(this),this.clean_Hash=this.clean_Hash.bind(this)};CSanitize.prototype.slugify_Name=function(e){return e=(e=(e=(e=(e=e.toLowerCase()).replace(/%[a-f0-9]{2}/g,"-")).replace(/[^a-z0-9]/g,"-")).replace(/-+/g,"-")).replace(/^-|-$/g,"")},CSanitize.prototype.slugify_PathName=function(e){if(e.length&&"$"==e[0]){var t=Number.parseInt(e.substr(1));return 0<t?"$"+t:""}return this.slugify_Name(e)},CSanitize.prototype.sanitize_URI=function(e){try{var t=decodeURIComponent(unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}return 0===t.indexOf("javascript:")||0===t.indexOf("vbscript:")||0===t.indexOf("data:")?"":e},CSanitize.prototype.makeSlug=function(e){return this.slugify_Name(e)},CSanitize.prototype.clean_Path=function(e){return e.split("/").map(this.slugify_PathName).join("/")},CSanitize.prototype.clean_Query=function(e){return e},CSanitize.prototype.clean_Hash=function(e){if(e.length&&"#"==e[0]){var t=e.indexOf("?"),n=-1!=t?this.clean_Query(e.substr(e.indexOf("?"))):"";e=-1!=t?e.substr(0,t):e;n="#"+this.clean_Path(e.substr(1))+n;if("#"!=n)return n}return""},CSanitize.prototype.makeClean=function(e){return e=(e=(e=(e=(e=e.toLowerCase()).replace(/%[a-f0-9]{2}/g,"-")).replace(/[^a-z0-9\/#]/g,"-")).replace(/-+/g,"-")).replace(/\/+/g,"/")},CSanitize.prototype.trimSlashes=function(e){return e.replace(/^\/|\/$/g,"")},CSanitize.prototype.validateMail=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},CSanitize.prototype.parseHash=function(e){var t={path:"",extra:[],args:{}};if(!e.length)return t;var n=e.indexOf("?"),o=-1!=n?e.substr(n+1):"";o.length&&o.split("&").forEach(function(e){e=e.split("=");t.args[e[0]]=!(1<e.length)||e[1]});e=-1!=n?e.substr(1,n-1):e.substr(1);return t.extra=e.split("/"),t.path=t.extra.shift(),t},CSanitize.prototype.getHTTPVars=function(){var e={};if(location.search)for(var t=location.search.substring(1).split("&"),n=0;n<t.length;n++){var o=t[n].split("=");o[0]&&(e[o[0]]=o[1]||!0)}return e};var Sanitize=new CSanitize,Route=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.shouldComponentUpdate=function(e,t){return 0!=e.node.id},t.prototype.render=function(e){var t=e.component,n=e.render,o=e.params,i=e.node.id;0<Object.keys(o).length&&(i+=e.props.extra.join("+"));o=Object.assign(e.props,{key:i,params:o});return t?h$1(t,e.props):n?n(o):void 0},t}(Component),DEFAULT_DELIMITER="/",DEFAULT_DELIMITERS="./",PATH_REGEXP=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function parse(e,t){for(var n=[],o=0,i=0,r="",a=t&&t.delimiter||DEFAULT_DELIMITER,s=t&&t.delimiters||DEFAULT_DELIMITERS,l=!1;null!==(u=PATH_REGEXP.exec(e));){var c,h,u,f,d=u[0],p=u[1],m=u.index;r+=e.slice(i,m),i=m+d.length,p?(r+=p[1],l=!0):(c="",h=e[i],f=u[2],m=u[3],d=u[4],p=u[5],!l&&r.length&&(u=r.length-1,-1<s.indexOf(r[u])&&(c=r[u],r=r.slice(0,u))),r&&(n.push(r),r="",l=!1),n.push({name:f||o++,prefix:c,delimiter:f=c||a,optional:"?"===p||"*"===p,repeat:"+"===p||"*"===p,partial:""!==c&&void 0!==h&&h!==c,pattern:(d=m||d)?escapeGroup(d):"[^"+escapeString(f)+"]+?"}))}return(r||i<e.length)&&n.push(r+e.substr(i)),n}function escapeString(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function escapeGroup(e){return e.replace(/([=!:$/()])/g,"\\$1")}function flags(e){return e&&e.sensitive?"":"i"}function regexpToRegexp(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var o=0;o<n.length;o++)t.push({name:o,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return e}function arrayToRegexp(e,t,n){for(var o=[],i=0;i<e.length;i++)o.push(pathToRegexp(e[i],t,n).source);return new RegExp("(?:"+o.join("|")+")",flags(n))}function stringToRegexp(e,t,n){return tokensToRegExp(parse(e,n),t,n)}function tokensToRegExp(e,t,n){for(var o=(n=n||{}).strict,i=!1!==n.end,r=escapeString(n.delimiter||DEFAULT_DELIMITER),a=n.delimiters||DEFAULT_DELIMITERS,s=[].concat(n.endsWith||[]).map(escapeString).concat("$").join("|"),l="",c=!1,h=0;h<e.length;h++){var u,f,d=e[h];"string"==typeof d?(l+=escapeString(d),c=h===e.length-1&&-1<a.indexOf(d[d.length-1])):(u=escapeString(d.prefix),f=d.repeat?"(?:"+d.pattern+")(?:"+u+"(?:"+d.pattern+"))*":d.pattern,t&&t.push(d),d.optional?d.partial?l+=u+"("+f+")?":l+="(?:"+u+"("+f+"))?":l+=u+"("+f+")")}return i?(o||(l+="(?:"+r+")?"),l+="$"===s?"$":"(?="+s+")"):(o||(l+="(?:"+r+"(?="+s+"))?"),c||(l+="(?="+r+"|"+s+")")),new RegExp("^"+l,flags(n))}function pathToRegexp(e,t,n){return e instanceof RegExp?regexpToRegexp(e,t):(Array.isArray(e)?arrayToRegexp:stringToRegexp)(e,t,n)}var Router=function(t){function e(e){t.call(this,e);e=this.props.match||["type","subtype","subsubtype"];this.state={routes:[],current:null,match:e,params:{}},0!==this.props.node.id&&(this.flattenRoutes(this.props.children),this.getCurrentRoute())}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getCurrentRoute=function(e){var t,n,o,i=(e||this.props).node,r=this.state.routes;if(i){for(o in r){var a=r[o];if(this.matchRoute(a.attributes,i)){if(a.attributes.static&&a.attributes.path&&!this.matchPath(a.attributes.path))continue;t=a}"error"==a.attributes.type&&(n=a)}!t&&n&&(t=n),this.setState({current:t})}},e.prototype.matchPath=function(e){if(Array.isArray(e)){for(var t in e)if(this.matchPath(e[t]))return!0;return!1}var n=[],o=pathToRegexp(e,n),i=window.location.pathname.replace(this.props.node.path,"").replace("/$"+this.props.node.id,""),r={},a=o.exec(i=""===i?"/":i);if(!a)return!1;if(0<n.length)for(var s in n){var l=parseInt(s+1);r[n[s].name]=a[l]}return this.setState({params:r}),!0},e.prototype.matchRoute=function(e,t){for(var n in this.state.match){var o=""==e[this.state.match[n]]?null:e[this.state.match[n]],n=""==t[this.state.match[n]]?null:t[this.state.match[n]];if(null!=o&&null!=n)if(Array.isArray(o)){if(!o.includes(n))return!1}else if(o!=n)return!1}return!0},e.prototype.flattenRoutes=function(e,t,n){for(var o in e){var i=e[o];i.nodeName===Route&&((o=Object.assign({},(t?t:i).attributes,i.attributes)).static&&t&&t.attributes.path&&i.attributes.path&&(o.path=t.attributes.path+i.attributes.path),o.default&&o.static&&o.path&&(o.path=["/"].concat(o.path)),i=cloneElement(i,o),this.state.routes.push(i),0<i.children.length&&this.flattenRoutes(i.children,i))}},e.prototype.componentWillReceiveProps=function(e){e&&e.node&&e.node.id&&(this.setState({routes:[],params:{}}),this.flattenRoutes(e.children),this.getCurrentRoute(e))},e.prototype.render=function(e,t){return t.current?cloneElement(t.current,Object.assign({},e,{params:t.params})):h$1("div",{id:"content"})},e}(Component),Shallow={Diff:Diff,Compare:Compare};function Diff(e,t){for(var n in e)if(!(n in t))return!0;for(var o in t)if(e[o]!==t[o])return!0;return!1}function Compare(e,t,n){return Diff(e.props,t)||Diff(e.state,n)}var ButtonBase=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(t,e){var n;return t.hasOwnProperty("tabIndex")||(t.tabIndex="0"),t.class?t.class="button-base "+t.class:t.class="button-base",t.disabled&&(t.class+=" -disabled"),t.onclick&&(t.keepFocus||(n=t.onclick,t.onclick=function(e){t.disabled||(n(e),void 0!==document.activeElement.blur?document.activeElement.blur():document.activeElement.parentNode.blur&&document.activeElement.parentNode.blur())}),t.onkeydown=function(e){13!==e.keyCode||t.disabled||t.onclick()}),h$1("div",t)},e}(Component),NavLink=function(t){function n(e){t.call(this,e),this.onClick=this.onClick.bind(this)}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.dispatchNavChangeEvent=function(e){var t=this.base,n=t.href+(t.search&&0!==t.search.length?"":e.old.search),o=(t.search&&0!==t.search.length?t:e.old).search,o=new CustomEvent("navchange",{detail:Object.assign(e,{location:{baseURI:t.baseURI,hash:t.hash,host:t.host,hostname:t.hostname,href:n,origin:t.origin,pathname:t.pathname,port:t.port,protocol:t.protocol,search:o}})});window.dispatchEvent(o)},n.prototype.onClick=function(e){var t;this.props.blank||e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||((this.base&&(this.base.origin||this.base.href&&this.base.href.slice(0,this.base.href.indexOf("/","https://".length))))===window.location.origin&&(t={old:Object.assign({},window.location),top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft},e.preventDefault(),n.prototype.dispatchNavChangeEvent.call(this,t)),e.stopPropagation())},n.prototype.render=function(e){return(e=Object.assign({},e)).href&&(e.href=Sanitize.sanitize_URI(e.href),-1!==e.href.indexOf("//")?(e.target="_blank",e.rel="noopener noreferrer"):e.onclick=this.onClick,e.blank&&(e.target="_blank")),h$1("a",e)},n}(Component),ButtonLink=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(t,e){var n,o=this;t.class?t.class="button-base button-link "+t.class:t.class="button-base button-link",t.disabled&&(t.class+=" -disabled"),t.href&&(-1!==t.href.indexOf("//")?(t.target="_blank",t.rel="noopener noreferrer"):n=this.onClick);var i=t.onclick;return t.onclick=function(e){t.disabled||(i&&i(e),n&&n.call(o.base,e),void 0!==document.activeElement.blur?document.activeElement.blur():document.activeElement.parentNode.blur&&document.activeElement.parentNode.blur())},t.onkeydown=function(e){13!==e.keyCode||t.disabled||t.onclick()},h$1("a",t)},e}(NavLink),SVGIcon=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n,o={class:"svg-icon"},i={};return e.baseline&&(o.class+=" -baseline"),e.top&&(o.class+=" -top"),e.bottom&&(o.class+=" -bottom"),e["text-top"]&&(o.class+=" -text-top"),e["text-bottom"]&&(o.class+=" -text-bottom"),e.middle&&(o.class+=" -middle"),e.double&&(o.class+=" -double"),e.biggest&&(o.class+=" -biggest"),e.bigger&&(o.class+=" -bigger"),e.big&&(o.class+=" -big"),e.small&&(o.class+=" -small"),e.half&&(o.class+=" -half"),e.quarter&&(o.class+=" -quarter"),e.block&&(o.class+=" -block"),e.gap&&(o.class+=" -gap"),e.pad&&(o.class+=" -pad"),e.name?(o.class+=" icon-"+e.name,i.xlinkHref="#icon-"+e.name):e.src?(o.class+=" icon-"+e.src,i.xlinkHref="#icon-"+e.src):(n=e.children,o.class+=" icon-"+n,i.xlinkHref="#icon-"+n),e.class&&(o.class+=" "+e.class),h$1("svg",o,h$1("use",i))},t}(Component),NavSpinner=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){return h$1("div",{class:"nav-spinner"},h$1("div",null,h$1(SVGIcon,null,"spinner")))},e}(Component),UIButtonDiv=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(t){var n;return null!=(t=Object.assign({},t)).tabIndex&&(t.tabIndex="0"),t.onclick&&(t.keepFocus||(n=t.onclick,t.onclick=function(e){n(e),void 0!==document.activeElement.blur?document.activeElement.blur():document.activeElement.parentNode.blur&&document.activeElement.parentNode.blur()}),t.onkeydown=function(e){13===e.keyCode&&t.onclick()}),h$1("div",Object.assign({},t,{class:cN("ui-button",t.class)}))},e}(Component),UILink=function(t){function n(e){t.call(this,e),this.onClick=this.onClick.bind(this)}return t&&(n.__proto__=t),((n.prototype=Object.create(t&&t.prototype)).constructor=n).prototype.dispatchNavChangeEvent=function(e){var t=this.base,n=t.href+(t.search&&0!==t.search.length?"":e.old.search),o=(t.search&&0!==t.search.length?t:e.old).search,o=new CustomEvent("navchange",{detail:Object.assign(e,{location:{baseURI:t.baseURI,hash:t.hash,host:t.host,hostname:t.hostname,href:n,origin:t.origin,pathname:t.pathname,port:t.port,protocol:t.protocol,search:o}})});window.dispatchEvent(o)},n.prototype.onClick=function(e){var t;this.props.blank||e.shiftKey||e.metaKey||e.ctrlKey||e.altKey||((this.base&&(this.base.origin||this.base.href&&this.base.href.slice(0,this.base.href.indexOf("/","https://".length))))===window.location.origin&&(t={old:Object.assign({},window.location),top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft},e.preventDefault(),n.prototype.dispatchNavChangeEvent.call(this,t)),e.stopPropagation())},n.prototype.render=function(e){return(e=Object.assign({},e)).href&&(e.href=Sanitize.sanitize_URI(e.href),-1!==e.href.indexOf("//")?(e.target="_blank",e.rel="noopener noreferrer"):e.onclick=this.onClick,e.blank&&(e.target="_blank")),h$1("a",e)},n}(Component),UIButtonLink=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(t){var n,o=this;(t=Object.assign({},t)).href&&(t.noblank||-1===t.href.indexOf("//")?n=this.onClick:(t.target="_blank",t.rel="noopener noreferrer"));var i=t.onclick;return t.onclick=function(e){i&&i(e),n&&n.call(o.base,e),void 0!==document.activeElement.blur?document.activeElement.blur():document.activeElement.parentNode.blur&&document.activeElement.parentNode.blur()},t.onkeydown=function(e){13===e.keyCode&&t.onclick()},h$1("a",Object.assign({},t,{class:cN("ui-button",t.class)}))},e}(UILink),UIButton=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return e.href?h$1(UIButtonLink,e):h$1(UIButtonDiv,e)},e}(Component),callerIDIsAmongNodeAuthors=function(e){return-1<e.node.authors.indexOf(e.callerId)},isNotificationType=function(e,t){return-1<e.notification.map(function(e){return e.type}).indexOf(t)},isNotificationMention=function(e){return isNotificationType(e,"mention")},isNotificationFeedback=function(e){return isNotificationType(e,"feedback")||isNotificationType(e,"comment")&&callerIDIsAmongNodeAuthors(e)},isNotificationFriendGame=function(e){return isNotificationType(e,"item")},isNotificationFriendPost=function(e){return isNotificationType(e,"post")},isNotificationComment=function(e){return isNotificationType(e,"comment")&&!callerIDIsAmongNodeAuthors(e)},isNotificationOther=function(e){return!(isNotificationType(e,"comment")||isNotificationType(e,"node")||isNotificationType(e,"item")||isNotificationType(e,"post")||isNotificationType(e,"mention")||isNotificationType(e,"feedback"))},NotificationItem=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getSocial=function(n,o,t,i){void 0===i&&(i=!1);var r=o.filter(function(e,t){return o.indexOf(e)==t}),e=r.map(function(e){return-1<t.indexOf(e)}),a=e.filter(function(e){return e}).length,s=[];if(0<a){e.forEach(function(e,t){e&&(i?s.push(h$1("span",null,h$1(NavLink,{class:"-at-name",key:t},"@"+n.get(r[t]).name),"'s")):s.push(h$1(NavLink,{class:"-at-name",key:t},"@"+n.get(r[t]).name)))});var l=s.length;if(3<l||l<r.length){for(var e=(s=s.slice(0,3)).length,c=s.length-1;0<c;--c)s.splice(c,0,", ");s.push(" & "+(r.length-e)+" more")}else if(1<l)for(var h=l-1;0<h;--h)s.splice(h,0,h==l-1?" & ":", ")}return{count:a,content:s}},e.prototype.isCommentNodeAuthor=function(e,t){return!(!t||1!=t.length)&&-1<e.authors.indexOf(t[0].author)},e.prototype.getNodeAuthorAsSubjectJSX=function(e){var t=e.node,n=e.social,o=e.users,i=e.callerID,e=this.getSocial(o,t.authors,n.friends);if(-1<t.authors.indexOf(i))return h$1("span",null,"You");if(0<e.count)return h$1("span",null,"Your friend",1<e.count?"s":""," ",e.content);n=this.getSocial(o,t.authors,n.following);return 0<n.count?h$1("span",null,n.content):h$1("span",null,h$1(NavLink,{class:"-at-name"},"@",o.get(t.author).name))},e.prototype.getNodeAuthorAsObjectJSX=function(e){var t=e.node,n=e.social,o=e.users,i=e.callerID,r=e.comment,e=this.getSocial(o,t.authors,n.friends,!0);if(-1<t.authors.indexOf(i))return h$1("span",null,"your");if(this.isCommentNodeAuthor(t,r))return h$1("span",null,"their");if(0<e.count)return h$1("span",null,"your friend",1<e.count?"s":""," ",e.content);n=this.getSocial(o,t.authors,n.following,!0);return 0<n.count?h$1("span",null,n.content):h$1("span",null,h$1(NavLink,{class:"-at-name"},"@",o.get(t.author).name),"'s")},e.prototype.getCommentAuthorAsSubjectJSX=function(e){var t=e.comment,n=e.social,o=e.users,i=e.callerID,e=t.map(function(e){return e.author}),t=this.getSocial(o,e,n.friends);if(-1<e.indexOf(i))return h$1("span",null,"You");if(0<t.count)return h$1("span",null,"Your friend",1<t.count?"s":""," ",t.content);n=this.getSocial(o,e,n.following);return 0<n.count?h$1("span",null,n.content):1<e.length?h$1("span",null,e.length," users"):1==e.length&&o.get(e[0])?h$1("span",null,h$1(NavLink,{class:"-at-name"},"@",o.get(e[0]).name)):h$1("span",null,"Someone")},e.prototype.getNodeType=function(e){var t=e.node.type;return t=e.node.subtype?e.node.subtype:t},e.prototype.getNavProps=function(e){var t=e.notification,n=t.notification[0],e={href:t.node.path,title:"Notification Id: "+n.id,class:e.class,id:e.id,onclick:e.onclick};return t.comment&&(e.href+="#/comment-"+t.earliestComment),e},e.prototype.getTimePrefix=function(e){e=(new Date).getTime()-e.time;return getRoughAge(e)},e.prototype.renderOther=function(e,t,n){var o=this.getNodeType(e),i=e.notification[0].type,r=e.node;if(e.comment){var a=this.getCommentAuthorAsSubjectJSX(e),s=this.getNodeAuthorAsObjectJSX(e);return h$1(ButtonLink,n,h$1(SVGIcon,null,"quesition"),t," ",a," caused unhandled notification ",i," for ",s," ",o,' "',h$1("em",null,r.name),'"')}e=this.getNodeAuthorAsSubjectJSX(e);return h$1(ButtonLink,n,h$1(SVGIcon,null,"quesition"),t," ",e," caused unhandled notification ",i," with their ",o,' "',h$1("em",null,r.name),'"')},e.prototype.renderFeedback=function(e,t,n){var o=this.getCommentAuthorAsSubjectJSX(e),i=this.getNodeType(e),e=e.node;return h$1(ButtonLink,n,h$1(SVGIcon,null,"bubble-empty"),t," ",o," commented on your ",i,' "',h$1("em",null,e.name),'"')},e.prototype.renderComment=function(e,t,n){var o=this.getCommentAuthorAsSubjectJSX(e),i=this.getNodeAuthorAsObjectJSX(e),r=this.getNodeType(e),a=e.node,e=e.comment;return h$1(ButtonLink,n,h$1(SVGIcon,null,1<e.length?"bubbles":"bubble"),t," ",o," commented on ",i," ",r,' "',h$1("em",null,a.name),'"')},e.prototype.renderFriendsItem=function(e,t,n){var o=this.getNodeAuthorAsSubjectJSX(e),i=this.getNodeType(e),e=e.node;return h$1(ButtonLink,n,h$1(SVGIcon,null,"gamepad")," ",t," ",o," published a ",i,' "',h$1("em",null,e.name),'"')},e.prototype.renderFriendsPost=function(e,t,n){var o=this.getNodeAuthorAsSubjectJSX(e),e=e.node;return h$1(ButtonLink,n,h$1(SVGIcon,null,"feed")," ",t," ",o,' posted "',h$1("em",null,e.name),'"')},e.prototype.renderMention=function(e,t,n){var o=e.node,i=this.getNodeType(e);if(e.comment){var r=this.getCommentAuthorAsSubjectJSX(e),a=this.getNodeAuthorAsObjectJSX(e);return h$1(ButtonLink,n,h$1(SVGIcon,null,"at")," ",t," ",r," mentioned you in a comment on ",a," ",i,' "',h$1("em",null,o.name),'"')}e=this.getNodeAuthorAsSubjectJSX(e);return h$1(ButtonLink,n,h$1(SVGIcon,null,"at")," ",t," ",e," mentioned you in their ",i,' "',h$1("em",null,o.name),'"')},e.prototype.render=function(e,t){var n=e.notification,o=this.getNavProps(e),e=this.getTimePrefix(n);return isNotificationFeedback(n)?this.renderFeedback(n,e,o):isNotificationMention(n)?this.renderMention(n,e,o):isNotificationFriendGame(n)?this.renderFriendsItem(n,e,o):isNotificationFriendPost(n)?this.renderFriendsPost(n,e,o):isNotificationComment(n)?this.renderComment(n,e,o):isNotificationOther(n)?this.renderOther(n,e,o):void console.log("[ERROR: bad notification]",n)},e}(Component),Fetch$2={Get:Get$9,Post:Post};function Get$9(e,t,n,o){var i={};return t&&(i=Object.assign(i,{credentials:"include"})),o&&(o=Object.assign({Accept:"application/json"},o),i=Object.assign(i,{headers:o})),fetch(e,i).then(function(e){if(e){var t=e.headers.get("content-type");if(t&&-1!=t.indexOf("application/json"))return e.json();if(!1===n)return e.text()}return null})}function Post(e,t,n,o,i){var r={method:"POST"};!1!==n&&(r=Object.assign(r,{credentials:"include",mode:"cors"}));n={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return i&&(n=Object.assign(n,i)),r=Object.assign(r,{headers:n,body:Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("&")}),fetch(e,r).then(function(e){if(e){var t=e.headers.get("content-type");if(t&&-1!=t.indexOf("application/json"))return e.json();if(!1===o)return e.text()}return null})}var Cache={Store:Store$1,Fetch:Fetch$1,Remove:Remove$6,Exists:Exists,_Store:_Store$1,_Remove:_Remove,_Fetch:_Fetch$1,_Exists:_Exists$1},STORAGE$1=window.sessionStorage;function _Store$1(e,t){return STORAGE$1.setItem(e,t)}function _Remove(e){return STORAGE$1.removeItem(e)}function _Fetch$1(e){return STORAGE$1.getItem(e)}function _Exists$1(e){return!!STORAGE$1.getItem(e)}function Store$1(e,t,n){return(n=void 0===n?null:n)?_Store$1("!"+e,Date.now()+n):_Remove("!"+e),_Store$1("$"+e,JSON.stringify(t))}function Fetch$1(e,t){void 0===t&&(t=null);var n=_Fetch$1("!"+e);if(n&&Date.now()>n)return _Remove("!"+e),_Remove("$"+e),null;n=_Fetch$1("$"+e);return n?(t&&_Store$1("!"+e,Date.now()+t),JSON.parse(n)):null}function Remove$6(e){_Remove("!"+e),_Remove("$"+e)}function Exists(e){return _Exists$1("$"+e)}var $Node={Get:Get$8,GetFresh:GetFresh$1,GetKeyed:GetKeyed,GetFreshKeyed:GetFreshKeyed,Walk:Walk,GetFeed:GetFeed,GetMy:GetMy$6,Where:Where,What:What,Add:Add$6,Update:Update$1,Publish:Publish,Transform:Transform,AddMeta:AddMeta,RemoveMeta:RemoveMeta,AddLink:AddLink,RemoveLink:RemoveLink,InvalidateNodeCache:InvalidateNodeCache},NODE_CACHE={};function _Store(e){e.id&&(NODE_CACHE[e.id]=e)}function _Fetch(e){var t=null;return t=e?NODE_CACHE[e]:t}function InvalidateNodeCache(e){e&&(NODE_CACHE[e]=null)}function ArrayDiff(e,t){return e.filter(function(e){return t.indexOf(e)<0})}function Get$8(e,t){var n;if((e=Number.isInteger(e)?[e]:e).length&&e[0].modified){n=e,e=[];for(var o=0;o<n.length;o++){var i=n[o].id;e.push(i);var r=_Fetch(i);r&&n[o].modified>r.modified&&(console.log("Node "+i+" was Invalidated ("+n[o].modified+" > "+r.modified+")"),InvalidateNodeCache(i))}}for(var a=[],s=[],l=[],c=0;c<e.length;++c){var h=e[c],u=_Fetch(h);u&&(s.push(h),a.push(u),t&&t.length&&(t.includes("author")&&l.push(u.author),t.includes("parent")&&l.push(u.parent),t.includes("superparent")&&l.push(u.superparent),t.includes("authors")&&u.meta.authors&&l.concat(u.meta.authors),t.includes("parents")&&u.parents&&l.concat(u.parents)))}for(var f=0;f<l.length;++f){var d,p=l[f];s.includes(p)||(d=_Fetch(p))&&(s.push(p),a.push(d))}var m=ArrayDiff(e,s);return(0<m.length?GetFresh$1(m,t):Promise.resolve({nodes_cached:[],node:[],fresh:!0})).then(function(e){return e.node=e.node.concat(a),e.nodes_cached=e.nodes_cached.concat(s),(e.local=s).length&&(e.fresh=!1),e})}function GetFresh$1(e,t){Number.isInteger(e)&&(e=[e]);var n="";return t&&t.length&&(n="?"+t.join("&")),Fetch$2.Get(API_ENDPOINT+"/vx/node2/get/"+e.join("+")+n).then(function(e){if(e.node)for(var t=0;t<e.node.length;t++)_Store(e.node[t]);return e.fresh=!0,e})}function GetKeyed(e,t){return Get$8(e,t).then(function(e){var t=e.node;e.node={};for(var n=0;n<t.length;++n)e.node[t[n].id]=t[n];return e})}function GetFreshKeyed(e,t){return GetFresh$1(e,t).then(function(e){var t=e.node;e.node={};for(var n=0;n<t.length;++n)e.node[t[n].id]=t[n];return e})}function Walk(e,t,n){var o="";return n&&n.length&&(o="?"+n.join("&")),Fetch$2.Get(API_ENDPOINT+"/vx/node2/walk/"+e+"/"+t.join("/")+o).then(function(e){var t=e.node;e.node={};for(var n=0;n<t.length;++n)_Store(t[n]),e.node[t[n].id]=t[n];return e})}function GetFeed(e,t,n,o,i,r,a,s){var l=[];l.push(e),t&&(Array.isArray(t)&&(t=t.join("+")),l.push(t)),n&&(Array.isArray(n)&&(n=n.join("+")),l.push(n),o&&(Array.isArray(o)&&(o=o.join("+")),l.push(o),i&&(Array.isArray(i)&&(i=i.join("+")),l.push(i))));i=[];return r&&(r.length&&r.join?i.push("tags="+r.join("+")):i.push("tags="+r)),a&&i.push("offset="+a),s&&i.push("limit="+s),i.length&&(i="?"+i.join("&")),Fetch$2.Get(API_ENDPOINT+"/vx/node/feed/"+l.join("/")+i).then(function(e){return e})}function GetMy$6(){return Fetch$2.Get(API_ENDPOINT+"/vx/node2/getmy",!0).then(function(e){return _Store(e.node),e})}function Where(){return Fetch$2.Get(API_ENDPOINT+"/vx/node/where",!0)}function What(e){return Fetch$2.Get(API_ENDPOINT+"/vx/node2/what/"+e,!0).then(function(e){e.root&&_Store(e.root),e.featured&&_Store(e.featured);var t=e.node;e.node={};for(var n=0;n<t.length;++n)_Store(t[n]),e.node[t[n].id]=t[n];return e})}function Add$6(e,t,n,o){var i=[];return i.push(e),t&&i.push(t),n&&i.push(n),o&&i.push(o),Fetch$2.Post(API_ENDPOINT+"/vx/node/add/"+i.join("/"),{})}function Publish(t){return Fetch$2.Post(API_ENDPOINT+"/vx/node/publish/"+t,{}).then(function(e){return InvalidateNodeCache(t),e})}function Update$1(t,e,n,o){var i={};return e&&(i.name=e),n&&(i.body=n),o&&(i.tag=o),Fetch$2.Post(API_ENDPOINT+"/vx/node/update/"+t,i).then(function(e){return InvalidateNodeCache(t),e})}function Transform(t,e,n,o){return n&&(e+="/"+n),o&&(e+="/"+o),Fetch$2.Post(API_ENDPOINT+"/vx/node/transform/"+t+"/"+e,{}).then(function(e){return InvalidateNodeCache(t),e})}function AddMeta(t,e){return Fetch$2.Post(API_ENDPOINT+"/vx/node/meta/add/"+t,e).then(function(e){return InvalidateNodeCache(t),e})}function RemoveMeta(t,e){return Fetch$2.Post(API_ENDPOINT+"/vx/node/meta/remove/"+t,e).then(function(e){return InvalidateNodeCache(t),e})}function AddLink(t,n,e){return Fetch$2.Post(API_ENDPOINT+"/vx/node/link/add/"+t+"/"+n,e).then(function(e){return InvalidateNodeCache(t),InvalidateNodeCache(n),e})}function RemoveLink(t,n,e){return Fetch$2.Post(API_ENDPOINT+"/vx/node/link/remove/"+t+"/"+n,e).then(function(e){return InvalidateNodeCache(t),InvalidateNodeCache(n),e})}var $Comment={Get:Get$7,GetByNode:GetByNode,GetMyListByParentNode:GetMyListByParentNode,Add:Add$5,Remove:Remove$5,Update:Update};function Get$7(e){return Number.isInteger(e)&&(e=[e]),Fetch$2.Get(API_ENDPOINT+"/vx/comment/get/"+e.join("+"),!0)}function GetByNode(e){return Fetch$2.Get(API_ENDPOINT+"/vx/comment/getbynode/"+e,!0)}function GetMyListByParentNode(e){return Fetch$2.Get(API_ENDPOINT+"/vx/comment/getmylistbyparentnode/"+e,!0)}function Add$5(e,t,n,o,i){var r={};return Number.isInteger(e)&&(r.parent=e),n&&(r.body=n),o&&(r.tag=o),i&&(r.anonymous=i),Fetch$2.Post(API_ENDPOINT+"/vx/comment/add/"+t,r)}function Remove$5(e){return!1}function Update(e,t,n,o){var i={};return t&&(i.node=t),n&&(i.body=n),o&&(i.tag=o),Fetch$2.Post(API_ENDPOINT+"/vx/comment/update/"+e,i)}var setNotificationSettingsFromStorage=function(e,t){window.localStorage.setItem("notificationFilter"+e,t)},getNotificationSettingsFromStorage=function(e){e=window.localStorage.getItem("notificationFilter"+e);return"true"===e||"false"!==e&&void 0},Filters=["Mention","Comment","Feedback","FriendGame","FriendPost","Other"],DefaultFilters={Mention:!0,Comment:!1,Feedback:!0,FriendGame:!0,FriendPost:!0,Other:!0},SetFilters=function(e){for(var t=0;t<Filters.length;t+=1){var n=Filters[t];void 0!==e[n]&&setNotificationSettingsFromStorage(n,e[n])}},GetFilters=function(){for(var e={},t=0;t<Filters.length;t+=1){var n=Filters[t],o=getNotificationSettingsFromStorage(n);void 0===o&&(o=DefaultFilters[n]),e[n]=o}return e},ShouldShow=function(e,t){switch(e.type){case"comment":return t.Comment;case"mention":return t.Mention;case"feedback":return t.Feedback;case"item":return t.FriendGame;case"post":return t.FriendPost;default:return t.Other}},FilterResponse=function(e){var t=GetFilters();if(e.feed){e.filtered=[];for(var n,o=e.feed.length-1;-1<o;--o)ShouldShow(e.feed[o],t)||(n=e.feed.splice(o,1)[0],e.filtered.push(n));e.countFiltered=e.filtered.length,e.count=e.feed.length}return Promise.resolve(e)};function GetCountUnread(){return Fetch$2.Get(API_ENDPOINT+"/vx/notification/unread/count",!0)}function GetCountAll(){return Fetch$2.Get(API_ENDPOINT+"/vx/notification/all/count",!0)}function GetFeedUnread(e,t){return Fetch$2.Get(API_ENDPOINT+"/vx/notification/unread/feed?offset="+e+"&limit="+t,!0)}var GetFeedUnreadFiltered=function(e,t){return GetFeedUnread(e,t).then(function(e){return FilterResponse(e)})};function GetFeedAll(e,t){return Fetch$2.Get(API_ENDPOINT+"/vx/notification/all/feed?offset="+e+"&limit="+t,!0)}var GetFeedAllFiltered=function(e,t){return GetFeedAll(e,t).then(function(e){return FilterResponse(e)})};function SetMarkRead(e){return Fetch$2.Post(API_ENDPOINT+"/vx/notification/markread",{max_read:e})}function GetSubscription(e){return Fetch$2.Get(API_ENDPOINT+"/vx/notification/subscription/get/"+e,!0)}function Subscribe(e){return Fetch$2.Post(API_ENDPOINT+"/vx/notification/subscription/add/"+e,{})}function Unsubscribe(e){return Fetch$2.Post(API_ENDPOINT+"/vx/notification/subscription/remove/"+e,{})}var $Notification={GetCountUnread:GetCountUnread,GetCountAll:GetCountAll,GetFeedUnread:GetFeedUnread,GetFeedAll:GetFeedAll,SetMarkRead:SetMarkRead,GetSubscription:GetSubscription,Subscribe:Subscribe,Unsubscribe:Unsubscribe,SetFilters:SetFilters,GetFilters:GetFilters,GetFeedAllFiltered:GetFeedAllFiltered,GetFeedUnreadFiltered:GetFeedUnreadFiltered},NotificationsBase=function(t){function e(e){t.call(this,e),this.state={notifications:null,notificationIds:[],notificationsTotal:-1,count:0,status:null,feed:[],filtered:null,loading:!0,highestRead:-1},this.handleFilterChange=this.handleFilterChange.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.clearNotifications=function(){this.setState({notifications:null,notificationIds:[],notificationsTotal:-1,count:0,status:null,feed:[],filtered:null,loading:!0,highestRead:-1})},e.prototype.hasUnreadNotifications=function(){var e=this.getHighestNotificationInFeed();return null!==e&&e>this.state.highestRead},e.prototype.markReadHighest=function(){var t,n=this;this.hasUnreadNotifications()&&(t=this.getHighestNotificationInFeed(),$Notification.SetMarkRead(t).then(function(e){200==e.status&&n.setState({highestRead:t})}),this.props.clearCallback&&this.props.clearCallback())},e.prototype.getHighestNotificationInFeed=function(){var e=this.getNotificationsOrder(),t=this.state.feed,n=-1;if(t)for(var o=0;o<t.length;o++){var i=t[o].id;n<i&&(n=i)}return e&&0<e.length?Math.max(e[0],n):-1<n?n:null},e.prototype.processNotificationFeed=function(e){var t;null!=e?(this.setState({loading:!0}),t=e.caller_id,this.collectAllNodesAndNodes(e.feed,t),t=void 0!==e.max_read?e.max_read:this.state.highestRead,this.setState({feed:e.feed,filtered:e.filtered,status:e.status,count:e.count,highestRead:t})):this.setState({feed:[],filtered:[],count:0,status:200,loading:!1,highestRead:0})},e.prototype.collectAllNodesAndNodes=function(t,n){var o=this,i=new Map,r=[],a=new Map,s={},e=$Node.GetMy().then(function(e){s.following=e.meta.star||[],s.followers=e.refs.star||[],s.friends=s.followers.filter(function(e){return-1<s.following.indexOf(e)})});t.forEach(function(e){r.indexOf(e.node)<0&&r.push(e.node),a.set(e.id,e)});var l=new Map,c=new Map,h=new Map,u=[],f=new Map;u.push(n);var d=[];t.forEach(function(e){var t=e.id,n=e.node,e=e.comment;e&&(l.has(n)?l.get(n).push(e):l.set(n,[e]),d.push(e),c.set(t,{node:n,comment:e}))});var p=$Node.Get(r).then(function(e){e.node&&e.node.forEach(function(t){t.authors=[],0<t.author&&(u.indexOf(t.author)<0&&u.push(t.author),t.authors.push(t.author)),t.meta&&t.meta.author&&t.meta.author.forEach(function(e){0<e&&u.indexOf(e)<0&&u.push(e),0<e&&t.authors.indexOf(e)<0&&t.authors.push(e)}),i.set(t.id,t)})}),m=$Comment.Get(d).then(function(e){e.comment&&e.comment.forEach(function(e){h.set(e.id,e),0<e.author&&u.indexOf(e.author)<0&&u.push(e.author)})});Promise.all([p,m,e]).then(function(){return h.forEach(function(e,t){e.node&&(e.isNodeAuthor=-1<i.get(e.node).authors.indexOf(e.author))}),$Node.Get(u)}).then(function(e){e.node&&e.node.forEach(function(e){"user"==e.type&&(e.isFriend=-1<s.friends.indexOf(e.id),e.isFollowing=e.isFriend&&-1<s.following.indexOf(e.id),e.isFollower=e.isFriend&&-1<s.followers.indexOf(e.id),f.set(e.id,e))}),o.composeNotifications(t,n,c,l,i,h,f,a,s)})},e.prototype.composeNotifications=function(e,i,t,n,r,a,s,o,l){var c=this,h="@"+s.get(i).name;a.forEach(function(e,t){e.selfauthored=e.author==i,e.mention=0<=e.body.indexOf(h)}),r.forEach(function(t,e){t.selfauthored=!1,t.author==i?t.selfauthored=!0:t.meta&&t.meta.author&&t.meta.author.forEach(function(e){e==i&&(t.selfauthored=!0)}),t.mention=0<=t.body.indexOf(h)||0<=t.name.indexOf(h)});var u=this.state.notifications||new Map,f=this.state.notificationIds,d=[],p=null;e.forEach(function(e){var t,n,o;d.indexOf(e.id)<0&&(o=r.get(e.node),(t={node:o,comment:void 0,time:new Date(e.created).getTime(),earliestCommentId:void 0,unread:e.id>c.state.highestRead,notification:[e],mergeable:!1,multi:!1,users:new Map,social:l,callerID:i}).users.set(i,s.get(i)),t.users.set(o.author,s.get(o.author)),o.meta&&o.meta.author&&o.meta.author.forEach(function(e){t.users.has(e)||t.users.set(e,s.get(e))}),e.comment&&(n=a.get(e.comment),t.comment=[n],t.earliestComment=e.comment,t.users.set(n.author,s.get(n.author)),n.mention||n.selfauthored||n.isNodeAuthor||(t.mergeable=!0)),o=!1,p&&t.mergeable&&p.mergeable&&e.node==p.notification[0].node&&t.unread==p.unread&&(Math.abs(t.time-p.time)<144e5&&(o=!0)),n=t.notification[0].id,d.push(e.id),t.comment&&0==t.comment[0].node||(o?(p.multi=!0,p.notification.push(e),o=a.get(e.comment),p.comment.push(o),p.users.set(o.author,s.get(o.author)),p.earliestComment=Math.min(p.earliestComment,e.comment)):(u.set(n,t),p=t,f.push(n))))}),this.setState({notifications:u,notificationIds:f.sort(function(e,t){return t-e}),loading:!1,feedSize:(this.state.feedSize||0)+d.length})},e.prototype.updateCallback=function(){},e.prototype.isLoading=function(){return this.state.loading},e.prototype.getNotificationsOrder=function(){return this.state.notificationIds},e.prototype.getNotifications=function(n,o){var i=this,r=[],a=this.state.notifications,e=this.getNotificationsOrder();return this.state.loading||e.forEach(function(e){var t=a.get(e);0<n&&i.shouldShowNotification(t)&&(r.push([e,h$1(NotificationItem,{notification:t,onclick:o})]),--n)}),r},e.prototype.shouldShowNotification=function(e){var t=$Notification.GetFilters(),n=t.Mention,o=t.FriendGame,i=t.FriendPost,r=t.Feedback,a=t.Comment,t=t.Other;return!(!1===r||!isNotificationFeedback(e))||(!(!1===n||!isNotificationMention(e))||(!(!1===o||!isNotificationFriendGame(e))||(!(!1===i||!isNotificationFriendPost(e))||(!(!1===a||!isNotificationComment(e))||!1!==t&&isNotificationOther(e)))))},e.prototype.handleFilterChange=function(e,t){var n=$Notification.GetFilters();n[e]=void 0!==n[e]&&!n[e],$Notification.SetFilters(n),this.setState({filters:isFinite(this.state.filters)?this.state.filters+1:1})},e}(Component);function shallowDiff(e,t){for(var n in e)if(!(n in t))return!0;for(var o in t)if(e[o]!==t[o])return!0;return!1}var InputDropdown=function(t){function e(e){t.call(this,e),this.state={show:!1,value:e.value||0},this.onClickItem=this.onClickItem.bind(this),this.onShow=this.onShow.bind(this),this.onHide=this.onHide.bind(this),this.doShow=this.doShow.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.doShow=function(e){this.setState({show:!0}),document.addEventListener("click",this.onHide)},e.prototype.doHide=function(e){this.setState({show:!1}),document.removeEventListener("click",this.onHide),this.props.onhide&&this.props.onhide(e)},e.prototype.onShow=function(e){this.state.show?this.doHide(e):this.props.items&&1<this.props.items.length&&this.doShow(e)},e.prototype.onHide=function(e){this.dropdown!=e.target.closest(".input-dropdown")&&this.doHide(e)},e.prototype.onClickItem=function(e){e.preventDefault(),e.target.dataset.hasOwnProperty("index")&&(this.props.onmodify&&this.props.onmodify(parseInt(e.target.dataset.id)),this.setState({value:parseInt(e.target.dataset.id)}),this.doHide(e))},e.prototype.componentWillReceiveProps=function(e){e.expanded&&!this.state.show&&(this.setState({show:!0}),setTimeout(this.doShow,100))},e.prototype.componentDidMount=function(){this.props.expanded&&!this.state.show&&(this.setState({show:!0}),setTimeout(this.doShow,100))},e.prototype.render=function(o,e){var i=this,t=e.show,r=(null!=o.value?o:e).value;if(o.items&&o.items.length){var a,s=o.selfManaged,l=o.useClickCatcher,c=null,h=null,u=null;return o.hideSelectedField||(o.items.forEach(function(e){var t=e[0],n=e[1];e[2],t==r&&(u=h$1("button",{type:"button",onclick:i.onShow},h$1(SVGIcon,null,"hamburger"),n))}),null==u&&(u=h$1("button",{type:"button",onclick:this.onShow},h$1(SVGIcon,null,"hamburger"),o.items[0][1]))),t&&(h=[],a=0,o.items.forEach(function(e){var t=e[0],n=e[1],e=e[2];o.hideSelectedField||t!=r||(u=h$1("button",{type:"button",onclick:i.onShow},n)),c=l&&!e?h$1("div",{class:"-click-catcher",onclick:s?i.onClickItem:function(){},"data-index":a,"data-id":t}):null,h.push(h$1("div",{class:"-item",onclick:s&&!l?i.onClickItem:function(){},"data-index":a++,"data-id":t},n,e,c))}),h=h$1("div",{class:"-items"},h)),h$1("div",{class:cN("input-dropdown",o.class),ref:function(e){i.dropdown=e}},u,h)}return h$1("div",null)},e}(Component),DropdownNotification=function(t){function e(e){t.call(this,e),this.state={notifications:null,notificationIds:[],notificationsTotal:-1,count:0,status:null,feed:[],loading:!0,highestRead:-1},this.hide=this.hide.bind(this),this.clearNotifications=this.clearNotifications.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.processNotificationFeed(this.props.feed),this.props.anythingToMark&&this.markReadHighest()},e.prototype.hasNewNotification=function(n){if(!n)return!1;var o=this.props.feed&&this.props.feed.feed;return!o||!o.map(function(e,t){return e==n[t]}).concat(n.map(function(e,t){return e==o[t]})).reduce(function(e,t){return e&&t})},e.prototype.componentWillReceiveProps=function(e){this.hasNewNotification(e.feed&&e.feed.feed)&&(this.clearNotifications(),this.processNotificationFeed(e.feed),e.anythingToMark&&this.markReadHighest())},e.prototype.hide=function(){this.props.hideCallback&&this.props.hideCallback()},e.prototype.clearNotifications=function(){this.props.clearCallback&&this.props.clearCallback()},e.prototype.render=function(e,t){var n=[],n=e.error?[[null,h$1("div",{class:"-warning"},"Error: ",e.error)]]:200!=t.status?[[null,h$1("div",{class:"-warning"},"An error occurred retrieving the notifications...")]]:(n=t.loading?[[null,h$1("div",{class:"-warning"},"Loading...")]]:n).concat(this.getNotifications(8,e.hideCallback));return t.loading||0!=t.count||n.push([null,h$1("div",{class:"-warning"},"You have no notifications.")]),n.push([-1,h$1(ButtonLink,{onclick:this.hide,href:"/my/notifications"},h$1("em",null,"Open notifications feed..."))]),h$1(InputDropdown,{class:"-notifications",items:n,expanded:!0,hideSelectedField:!0,onhide:this.hide})},e}(NotificationsBase),UIIcon=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t,n={class:"ui-icon"},o={};return e.baseline&&(n.class+=" -baseline"),e.top&&(n.class+=" -top"),e.bottom&&(n.class+=" -bottom"),e["text-top"]&&(n.class+=" -text-top"),e["text-bottom"]&&(n.class+=" -text-bottom"),e.small&&(n.class+=" -small"),e.half&&(n.class+=" -half"),e.quarter&&(n.class+=" -quarter"),e.block&&(n.class+=" -block"),e.inline&&(n.class+=" -inline"),e.pad&&(n.class+=" -pad"),e.src?(n.class+=" icon-"+e.src,o.xlinkHref="#icon-"+e.src):(t=e.children.slice(0,1),n.class+=" icon-"+t,o.xlinkHref="#icon-"+t),n.class=cN(n.class,e.class),h$1("svg",n,h$1("use",o))},t}(Component),UIImage=function(t){function e(e){t.call(this,e),this.state={error:!1},this.onError=this.onError.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onError=function(){this.setState({error:!0})},e.prototype.render=function(e,t){(e=Object.assign({},e)).src&&!t.error||!e.failsrc||(e.src=e.failsrc),e.src&&0===e.src.indexOf("///")&&(e.src=STATIC_ENDPOINT+e.src.substr(2)),e.failsrc&&0===e.failsrc.indexOf("///")&&(e.failsrc=STATIC_ENDPOINT+e.failsrc.substr(2));t=cN("ui-image",e.class,e.block?"-block":null);return h$1("img",Object.assign({},e,{class:t,onerror:this.onError}))},e}(Component),UIDropdown=function(t){function e(e){t.call(this,e),this.state={show:!!e.show},this.onButton=this.onButton.bind(this),this.doShow=this.doShow.bind(this),this.doHide=this.doHide.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.doShow=function(e){this.setState({show:!0})},e.prototype.doHide=function(e){this.setState({show:!1})},e.prototype.onButton=function(e){this.state.show?this.doHide(e):this.doShow(e)},e.prototype.render=function(e,t){var n=this,o=e.children.slice(0,1),i=null;if(t.show){for(var r=this,a=e.children.slice(1),s=[],l=0;l<a.length;l++)!function(t){a[t].attributes.onclick?s.push(cloneElement(a[t],{onclick:function(e){r.doHide(),a[t].attributes.onclick(e)}})):a[t].attributes.href?s.push(cloneElement(a[t],{onclick:function(e){r.doHide()}})):s.push(cloneElement(a[t]))}(l);i=[h$1("div",{class:"-content"},s),h$1("div",{class:"-click-catcher",onclick:this.doHide})]}t=null;return e.tick&&(t=h$1(UIIcon,i?{src:"tick-up",class:"-tick"}:{src:"tick-down",class:"-tick"})),h$1("div",{class:cN("ui-dropdown",e.class,i?"-show":null,e.left?"-left":null,e.right?"-right":null),ref:function(e){n.dropdown=e}},h$1(UIButton,{class:"-button",onclick:this.onButton},t,o),i)},e}(Component),$User={Register:Register,Activate:Activate,Login:Login,Logout:Logout,Get:Get$6,Reset:Reset,Password:Password,Have:Have};function Register(e){return Fetch$2.Post(API_ENDPOINT+"/vx/user/create",{mail:e})}function Activate(e,t,n,o){return Fetch$2.Post(API_ENDPOINT+"/vx/user/activate",{id:e,key:t,name:n,pw:o})}function Login(e,t,n){return Fetch$2.Post(API_ENDPOINT+"/vx/user/login",{login:e,pw:t,secret:n})}function Logout(){return Fetch$2.Post(API_ENDPOINT+"/vx/user/logout",{})}function Get$6(){return Fetch$2.Get(API_ENDPOINT+"/vx/user/get",!0)}function Reset(e){return Fetch$2.Post(API_ENDPOINT+"/vx/user/reset",{login:e})}function Password(e,t,n){return Fetch$2.Post(API_ENDPOINT+"/vx/user/password",{id:e,key:t,pw:n})}function Have(e,t){return void 0===t&&(t=null),Fetch$2.Post(API_ENDPOINT+"/vx/user/have",{name:e,mail:t})}var ViewBarUser=function(t){function e(e){t.call(this,e),this.onLogout=this.onLogout.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onLogout=function(){$User.Logout().then(function(e){location.reload()})},e.prototype.render=function(e){var t=e.user;if(!t)return null;var n="/users/"+t.slug+"/",e="//"+STATIC_DOMAIN+"/other/dummy/user64.png";return t.meta&&t.meta.avatar&&(e="//"+STATIC_DOMAIN+t.meta.avatar+".40x40.fit.png"),h$1(UIDropdown,{class:"-user",right:!0},h$1(UIImage,{alt:"Your Profile",src:e,block:!0}),h$1(UIButton,{href:n},h$1(UIIcon,null,"user"),h$1("span",null,"My Profile")),h$1(UIButton,{href:n+"games"},h$1(UIIcon,null,"gamepad"),h$1("span",null,"My Games")),h$1("div",{class:"-gap"}),h$1(UIButton,{onclick:this.onLogout},h$1(UIIcon,null,"logout"),h$1("span",null,"Logout")))},e}(Component),ViewBar=function(t){function e(e){t.call(this,e),this.StartedNotificationLoop=!1,this.state,this.handleNotificationsClear=this.handleNotificationsClear.bind(this),this.handleNotificationsHide=this.handleNotificationsHide.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleNotificationsClear=function(){this.setState({notifications:0,notificationsHidden:0}),this.refreshFavIconNotificationCount()},e.prototype.handleNotificationsHide=function(){this.setState({showNotifications:!1})},e.prototype.checkNotificationCount=function(){var n,o,i=this,e=this.props.user,e=e&&0<e.id;e?(e=!this.StartedNotificationLoop,this.StartedNotificationLoop=!0,document.hidden&&!e?setTimeout(function(){return i.checkNotificationCount()},2e4):(e=this.state,n=e.notifications,o=e.notificationsFeed,$Notification.GetCountUnread().then(function(e){if(200!==e.status)return location.href="# expired",setTimeout(function(){return i.checkNotificationCount()},3e5),Promise.reject();var t=e.count,e=(n||0)<t?$Notification.GetFeedUnreadFiltered:!o&&$Notification.GetFeedAllFiltered;e&&e(0,40).then(function(e){i.state.notifications!=e.count&&(i.setState({notifications:0<t?e.count:0,notificationsHidden:e.countFiltered,notificationsFeed:e,notificationsError:null}),i.refreshFavIconNotificationCount()),setTimeout(function(){return i.checkNotificationCount()},6e4)}).catch(function(e){i.setState({notificationsError:"Could not retrieve notifications feed."}),setTimeout(function(){return i.checkNotificationCount()},3e5),console.log("[Notificaton error]",e)})}).catch(function(e){i.setState({notificationsError:"Could not retrieve notifications count."}),setTimeout(function(){return i.checkNotificationCount()},3e5),console.log("[Notificaton count error]",e)}))):(this.handleNotificationsClear(),this.StartedNotificationLoop=!1)},e.prototype.componentDidMount=function(){document.body.classList.add("_use-view-bar"),this.StartedNotificationLoop||this.checkNotificationCount()},e.prototype.componentWillUnmount=function(){document.body.classList.remove("_use-view-bar"),document.body.classList.remove("_static-view-bar")},e.prototype.shouldComponentUpdate=function(e,t){return Shallow.Compare(this,e,t)},e.prototype.componentDidUpdate=function(){this.StartedNotificationLoop||this.checkNotificationCount()},e.prototype.refreshFavIconNotificationCount=function(){var o=this.state.notifications||0,e=document.querySelector("link[rel='shortcut icon']");e&&e.parentNode.removeChild(e);var i=new Image;i.setAttribute("src","/favicon.ico"),i.onload=function(){var e=document.createElement("canvas");e.setAttribute("width",i.naturalWidth),e.setAttribute("height",i.naturalHeight);var t=e.getContext("2d");t.drawImage(i,0,0),0<o&&(n=9<o?"9+":String(o),t.fillStyle="#6f7984",t.rect(1<n.length?14:38,30,50,50),t.fill(),t.fillStyle="#eef2f7",t.font="bold 36px tahoma",t.fillText(n,1<n.length?16:40,64));var n=document.createElement("link");n.type="image/x-icon",n.rel="shortcut icon",n.href=e.toDataURL("image/x-icon"),document.getElementsByTagName("head")[0].appendChild(n)}},e.prototype.renderLeft=function(){},e.prototype.renderRight=function(e,t){var n=this;h$1(UIButton,{class:"-bar-button if-no-sidebar-block",onclick:function(e){console.log("calendar"),window.location.hash="#cal"}},h$1(SVGIcon,{baseline:!0},"calendar"),h$1("div",{class:"if-sidebar-block"},"Schedule"));var o,i,r=null,a=null,s=null,l=null,c=null,h=null,u=null,f=null,d=null,p=null;return SECURE_LOGIN_ONLY&&"https:"!==location.protocol?(i="https://"+location.hostname+location.pathname+location.search+location.hash,f=h$1(UIButton,{class:"-bar-button",noblank:!0,href:i},h$1(SVGIcon,null,"unlocked"),h$1("div",{class:"if-sidebar-block"},"Go to Secure Site"))):e&&e.id?(t&&t.id&&(t.focus_id&&t.what?(a=h$1(UIButton,{title:"My Game",href:t.what[t.focus_id].path,class:"-bar-button"},h$1(SVGIcon,null,"gamepad"),h$1("div",{class:"if-sidebar-block"},"My Game")),s=h$1(UIButton,{title:"New Post",class:"-bar-button",onclick:function(e){window.location.hash="#create/"+t.focus_id+"/post"}},h$1(SVGIcon,null,"edit"),h$1("div",{class:"if-sidebar-block"},"New Post"))):node_CanCreate(t,"item/game")&&(r=h$1(UIButton,{title:"Join Event",class:"-bar-button",onclick:function(e){window.location.hash="#create/"+t.id+"/item/game"}},h$1(SVGIcon,null,"publish"),h$1("div",{class:"if-sidebar-block"},"Join Event")))),o=null,0<(i=this.state.notifications)&&(o=h$1("div",{class:"-count"},i)),this.state.showNotifications&&(p=h$1(DropdownNotification,{feed:this.state.notificationsFeed,anythingToMark:0<this.state.notifications||0<this.state.notificationsHidden,clearCallback:this.handleNotificationsClear,hideCallback:this.handleNotificationsHide,error:this.state.notificationsError})),l=h$1(UIButton,{title:"Notifications",class:"-bar-icon",onclick:function(e){n.setState({showNotifications:!n.state.showNotifications})}},h$1(SVGIcon,{baseline:!0},"bubble"),o),c=h$1(ViewBarUser,{user:e})):e?(h=h$1(UIButton,{class:"-bar-button",onclick:function(e){console.log("register"),window.location.hash="#user-register"}},h$1(SVGIcon,null,"user-plus"),h$1("div",{class:"if-sidebar-block"},"Create Account")),u=h$1(UIButton,{class:"-bar-button",onclick:function(e){console.log("login"),window.location.hash="#user-login"}},h$1(SVGIcon,null,"key"),h$1("div",{class:"if-sidebar-block"},"Login"))):d=h$1(NavSpinner,null),d?h$1("div",{class:"-fake-right"},d):h$1("div",{class:"-right"},r,a,s,null,l,p,c,h,u,f)},e.prototype.render=function(e){var t,n=e.user,o=e.featured;return e.loading&&(t=h$1(NavSpinner,null)),h$1("div",{class:"view-bar"},h$1("div",{class:"-content"},h$1("div",{class:"-left"},h$1(UIButton,{title:"Ludum Dare",href:"/",class:"-logo"},h$1(SVGIcon,{class:"if-sidebar-block",baseline:!0},"ludum"),h$1(SVGIcon,{class:"if-sidebar-block",baseline:!0},"dare"),h$1(SVGIcon,{class:"if-no-sidebar-block",baseline:!0},"l-udum"),h$1(SVGIcon,{class:"if-no-sidebar-block",baseline:!0},"d-are"))),t,this.renderRight(n,o)))},e}(Component),HeaderWarning=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e=e.root;return e&&e.meta&&e.meta.message?h$1("div",{class:"header-base header-warning outside"},h$1(UIIcon,{baseline:!0,small:!0,src:"warning"})," ",e.meta.message):null},e}(Component),HeaderWhatsup=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e.node,e.user,e.path,e.extra;e=e.featured;if(e&&e.meta){if(1==parseInt(e.meta["event-mode"]))return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",e.name," ",h$1(UILink,{href:e.path+"/theme"},h$1(UIIcon,{baseline:!0,small:!0,src:"lightbulb"})," Theme Suggestions")," are open!");if(2==parseInt(e.meta["event-mode"]))return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",e.name," ",h$1(UILink,{href:e.path+"/theme"},h$1(UIIcon,{baseline:!0,small:!0,src:"fire"})," Theme Slaughter Round"));if(3==parseInt(e.meta["event-mode"]))return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",e.name," ",h$1(UILink,{href:e.path+"/theme"},h$1(UIIcon,{baseline:!0,small:!0,src:"fire"})," Theme Fusion Round"));if(4==parseInt(e.meta["event-mode"]))return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",e.name," ",h$1(UILink,{href:e.path+"/theme"},h$1(UIIcon,{baseline:!0,small:!0,src:"ticket"})," Theme Voting"));if(5==parseInt(e.meta["event-mode"]))return e.meta["event-theme"]?h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",h$1(UILink,{href:e.path},h$1(UIIcon,{baseline:!0,small:!0,src:"trophy"})," ",e.name)," ",h$1("span",{class:"-title _font2"},"Theme:")," ",e.meta["event-theme"]):h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"ON NOW:")," ",h$1(UILink,{href:e.path},h$1(UIIcon,{baseline:!0,small:!0,src:"trophy"})," ",e.name)," Theme Announcement Soon! ",h$1(UILink,{href:"https://twitter.com/ludumdare"},h$1(UIIcon,{baseline:!0,small:!0,src:"twitter"})," Check Twitter"));if(6==parseInt(e.meta["event-mode"])&&e.meta["event-theme"])return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"RATINGS+FEEDBACK & EXTRA ON NOW:")," ",h$1(UILink,{href:e.path},h$1(UIIcon,{baseline:!0,small:!0,src:"trophy"})," ",e.name)," ",h$1("span",{class:"-title _font2"},"Theme:")," ",e.meta["event-theme"]);if(7==parseInt(e.meta["event-mode"])&&e.meta["event-theme"])return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"RESULTS SOON:")," ",h$1(UILink,{href:e.path},h$1(UIIcon,{baseline:!0,small:!0,src:"trophy"})," ",e.name),". This can take a while (hours). ",h$1(UILink,{href:"https://twitter.com/ludumdare"},h$1(UIIcon,{baseline:!0,small:!0,src:"twitter"})," Stay tuned"));if(8==parseInt(e.meta["event-mode"])&&e.meta["event-theme"])return h$1("div",{class:"header-base header-whatsup outside"},h$1("span",{class:"-title _font2"},"RESULTS:")," ",h$1(UILink,{href:e.path+"/results"},h$1(UIIcon,{baseline:!0,small:!0,src:"trophy"})," ",e.name))}return null},e}(Component),HeaderClock=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",null)},e}(Component),ViewHeader=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=h$1(HeaderWarning,{root:e.root}),n=h$1(HeaderWhatsup,{featured:e.featured}),e=h$1(HeaderClock,{featured:e.featured});return h$1("div",{id:"header"},t,n,e)},e}(Component),SidebarCountdown=function(t){function e(e){t.call(this,e),this.countdown_interval=null,this.total_seconds=0,this.$={},this.values={},this.class=this.props.nc,this.setState({loaded:!1})}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.init=function(e){var t=this,n=new Date,o=e.getTime()-n.getTime(),i=Math.abs(o/1e3),r=i%60,e=Math.floor(i/60)%60,n=Math.floor(i/60/60)%24,o=Math.floor(i/60/60/24);t.values={days:o,hours:n,minutes:e,seconds:r},0<o&&t.setState({ShowDays:!0}),t.total_seconds=i,t.setState({values:{days:o,hours:n,minutes:e,seconds:r},fvalues:{d1:0,d2:0,h1:0,h2:0,m1:0,m2:0,s1:0,s2:0},animate:!1}),t.count()},e.prototype.componentDidMount=function(){this.init(this.props.date)},e.prototype.animateFigure=function(e,t){var n=e.children[0],o=e.children[2],i=e.children[1],e=e.children[3];i.children[0].innerHTML=t,e.children[0].innerHTML=t,n.setAttribute("style","transition: 0.8s all ease-out; transform: rotateX(-180deg) perspective(300px)"),setTimeout(function(){n.setAttribute("style","transition: 0.0s all ease-out; transform: rotateX(0deg) perspective(0px)"),n.innerHTML=t,o.innerHTML=t},800),i.setAttribute("style","transition: 0.8s all ease-out; transform: rotateX(0deg) perspective(300px)"),setTimeout(function(){i.setAttribute("style","transition: 0.0s all ease-out; transform: rotateX(180deg) perspective(0px)")},800)},e.prototype.checkHour=function(e,t,n){var o=e.toString().charAt(0),i=e.toString().charAt(1),r=t.children[0].innerHTML,a=n.children[0].innerHTML;10<=e?(r!==o&&this.animateFigure(t,o),a!==i&&this.animateFigure(n,i)):("0"!==r&&this.animateFigure(t,0),a!==o&&this.animateFigure(n,o))},e.prototype.count=function(){var e=this,t=e.daysblock.children[1],n=e.hoursblock.children[1],o=e.minutesblock.children[1],i=e.secondsblock.children[1];this.countdown_interval=setInterval(function(){0<e.total_seconds?(--e.values.seconds,0<=e.values.minutes&&e.values.seconds<0&&(e.values.seconds=59,--e.values.minutes),0<=e.values.hours&&e.values.minutes<0&&(e.values.minutes=59,--e.values.hours),0<=e.values.days&&e.values.hours<0&&(e.values.hours=23,--e.values.days),e.values.days<1&&!0===e.state.ShowDays&&e.setState({ShowDays:!1}),e.values.days<1&&e.values.hours<=6&&(e.state.Urgent||e.setState({Urgent:!0})),e.state.loaded||e.setState({loaded:!0}),e.checkHour(e.values.days,t.children[0],t.children[1]),e.checkHour(e.values.hours,n.children[0],n.children[1]),e.checkHour(e.values.minutes,o.children[0],o.children[1]),e.checkHour(e.values.seconds,i.children[0],i.children[1]),--e.total_seconds):clearInterval(e.countdown_interval)},1e3)},e.prototype.renderDigit=function(e,t){return h$1("div",{class:cN("figure",t)},h$1("span",{class:"top"},e),h$1("span",{class:"top-back"},h$1("span",null,e)),h$1("span",{class:"bottom"},e),h$1("span",{class:"bottom-back"},h$1("span",null,e)))},e.prototype.renderDigits=function(e,t){var n=Math.floor(e/100),o=Math.floor(e/10)%10,i=Math.floor(e)%10,e=[];return Math.abs(n)&&e.push(this.renderDigit(n,cN(t,t+"-0"))),e.push(this.renderDigit(o,cN(t,t+"-1"))),e.push(this.renderDigit(i,cN(t,t+"-2"))),h$1("div",null,e)},e.prototype.render=function(e){var t=this;e.date.getTimezoneOffset();var n="display: none",o="display: inline-block";this.state.ShowDays&&(n="display: inline-block",o="display: none");var i,r,a="-countdown";this.state.Urgent&&!0===this.state.Urgent&&(a="-countdown urgent"),this.state.loaded||(s=new Date,i=e.date.getTime()-s.getTime(),r=Math.abs(i/1e3),l=String(parseInt(r%60)),s=String(Math.floor(r/60)%60),i=String(Math.floor(r/60/60)%24),r=String(Math.floor(r/60/60/24)),this.values={days:r,hours:i,minutes:s,seconds:l});var s="["+navigator.language+"] ";navigator.languages&&(s+="["+navigator.languages.join(",")+"] ");var l=null;return e.to&&(l=h$1("h1",{class:"_font2"},e.to," ",h$1("strong",null,e.tt))),h$1("div",{class:"sidebar-base sidebar-countdown"},h$1("div",{class:"-clock",id:this.class},l,h$1("div",{class:a},h$1("div",{class:"bloc-time days","data-init-value":"00",ref:function(e){return t.daysblock=e},style:n},h$1("span",{class:"count-title _font2"},"Days"),this.renderDigits(this.values.days,"days")),h$1("div",{class:"bloc-time hours","data-init-value":"00",ref:function(e){return t.hoursblock=e}},h$1("span",{class:"count-title _font2"},"Hours"),this.renderDigits(this.values.hours,"hours")),h$1("div",{class:"bloc-time min","data-init-value":"0",ref:function(e){return t.minutesblock=e},style:this.state.ShowDays?"margin-right: 0px;":""},h$1("span",{class:"count-title _font2"},"Minutes"),this.renderDigits(this.values.minutes,"minutes")),h$1("div",{class:"bloc-time sec","data-init-value":"0",style:o,ref:function(e){return t.secondsblock=e}},h$1("span",{class:"count-title _font2"},"Seconds"),this.renderDigits(this.values.seconds,"seconds")))),h$1("div",{id:this.class,class:"-info",title:s+e.date.toString()},e.tt," ",getLocaleDay(e.date)," at ",h$1("strong",null,getLocaleTime(e.date)," ",getLocaleTimeZone(e.date))," ",h$1(NavLink,{href:"https://github.com/ludumdare/ludumdare/issues/589"},h$1("strong",{title:"Adjusted for your local timezone. If this is not your timezone, click here and let us know!"},"*"))))},e}(Component),SidebarUpcoming=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=[h$1("div",{class:"-item"},h$1("strong",null,"April 1st-4th, 2022")," - Ludum Dare 50 ",h$1(SVGIcon,{baseline:!0,small:!0},"trophy")),h$1("div",{class:"-item"},"The 20th anniversary of Ludum Dare!"),h$1("div",{class:"-item"},""),h$1("div",{class:"-item"},h$1("strong",null,"September 30th 2022")," - Ludum Dare 51 ",h$1(SVGIcon,{baseline:!0,small:!0},"trophy")),h$1("div",{class:"-item"},h$1("strong",null,"April 2023")," - Ludum Dare 52 ",h$1(SVGIcon,{baseline:!0,small:!0},"trophy"))];return h$1("div",{class:"sidebar-base sidebar-shortlist sidebar-upcoming"},h$1("div",{class:"-title _font2"},h$1(SVGIcon,{baseline:!0},"calendar-wide")," ",h$1("span",{class:"-text"},"Coming Up")),t)},e}(Component),$JammerTV={GetLive:GetLive},EndPoint="//api.jammer.tv",CacheName="JammerTV|",TTL=3e4;function GetLive(t){Array.isArray(t)&&(t=t.join("+"));var e=Cache.Fetch(CacheName+t);return e?Promise.resolve(e):Get$9(EndPoint+"/v1/get/cat/"+t).then(function(e){return Cache.Store(CacheName+t,e,TTL),e})}var IMG=function(t){function e(e){t.call(this,e),this.state={error:!1},this.onError=this.onError.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onError=function(){this.setState({error:!0})},e.prototype.render=function(e,t){t=t.error;return!e.src&&e.failsrc&&(e.src=e.failsrc),e.src&&0===e.src.indexOf("///")&&(e.src=STATIC_ENDPOINT+e.src.substr(2)),e.failsrc&&0===e.failsrc.indexOf("///")&&(e.failsrc=STATIC_ENDPOINT+e.failsrc.substr(2)),t?(e.src=e.failsrc,h$1("img",e)):h$1("img",Object.assign({},e,{onerror:this.onError}))},e}(Component),RequiredStreams=5,SidebarTV=function(t){function e(e){t.call(this,e),this.state={active:0,streams:[]},this.services=["null","twitch","youtube"],this.serviceIcons=[h$1("div",null),h$1(SVGIcon,null,"twitch"),h$1(SVGIcon,null,"youtube"),h$1("div",null),h$1("div",null),h$1("div",null),h$1("div",null)],this.FailImage="//"+STATIC_DOMAIN+"/other/asset/TVFail.png",this.refreshStreams=this.refreshStreams.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.loadStreams=function(){var t=this,n=[];return $JammerTV.GetLive(["ludum-dare"]).then(function(e){return(n=e&&Array.isArray(e.streams)?n.concat(e.streams):n).length<RequiredStreams?$JammerTV.GetLive(["game-jam"]):null}).then(function(e){return(n=e&&Array.isArray(e.streams)?n.concat(e.streams):n).length<RequiredStreams?$JammerTV.GetLive(["game-dev"]):null}).then(function(e){return e&&Array.isArray(e.streams)&&(n=n.concat(e.streams)),t.setState({streams:n}),null}).catch(function(e){return t.setState({error:e}),e})},e.prototype.refreshStreams=function(){var e=this;document.hidden?this.timer=setTimeout(function(){e.refreshStreams()},2e4):this.loadStreams().then(function(){e.timer=setTimeout(function(){e.refreshStreams()},18e4)})},e.prototype.componentDidMount=function(){this.refreshStreams()},e.prototype.componentWillUnmount=function(){},e.prototype.setActive=function(e,t){this.setState({active:e})},e.prototype.showOthers=function(e,n){var o=this;return e.map(function(e,t){return h$1("div",{class:cN(e===n?"selected":""),onclick:o.setActive.bind(o,t),title:e&&e.user_name?e.user_name:""},h$1("div",null,h$1(IMG,{src:e?e.thumbnail_180p:"",failsrc:o.FailImage})))})},e.prototype.render=function(e,t){var n=this;if(t.error)return h$1("div",{class:"sidebar-base sidebar-tv"},h$1("div",{class:"-detail"},""+t.error));if(0==t.streams.length)return h$1("div",{class:"sidebar-base sidebar-tv"},h$1(NavSpinner,null));var o=t.streams[t.active],t=[t.streams[0],t.streams[1],t.streams[2]];return h$1("div",{class:"sidebar-base sidebar-tv"},h$1("div",{class:"-active",onclick:function(e){console.log("tv"),window.location.hash="#tv/"+n.services[o.service_id]+"/"+o.user_slug}},h$1("div",{class:"-img"},h$1(IMG,{src:o.thumbnail_180p,failsrc:this.FailImage})),h$1("div",{class:"-live"},h$1(SVGIcon,{baseline:!0,small:!0},"circle")," ",h$1("span",{class:"-text"},"LIVE")),h$1("div",{class:"-name stream-"+this.services[o.service_id]},this.serviceIcons[o.service_id]," ",h$1("span",{class:"-text"},o.user_name)),h$1("div",{class:"-viewers"},h$1(SVGIcon,{baseline:!0},"tv")," ",h$1("span",{class:"-text"},o.viewers)),h$1("div",{class:"-external",onclick:function(e){e.stopPropagation(),"twitch"==n.services[o.service_id]?window.open("https://www.twitch.tv/"+o.user_slug,"_blank"):n.services[o.service_id]}},h$1(SVGIcon,null,"twitch")),h$1("div",{class:"-play"},h$1(SVGIcon,null,"play"))),h$1("div",{class:"-detail",title:o.title},h$1(SVGIcon,{top:!0},"quotes-left"),h$1(SVGIcon,{bottom:!0},"quotes-right"),h$1("div",null,o.title)),h$1("div",{class:"-browse"},this.showOthers(t,o),h$1(ButtonLink,{class:"-more",href:"https://www.twitch.tv/directory/all/tags/c8d6d6ee-3b02-4ae7-81e9-4c0f434941cc",title:"MORE"},h$1("div",null,h$1(SVGIcon,null,"circle")," ",h$1(SVGIcon,null,"circle")," ",h$1(SVGIcon,null,"circle")))))},e}(Component),ViewSidebar=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=new Date(Date.UTC(2022,3,2,1,0,0)),n=new Date(Date.UTC(2022,3,4,1,0,0)),o=new Date(Date.UTC(2022,3,4,2,0,0)),i=new Date(Date.UTC(2022,3,5,1,0,0)),r=new Date(Date.UTC(2022,3,5,2,0,0)),a=new Date(Date.UTC(2022,3,21,20,0,0)),s=new Date(Date.UTC(2022,3,21,26,0,0)),l=new Date(Date.UTC(2022,8,30,22,0,0)),c=new Date,h=[];return c<t?h.push(h$1(SidebarCountdown,{date:t,nc:"ld",to:"Ludum Dare 50",tt:"Starts"})):(c<n&&h.length<3?h.push(h$1(SidebarCountdown,{date:n,nc:"compo",to:"Compo",tt:"Ends"})):c<o&&h.length<3&&h.push(h$1(SidebarCountdown,{date:o,nc:"compo",to:"Submission Hour",tt:"Ends"})),c<i&&h.length<3?h.push(h$1(SidebarCountdown,{date:i,nc:"jam",to:"Jam",tt:"Ends"})):c<r&&h.length<3&&h.push(h$1(SidebarCountdown,{date:r,nc:"jam",to:"Submission Hour",tt:"Ends"})),c<a&&e.featured&&e.featured.meta&&e.featured.meta["can-grade"]&&h.length<3&&h.push(h$1(SidebarCountdown,{date:a,nc:"jam",to:"Play+Rate games",tt:"Ends"})),(a=new Date(a)).setUTCHours(a.getUTCHours()-72),a<c&&c<s&&c<s&&h.length<3&&h.push(h$1(SidebarCountdown,{date:s,nc:"jam",to:"Results",tt:""})),l&&c<l&&0==h.length&&h.push(h$1(SidebarCountdown,{date:l,nc:"ld",to:"Ludum Dare 51",tt:"Starts"}))),h$1("div",{id:"sidebar"},h,h$1(SidebarTV,null),h$1(SidebarUpcoming,null))},e}(Component),ViewContent=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return h$1("div",{id:"content"},e.children)},t}(Component),ViewFooter=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(){return h$1("div",{id:"footer"},h$1("div",{class:"body"},h$1("div",{class:"tm col"},h$1("section",{class:"logo"},h$1(SVGIcon,{class:"ludum",baseline:!0},"ludum"),h$1(SVGIcon,{class:"dare",baseline:!0},"dare")),h$1("section",null,"Ludum Dare and LDJAM are trademarks of Interactive Snacks Limited")),h$1("div",{class:"nav col"},h$1("div",{class:"explore"},h$1("h1",null,"EXPLORE"),h$1("section",null,h$1("a",{href:"https://ludumdare.com"},"Ludum Dare")),h$1("section",null,h$1("a",{href:"https://ldjam.com"},"LDJAM Event Home")),h$1("section",null,h$1("a",{href:"https://ldjam.com/events/ludum-dare/rules"},"LDJAM Rules")),h$1("section",null,h$1("span",null,"Schedule")),h$1("section",null,h$1("span",null,"Learn"))),h$1("div",{class:"connect"},h$1("h1",null,"CONNECT"),h$1("section",null,h$1("a",{href:"https://ldjam.com/contact"},"Contact")),h$1("section",null,h$1("a",{href:"https://interactivesnacks.com/jobs"},"Jobs")),h$1("section",null,h$1("a",{href:"https://ldjam.com/support"},"Support Us!")),h$1("section",null,h$1("a",{href:"https://newsletter.ldjam.com",target:"_blank"},"Email Newsletter")),h$1("section",{class:"icons"},h$1("a",{href:"https://twitter.com/ludumdare",target:"_blank"},h$1("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h$1("title",null,"Twitter"),h$1("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"}))),h$1("a",{href:"https://github.com/ludumdare",target:"_blank"},h$1("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h$1("title",null,"GitHub"),h$1("path",{d:"M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"}))),h$1("a",{href:"https://youtube.com/ludumdare",target:"_blank"},h$1("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h$1("title",null,"YouTube"),h$1("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"}))),h$1("a",{href:"https://twitch.tv/ludumdare",target:"_blank"},h$1("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},h$1("title",null,"Twitch"),h$1("path",{d:"M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"})))))),h$1("div",{class:"legal col"},h$1("section",null,"Games are provided under their respective licenses. Except where otherwise noted, other content is provided under a ",h$1("a",{href:"https://creativecommons.org/licenses/by/4.0/",target:"_blank"},"Creative Commons Attribution 4.0 International")," license"),h$1("section",null,"This website's source code ",h$1("a",{href:"https://github.com/ludumdare/ludumdare",target:"_blank"},"is available")," under an MIT open source license"))),h$1("div",{class:"copyright"},h$1("section",{class:"policies"},h$1("a",{href:"/privacy"},"Privacy")," | ",h$1("a",{href:"/cookie"},"")," | ",h$1("a",{href:"/terms"},"Terms")),h$1("section",null," ",(new Date).getFullYear()," ",h$1("a",{href:"https://interactivesnacks.com"},"Interactive Snacks Limited")," ")))},e}(Component),Layout=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.user,n=e.featured,o=e.node,i=e.root,r=e.noSidebar?null:h$1(ViewSidebar,{user:t,featured:n}),o=!o||0==o.id;return h$1("div",{id:"layout"},h$1(ViewBar,{user:t,featured:n,loading:o}),h$1("div",{id:"body"},h$1(ViewHeader,{user:t,featured:n,root:i}),h$1("div",{id:"content-sidebar"},h$1(ViewContent,null,e.children),r)),h$1(ViewFooter,null))},t}(Component),ContentList=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return h$1("div",{class:cN("content-base content-list",e.class)},e.children)},t}(Component),Util=function(){};Util.escape=function(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},Util.htmldecode=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value},Util.unescape=function(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})},Util.replace=function(o,i){return o=o.source,i=i||"",function e(t,n){return t?(n=(n=n.source||n).replace(/(^|[^\[])\^/g,"$1"),o=o.replace(t,n),e):new RegExp(o,i)}},Util.merge=function(e){for(var t,n,o=arguments,i=1;i<arguments.length;i++)for(n in t=o[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e};var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:{exec:function(){}},hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:{exec:function(){}},lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,spoiler:/^( *\!>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:{exec:function(){}},paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|spoiler|blockquote|tag|def))+)\n*/,text:/^[^\n]+/,bullet:/(?:[*+-]|\d+\.)/,item:/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/};block.item=Util.replace(block.item,"gm")(/bull/g,block.bullet)(),block.list=Util.replace(block.list)(/bull/g,block.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+block.def.source+")")(),block.spoiler=Util.replace(block.spoiler)("def",block.def)(),block.blockquote=Util.replace(block.blockquote)("def",block.def)(),block._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",block.html=Util.replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)(),block.paragraph=Util.replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("spoiler",block.spoiler)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)(),block.normal=Util.merge({},block),block.gfm=Util.merge({},block.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),block.gfm.paragraph=Util.replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|"+block.list.source.replace("\\1","\\3")+"|")(),block.tables=Util.merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});var Lexer=function(e){this.tokens=[],this.tokens.links={},this.options=e||marked.defaults(),this.rules=block.normal,this.options.gfm&&(this.options.tables?this.rules=block.tables:this.rules=block.gfm)};Lexer.lex=function(e,t){return new Lexer(t).lex(e)},Lexer.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},Lexer.prototype.token=function(e,t,n){for(var o,i,r,a,s,l,c,h,e=e.replace(/^ +$/gm,"");e;)if((i=this.rules.newline.exec(e))&&(e=e.substring(i[0].length),1<i[0].length&&this.tokens.push({type:"space"})),i=this.rules.code.exec(e))e=e.substring(i[0].length),i=i[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?i:i.replace(/\n+$/,"")});else if(i=this.rules.fences.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"code",lang:i[2],text:i[3]||""});else if(i=this.rules.heading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:i[1].length,text:i[2]});else if(t&&(i=this.rules.nptable.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].split(/ *\| */);this.tokens.push(s)}else if(i=this.rules.lheading.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"heading",depth:"="===i[2]?1:2,text:i[1]});else if(i=this.rules.hr.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"hr"});else if(i=this.rules.spoiler.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"spoiler_start"}),i=i[0].replace(/^ *\!> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"spoiler_end"});else if(i=this.rules.blockquote.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"blockquote_start"}),i=i[0].replace(/^ *> ?/gm,""),this.token(i,t,!0),this.tokens.push({type:"blockquote_end"});else if(i=this.rules.list.exec(e)){for(e=e.substring(i[0].length),r=i[2],this.tokens.push({type:"list_start",ordered:1<r.length}),o=!1,h=(i=i[0].match(this.rules.item)).length,c=0;c<h;c++)l=(s=i[c]).length,~(s=s.replace(/^ *([*+-]|\d+\.) +/,"")).indexOf("\n ")&&(l-=s.length,s=this.options.pedantic?s.replace(/^ {1,4}/gm,""):s.replace(new RegExp("^ {1,"+l+"}","gm"),"")),this.options.smartLists&&c!==h-1&&(r===(a=block.bullet.exec(i[c+1])[0])||1<r.length&&1<a.length||(e=i.slice(c+1).join("\n")+e,c=h-1)),a=o||/\n\n(?!\s*$)/.test(s),c!==h-1&&(o="\n"===s.charAt(s.length-1),a=a||o),this.tokens.push({type:a?"loose_item_start":"list_item_start"}),this.token(s,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(i=this.rules.html.exec(e))e=e.substring(i[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===i[1]||"script"===i[1]||"style"===i[1]),text:i[0]});else if(!n&&t&&(i=this.rules.def.exec(e)))e=e.substring(i[0].length),this.tokens.links[i[1].toLowerCase()]={href:i[2],title:i[3]};else if(t&&(i=this.rules.table.exec(e))){for(e=e.substring(i[0].length),s={type:"table",header:i[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:i[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:i[3].replace(/(?: *\| *)?\n$/,"").split("\n")},c=0;c<s.align.length;c++)/^ *-+: *$/.test(s.align[c])?s.align[c]="right":/^ *:-+: *$/.test(s.align[c])?s.align[c]="center":/^ *:-+ *$/.test(s.align[c])?s.align[c]="left":s.align[c]=null;for(c=0;c<s.cells.length;c++)s.cells[c]=s.cells[c].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(s)}else if(t&&(i=this.rules.paragraph.exec(e)))e=e.substring(i[0].length),this.tokens.push({type:"paragraph",text:"\n"===i[1].charAt(i[1].length-1)?i[1].slice(0,-1):i[1]});else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),this.tokens.push({type:"text",text:i[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var LinkMail=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.href,n="???";return 0===t.indexOf("mailto:")?n=e.substr(7):t="mailto:"+(n=t),h$1("a",{class:cN("link-mail",e.class),href:t,title:n},h$1(SVGIcon,{gap:!0,small:!0,baseline:!0},"mail"),n)},e}(Component),SmartLink=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){return h$1("span",{class:"smart-link"},h$1("a",{href:e.full_url,target:"_blank",rel:"noopener noreferrer"},h$1("span",{class:"-icon-domain"},h$1(SVGIcon,{baseline:!0,small:!0},e.icon_name),h$1("span",{class:"-domain"},e.domain)),h$1("span",{class:"-the-rest"},e.part_url)))},e}(Component),LocalLink=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return e.hashLink?h$1("span",{class:"-icon-domain"},h$1(SVGIcon,{baseline:!0,small:!0,name:"link"})):h$1("span",{class:"-icon-domain"},h$1(SVGIcon,{baseline:!0,small:!0,name:"l-udum"}),h$1(SVGIcon,{baseline:!0,small:!0,name:"d-are"})),h$1("span",{class:"smart-link local-link"},h$1(NavLink,{href:e.href,title:e.title,target:e.target},h$1("span",{class:"-the-rest"},e.text)))},e}(Component),YoutubeEmbed=function(t){function e(e){t.call(this,e),this.state={iframe:!1},this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){this.setState({iframe:!0})},e.prototype.render=function(e,t){var n=e.id,e=["autoplay=1"];return url.args.t&&e.push("start="+parseInt(url.args.t)),t.iframe?h$1("div",{class:"embed-video -youtube"},h$1("div",{class:"-video"},h$1("iframe",{src:"https://www.youtube.com/embed/"+n+"?"+e.join("&"),frameborder:"0",allowfullscreen:!0,allow:"autoplay; fullscreen"}))):h$1("div",{class:"embed-video -youtube"},h$1("div",{class:"-thumbnail"},h$1("div",{class:"-overlay",onclick:this.onClick},h$1("div",{class:"-play"},h$1(SVGIcon,{middle:!0},"play")),h$1("div",{class:"-external"},h$1("a",{title:"Open in new tab",href:"//www.youtube.com/watch?v="+n,target:"_blank",rel:"noopener",onclick:function(e){e.stopPropagation()}},h$1(SVGIcon,{middle:!0,block:!0},"youtube")))),h$1("img",{alt:"Youtube video thumbnail",src:"https://i.ytimg.com/vi/"+n+"/mqdefault.jpg"})))},e}(Component),AutoEmbed=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){switch(e.link.info.domain){case"youtube.com":case"youtu.be":return h$1(YoutubeEmbed,{id:e.link.match});default:console.warn("failed to embed link",e.link)}},e}(Component),SmartDomains$1=SmartDomains=[{domain:"youtube.com",icon_name:"youtube",embed_test:"(?:youtube\\.com\\/watch\\?v=)(.*)(?:)"},{domain:"youtu.be",icon_name:"youtube",embed_test:"(?:youtu\\.be\\/)(.*)(?:)"},{domain:"github.com",icon_name:"github"},{domain:"twitch.tv",icon_name:"twitch"},{domain:"reddit.com",icon_name:"reddit"},{domain:"twitter.com",icon_name:"twitter"},{domain:"soundcloud.com",icon_name:"soundcloud"}],BlockSpoiler=function(t){function e(e){t.call(this,e),this.state={visible:!1},this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){this.setState({visible:!0})},e.prototype.render=function(e,t){return h$1("blockquote",{class:cN("block-spoiler",t.visible?"-visible":""),onclick:this.onClick},e.children)},e}(Component),Renderer$1=function(e){this.options=e||{}};Renderer$1.prototype.code=function(e,t,n){if(this.options.highlight){var o=this.options.highlight(e,t);if(null!=o&&o!==e)return n=!0,e=o,h$1("pre",null,h$1("code",{class:this.options.langPrefix+escape(t,!0),dangerouslySetInnerHTML:{__html:o}}))}return t?h$1("pre",null,h$1("code",{class:this.options.langPrefix+escape(t,!0)},n?e:Util.escape(e,!0))):h$1("pre",{class:"language-"},h$1("code",null,n?e:Util.escape(e,!0)))},Renderer$1.prototype.spoiler=function(e){return h$1(BlockSpoiler,null,e)},Renderer$1.prototype.blockquote=function(e){return h$1("blockquote",null,e)},Renderer$1.prototype.html=function(e){return{html:e}},Renderer$1.prototype.heading=function(e,t,n){return h$1("h"+t,{id:this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-").replace(/-$/,"")},e)},Renderer$1.prototype.hr=function(){return h$1("hr",null)},Renderer$1.prototype.list=function(e,t){return h$1(t?"ol":"ul",null,"\n",e)},Renderer$1.prototype.listitem=function(e){return h$1("li",null,e)},Renderer$1.prototype.paragraph=function(e){return h$1("p",null,e)},Renderer$1.prototype.table=function(e,t){return h$1("table",null,h$1("thead",null,e),h$1("tbody",null,t))},Renderer$1.prototype.tablerow=function(e){return h$1("tr",null,e)},Renderer$1.prototype.tablecell=function(e,t){return h$1(t.header?"th":"td",{style:(t.align,t.align)},e)},Renderer$1.prototype.strong=function(e){return h$1("strong",null,e)},Renderer$1.prototype.em=function(e){return h$1("em",null,e)},Renderer$1.prototype.emoji=function(e){e=Array.isArray(e)?e.join(""):e;var t=window.emoji.shortnameToURL(e);return t?h$1("img",{class:"emoji",alt:e,title:":"+e+":",src:t}):":"+e+":"},Renderer$1.prototype.atname=function(e){return h$1(NavLink,{href:"/users/"+e},"@",e)},Renderer$1.prototype.codespan=function(e){return h$1("code",null,Util.htmldecode(e))},Renderer$1.prototype.br=function(){return h$1("br",null)},Renderer$1.prototype.del=function(e){return h$1("del",null,e)},Renderer$1.prototype.parseLink=function(e){if(0==e.indexOf("///"))return{type:"static"};if(0==e.indexOf("//"))return{type:"protocol"};if(0==e.indexOf("/"))return{type:"relative"};if(0===e.indexOf("#/"))return{type:"local"};if(url=extractFromURL(e),url.domain){if(SmartDomains$1)for(var t=0;t<SmartDomains$1.length;t++){var n=SmartDomains$1[t];if(-1!==url.domain.indexOf(n.domain)){if(n.embed_test){var o=new RegExp(n.embed_test).exec(url.href);if(null!==o)return{type:"embed",match:o[1],info:n}}return{type:"smart",info:n}}}return{type:"simple"}}return console.warn("unable to parse href ",url.href),null},Renderer$1.prototype.link=function(e,t,n){if(this.options.sanitize){try{var o=decodeURIComponent(unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return""}e=extractFromURL(e).href;var i=n&&0<n.length,r=Array.isArray(n)?n.join(""):n,o=this.parseLink(e);if(null==o)return console.warn("Could not parse link",e),"";if("simple"==o.type)return i=i&&!/^\s+$/.test(n),h$1(NavLink,{href:e,title:t,target:"_blank"},i?n:e);if("smart"!=o.type)return"embed"==o.type?h$1(AutoEmbed,{link:o,title:t,text:i?n:e}):"relative"==o.type?h$1(LocalLink,{href:e,text:i?n:e,title:t,target:"_blank"}):"local"==o.type?h$1(LocalLink,{href:e,text:i?n:e,title:t,hashLink:!0}):"protocol"==o.type?(i=i&&!/^\s+$/.test(r),h$1(NavLink,{href:e,text:i?r:e.substr(2),title:t,target:"_blank"})):"static"==o.type?(i=i&&!/^\s+$/.test(r),h$1(NavLink,{href:"//"+STATIC_DOMAIN+e.substr(2),text:i?r:STATIC_DOMAIN+e.substr(2),title:t,target:"_blank"})):void 0;i=i&&!/^\s+$/.test(r),r=e.substring(e.indexOf(o.info.domain)+o.info.domain.length);return h$1(SmartLink,{icon_name:o.info.icon_name,full_url:e,domain:i?"":o.info.domain,part_url:i?n:r})},Renderer$1.prototype.mail=function(e,t,n){if(href="{0}@{1}".replace("{1}",t,1).replace("{0}",e,1),this.options.sanitize){try{var o=decodeURIComponent(unescape(href)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===o.indexOf("javascript:")||0===o.indexOf("vbscript:")||0===o.indexOf("data:"))return""}return h$1(LinkMail,{href:href,title:n},n)},Renderer$1.prototype.image=function(e,t,n){return h$1("img",{class:"img",src:e=0===e.indexOf("///")?STATIC_ENDPOINT+e.substr(2):STATIC_ENDPOINT+"/content/internal/pleaseupload.png",alt:n,title:t})},Renderer$1.prototype.text=function(e){return Util.htmldecode(e)};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:{exec:function(){}},tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:{exec:function(){}},text:/^[\s\S]+?(?=[\\<!\[_*`:@]| {2,}\n|$)/,emoji:/^:([a-z_0-9]+):/,email:/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})/i,atname:/^@([A-Za-z0-9-]+)(?!@)/,_inside:/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,_href:/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/};inline.link=Util.replace(inline.link)("inside",inline._inside)("href",inline._href)(),inline.reflink=Util.replace(inline.reflink)("inside",inline._inside)(),inline.normal=Util.merge({},inline),inline.pedantic=Util.merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),inline.gfm=Util.merge({},inline.normal,{escape:Util.replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:Util.replace(inline.text)("]|","~]|")("|","|https?://|")()}),inline.breaks=Util.merge({},inline.gfm,{br:Util.replace(inline.br)("{2,}","*")(),text:Util.replace(inline.gfm.text)("{2,}","*")()});var InlineLexer=function(e,t){if(this.options=t||marked.defaults(),this.links=e,this.rules=inline.normal,this.renderer=this.options.renderer||new Renderer(this.options),!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=inline.breaks:this.rules=inline.gfm:this.options.pedantic&&(this.rules=inline.pedantic)};InlineLexer.output=function(e,t,n){return new InlineLexer(t,n).output(e)},InlineLexer.prototype.output=function(e){for(var t,n,o,i,r=[];e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),r.push(i[1]);else if(i=this.rules.email.exec(e))e=e.substring(i[0].length),leftSide=i[1],rightSide=i[i.lastIndexOf(void 0)+1],n=i[0],r.push(this.renderer.mail(leftSide,rightSide,n));else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),o="@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),this.mangle("mailto:")+n):n=Util.escape(i[1]),r.push(this.renderer.link(o,null,n));else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),r.push(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):Util.escape(i[0]):i[0]);else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,r.push(this.outputLink(i,{href:i[2],title:i[3]})),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e)))e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),(t=this.links[t.toLowerCase()])&&t.href?(this.inLink=!0,r.push(this.outputLink(i,t)),this.inLink=!1):(r.push(i[0].charAt(0)),e=i[0].substring(1)+e);else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),r.push(this.renderer.strong(this.output(i[2]||i[1])));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),r.push(this.renderer.em(this.output(i[2]||i[1])));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),r.push(this.renderer.codespan(Util.escape(i[2],!0)));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),r.push(this.renderer.br());else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),r.push(this.renderer.del(this.output(i[1])));else if(i=this.rules.emoji.exec(e))e=e.substring(i[0].length),r.push(this.renderer.emoji(this.output(i[2]||i[1])));else if(i=this.rules.atname.exec(e))e=e.substring(i[0].length),r.push(this.renderer.atname(this.output(i[2]||i[1])));else if(i=this.rules.text.exec(e))l=i[0].indexOf(" "),-1===l?l=i[0].length:l++,e=e.substring(l),r.push(this.renderer.text(Util.escape(this.smartypants(i[0].substring(0,l)))));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),o=n=Util.escape(i[1]),r.push(this.renderer.link(o,null,n));return r},InlineLexer.prototype.outputLink=function(e,t){var n=Util.escape(t.href),t=t.title?Util.escape(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,t,this.output(e[1])):this.renderer.image(n,t,Util.escape(e[1]))},InlineLexer.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"&rsquo;").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,""):e},InlineLexer.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",o=e.length,i=0;i<o;i++)t=e.charCodeAt(i),n+="&#"+(t=.5<Math.random()?"x"+t.toString(16):t)+";";return n};var Parser=function(e){this.tokens=[],this.token=null,this.options=e||marked.defaults(),this.options.renderer=this.options.renderer||new Renderer$1(this.options),this.renderer=this.options.renderer};Parser.parse=function(e,t,n){return new Parser(t,n).parse(e)},Parser.prototype.parse=function(e){this.inline=new InlineLexer(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t=[];this.next();)t.push(this.tok());return t},Parser.prototype.next=function(){return this.token=this.tokens.pop()},Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},Parser.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},Parser.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":for(var e,t,n=[],o=[],i=[],r=0;r<this.token.header.length;r++)this.token.align[r],i.push(this.renderer.tablecell(this.inline.output(this.token.header[r]),{header:!0,align:this.token.align[r]}));for(n.push(this.renderer.tablerow(i)),r=0;r<this.token.cells.length;r++){for(e=this.token.cells[r],i=[],t=0;t<e.length;t++)i.push(this.renderer.tablecell(this.inline.output(e[t]),{header:!1,align:this.token.align[t]}));o.push(this.renderer.tablerow(i))}return this.renderer.table(n,o);case"spoiler_start":for(o=[];"spoiler_end"!==this.next().type;)o.push(this.tok());return this.renderer.spoiler(o);case"blockquote_start":for(o=[];"blockquote_end"!==this.next().type;)o.push(this.tok());return this.renderer.blockquote(o);case"list_start":for(var o=[],a=this.token.ordered;"list_end"!==this.next().type;)o.push(this.tok());return this.renderer.list(o,a);case"list_item_start":for(o=[];"list_item_end"!==this.next().type;)o.push("text"===this.token.type?this.parseText():this.tok());return this.renderer.listitem(o);case"loose_item_start":for(o=[];"list_item_end"!==this.next().type;)o.push(this.tok());return this.renderer.listitem(o);case"html":a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}};var marked=function(){};marked.defaults=function(){return{gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:null,xhtml:!1}},marked.prototype.parse=function(e,n,o){if(this.constructor.defaults().renderer=new Renderer$1(n||this.constructor.defaults()),o||"function"==typeof n){o||(o=n,n=null);var i,r=(n=Util.merge({},this.constructor.defaults(),n||{})).highlight,t=0;try{i=Lexer.lex(e,n)}catch(e){return o(e)}function a(t){if(t)return n.highlight=r,o(t);var e;try{e=Parser.parse(i,n)}catch(e){t=e}return n.highlight=r,t?o(t):o(null,e)}var s=i.length;if(!r||r.length<3)return a();if(delete n.highlight,!s)return a();for(;t<i.length;t++)!function(n){console.log(n),"code"!==n.type?--s||a():r(n.text,n.lang,function(e,t){return e?a(e):null==t||t===n.text?--s||a():(n.text=t,n.escaped=!0,void(--s||a()))})}(i[t])}else try{return n=n&&Util.merge({},this.constructor.defaults(),n),Parser.parse(Lexer.lex(e,n),n).map(function(e,t){return e})}catch(e){if((n||this.constructor.defaults()).silent)return h("div",null,h("p",null,"An error occured:"),h("pre",null,Util.escape(e.message+"",!0)));throw e}},marked.cleanMarkdown=function(e){return output=e.replace(/^( {4}[^\n]+\n*)+/,"").replace(/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/,"").replace(/<(.*?)>/g,"$1").replace(/^[=\-]{2,}\s*$/g,"").replace(/\[\^.+?\](\: .*?$)?/g,"").replace(/\s{0,2}\[.*?\]: .*?$/g,"").replace(/\!\[.*?\][\[\(].*?[\]\)]/g,"").replace(/\[(.*?)\][\[\(].*?[\]\)]/g,"$1").replace(/>/g,"").replace(/^\s{1,2}\[(.*?)\]: (\S+)( ".*?")?\s*$/g,"").replace(/^\#{1,6}\s*([^#]*)\s*(\#{1,6})?/gm,"$1").replace(/([\*_]{1,3})(\S.*?\S)\1/g,"$2").replace(/(`{3,})(.*?)\1/gm,"$2").replace(/^-{3,}\s*$/g,"").replace(/`(.+?)`/g,"$1").replace(/\n{2,}/g,"\n\n").replace(/^:([a-z_0-9]+):/,"").replace("\n"," "),output},marked.prototype.setOptions=function(e){Util.merge(this.constructor.defaults(),e),this.options=Util.merge(this.constructor.defaults(),e),console.log(this.options)};var $ThemeIdea={GetMy:GetMy$5,Add:Add$4,Remove:Remove$4};function GetMy$5(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/getmy/"+e,!0)}function Add$4(e,t){return Fetch$2.Post(API_ENDPOINT+"/vx/theme/idea/add/"+e,{idea:t})}function Remove$4(e,t){return Fetch$2.Post(API_ENDPOINT+"/vx/theme/idea/remove/"+e,{id:t})}var SHOW_PREVIOUS=6,canHaveMoreIdeas=function(e,t,n){return Object.keys(e).length+(t?1:0)<n},hasSubmittedIdeas=function(e){return 0<Object.keys(e).length},ContentEventIdea=function(t){function e(e){t.call(this,e),this.state={idea:"",ideas:null,previousThemes:[],enableSubmit:!1,maxIdeas:e.node.meta&&e.node.meta["theme-idea-limit"]?e.node.meta["theme-idea-limit"]:0,processingIdea:null},this.onKeyDown=this.onKeyDown.bind(this),this.textChange=this.textChange.bind(this),this.submitIdeaForm=this.submitIdeaForm.bind(this),this.renderIdea=this.renderIdea.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this;this.getPreviousEventThemes(),$ThemeIdea.GetMy([this.props.node.id]).then(function(e){e.ideas?t.setState({ideas:e.ideas,enableSubmit:canHaveMoreIdeas(e.ideas,!1,t.state.maxIdeas)}):t.setState({ideas:{}})}).catch(function(e){t.setState({error:"Error fetching your previous suggestions. Make sure you are logged in."})})},e.prototype.getPreviousEventThemes=function(){var t=this;$Node.GetFeed(this.props.node.parent,"parent","event",null,null,null,null,50).then(function(e){e=e.feed;$Node.Get(e).then(function(e){e=e.node.sort(function(e,t){return new Date(t.meta["event-start"])-new Date(e.meta["event-start"])}).filter(function(e){return e.id!==t.props.node.id}).map(function(e){return{id:e.id,start:e.meta["event-start"],theme:e.meta["event-theme"],name:e.name}});t.setState({previousThemes:e})}).catch(function(e){return t.setState({error:"Could not retrieve previous events."})})}).catch(function(e){return t.setState({error:"Could not find list of previous events."})})},e.prototype.textChange=function(e,t){e=e.target.value;t&&(e=e.trim()),this.setState({idea:e,error:64<e.length?"Suggestion is too long.":null})},e.prototype.onKeyDown=function(e){var t=13===(e=e||window.event).keyCode;this.textChange(e,t),t&&this.submitIdeaForm()},e.prototype.removeIdea=function(e,t){var n=this;e=parseInt(e),this.setState({error:null}),e?$ThemeIdea.Remove(this.props.node.id,e).then(function(e){n.setState({ideas:e.ideas,enableSubmit:canHaveMoreIdeas(e.ideas,!1,n.state.maxIdeas)})}).catch(function(e){n.setState({error:"Error processing the request. Make sure you are still logged in."})}):this.setState({error:"Unexpected error."})},e.prototype.checkDuplicateIdea=function(e){var t,n=this.state,o=n.processingIdea,i=n.ideas;if(e=Sanitize.slugify_Name(e),o&&e==Sanitize.slugify_Name(o))return!0;for(t in i)if(e==Sanitize.slugify_Name(i[t]))return!0;return!1},e.prototype.submitIdeaForm=function(e){var t=this,n=this.state.idea.trim();this.checkDuplicateIdea(n)?this.setState({error:"Suggestion is too similar to one of your other suggestions."}):0<n.length&&n.length<=64?(this.setState({enableSubmit:canHaveMoreIdeas(this.state.ideas,!0,this.state.maxIdeas),processingIdea:n,error:null}),$ThemeIdea.Add(this.props.node.id,n).then(function(e){t.setState({ideas:e.ideas,idea:201===e.status?"":n,enableSubmit:canHaveMoreIdeas(e.ideas,!1,t.state.maxIdeas),processingIdea:null})}).catch(function(e){t.setState({error:"Error processing the request. Make sure you are still logged in.",processingIdea:null})})):this.setState({error:"Suggestion is too "+(0==n.length?"short.":"long.")})},e.prototype.renderIdea=function(e){var t=this.state.ideas[e];return h$1("div",{class:"-item"},h$1(SVGIcon,null,"lightbulb"),h$1("div",{class:"-text",title:t},t),h$1("div",{class:"-x",onclick:this.removeIdea.bind(this,e)},h$1(SVGIcon,null,"cross")))},e.prototype.renderIdeas=function(){return Object.keys(this.state.ideas).map(this.renderIdea)},e.prototype.render=function(e,t){var n=e.node,o=e.user,i=t.idea,r=t.ideas,a=t.error,s=t.enableSubmit,e=t.maxIdeas,t=t.previousThemes;if(n.slug&&r){if(o&&o.id){if(0==e)return h$1("div",{class:"idea-body"},h$1("h3",null,"Theme Suggestion Round"),h$1("div",null,"This event doesn't allow suggesting themes."));o=null;t&&0<t.length&&(l=t.slice(0,SHOW_PREVIOUS).map(function(e){var t=null,t=e.theme?h$1("div",{class:"event-theme"},e.theme):h$1("div",{class:"event-no-theme"},"Event did not have a theme");return h$1("div",{class:"previous-theme previous-theme-item",key:e.id},h$1("div",{class:"event-name"},e.name),t)}),o=h$1("div",{class:"previous-theme"},h$1("h4",null,"Previous Themes"),l));var t=a?h$1("div",{class:"content-base content-post idea-error"},a):null,l=null;s&&(l=h$1("div",{class:"idea-form"},h$1("input",{type:"text",class:"-suggestion",onchange:this.textChange,onkeydown:this.onKeyDown,placeholder:"Your suggestion",maxlength:"64",value:i}),h$1(UIButton,{onclick:this.submitIdeaForm},h$1(SVGIcon,null,"suggestion")," Submit")));s=null;hasSubmittedIdeas(r)&&(s=h$1("div",{class:"idea-mylist"},this.renderIdeas()));i=null,r=Math.max(0,e-Object.keys(r).length),i=1<r?h$1("div",{class:"foot-note small"},"You have ",h$1("strong",null,r)," suggestions left"):1==r?h$1("div",{class:"foot-note small"},"You have ",h$1("strong",null,"1")," suggestion left"):h$1("div",{class:"foot-note small"},"You have no suggestions left");return h$1("div",{class:"idea-body"},h$1("h3",null,"Theme Suggestion Round"),o,h$1("h4",null,"Your Suggestions"),s,l,t,i)}return h$1("div",{class:"idea-body"},h$1("h3",null,"Theme Suggestion Round"),h$1("div",null,"Please log in"))}return h$1("div",{class:"content-base content-post"},a||h$1(NavSpinner,null))},e}(Component),$ThemeIdeaVote={Get:Get$5,GetMy:GetMy$4,Yes:Yes$1,No:No$1,Flag:Flag};function Get$5(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/vote/get/"+e,!0)}function GetMy$4(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/vote/getmy/"+e,!0)}function Yes$1(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/vote/yes/"+e,!0)}function No$1(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/vote/no/"+e,!0)}function Flag(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/idea/vote/flag/"+e,!0)}var PieSegment=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){if(e&&null!=e.angle&&null!=e.offset&&e.color){var t=e.angle;if(0!=t){var n=100-e.offset+25,o=e.color;return h$1("circle",{class:cN("-segment","vis_stroke_color_"+o,e.class),cx:"21",cy:"21",r:"15.91549430918954",fill:"transparent","stroke-width":"6","stroke-dasharray":t+" "+(100-t),"stroke-dashoffset":n})}}else console.warn("PieSegment was created with invalid props",e)},e}(Component),Legend=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){if(e&&e.colors&&e.names){for(var t=e.colors,n=e.names,o=[],i=0;i<n.length;i++){var r=n[i],a=t[i],a=cN("-shape-circle","vis_bg_color_"+a,e.class);o.push(h$1("li",null,h$1("span",{class:a}),h$1("p",null,r)))}return h$1("div",{class:"-legend"},h$1("ul",null,o))}console.warn("Legend was created with invalid props",e)},e}(Component),PieChart=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){if(!(e&&e.labels&&e.values))return console.warn("PieChart was created with invalid props",e),h$1("div",null,"No Data!");e.use_percentages=!(!e.use_percentages||1!=e.use_percentages);for(var t=e.labels,n=e.values,o=e.use_percentages,i=n.reduce(function(e,t){return e+t},0),r=n.map(function(e){return Math.round(e/i*100*100)/100}),a=[],s=[],l=[],c=0,h=0;h<r.length;h++){var u=null,u=e.colors?e.colors[h]:1+h%6;cN("-shape-circle","vis_bg_color_"+u,e.class),a.push(h$1(PieSegment,{angle:r[h],offset:c,color:u})),o?s.push(t[h]+" ("+n[h]+" : "+r[h]+"%)"):s.push(t[h]+" ("+n[h]+")"),l.push(u),c+=r[h]}return h$1("div",{class:"chart"},h$1("div",{class:"-pie"},h$1("svg",{class:"-svg",viewBox:"0 0 42 42",width:"100%",height:"100%"},a)),h$1(Legend,{names:s,colors:l}))},e}(Component);RECENT_CACHE_LENGTH=50,RECENT_CACHE_RENDER=10,VOTE_YES=1,VOTE_NO=0,VOTE_FLAG=-1,BETWEEN_VOTE_TIME=500,CALM_DOWN_MSG_TIME=4e3;var ContentEventSlaughter=function(t){function e(e){t.call(this,e),this.state={current:null,"votes-left":null,recent:[],votes:null,ideas:null},this.submitYesVote=this.submitYesVote.bind(this),this.submitNoVote=this.submitNoVote.bind(this),this.submitFlagVote=this.submitFlagVote.bind(this),this.openLink=this.openLink.bind(this),this.hasWaited=this.hasWaited.bind(this),this.removeCalmDown=this.removeCalmDown.bind(this),this._renderMyIdea=this._renderMyIdea.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var n=this;this.hotKeyVote=this.hotKeyVote.bind(this);var e=$ThemeIdeaVote.GetMy(this.props.node.id).then(function(e){var t;e.votes?(t=n.state.recent.length,t=Math.max(0,t-RECENT_CACHE_LENGTH),n.setState({votes:e.votes,recent:Object.keys(e.votes).slice(t).reverse()})):n.setState({votes:[]}),200===e.status&&(n.setState({loggedIn:!0}),window.addEventListener("keyup",n.hotKeyVote))}).catch(function(e){n.setState({error:e})}),t=$ThemeIdeaVote.Get(this.props.node.id).then(function(e){e.ideas?n.setState({ideas:e.ideas}):n.setState({ideas:[]})}).catch(function(e){n.setState({error:e})});Promise.all([e,t]).then(function(e){console.log("Loaded my Ideas and Themes",e),n.pickRandomIdea()}).catch(function(e){console.log("Boo hoo",e)})},e.prototype.componentWillUnmount=function(){window.removeEventListener("keyup",this.hotKeyVote)},e.prototype.hotKeyVote=function(e){89==e.keyCode?this._submitVote("Yes"):78==e.keyCode&&this._submitVote("No")},e.prototype.pickRandomIdea=function(){var t,e,n;this.state.votes&&this.state.ideas?(t=Object.keys(this.state.votes),0===(e=Object.keys(this.state.ideas).filter(function(e){return-1===t.indexOf(e)})).length&&this.setState({done:!0,"votes-left":e.length}),n=parseInt(Math.random()*e.length),this.setState({current:e[n],"votes-left":e.length})):this.setState({error:"Not loaded"})},e.prototype.redoVote=function(e){this.setState({current:e,done:!1})},e.prototype.addToRecentQueue=function(t){var e=this.state.recent;for(0==e.filter(function(e){return e===t}).length&&e.push(t);this.state.recent.length>RECENT_CACHE_LENGTH;){var n=this.state.recent.shift();console.log("trimmed",n)}this.setState({recent:e})},e.prototype.renderIcon=function(e){return e===VOTE_YES?h$1(SVGIcon,null,"checkmark"):e===VOTE_NO?h$1(SVGIcon,null,"cross"):e===VOTE_FLAG?h$1(SVGIcon,null,"flag"):h$1(SVGIcon,null,"fire")},e.prototype.renderRecentQueue=function(){for(var o=this,i=this.state.flashRecent,e=this.state.recent.length,t=Math.max(0,e-RECENT_CACHE_RENDER),r=[],n=e-1;t<=n;--n)!function(e){var t=o.state.votes[o.state.recent[e]],n=o.state.recent[e],e=null;t===VOTE_YES?e="-yes":t===VOTE_NO?e="-no":t===VOTE_FLAG&&(e="-flag"),r.push(h$1(UIButton,{title:t,class:cN("-recent",e,i===n?"-flash":null),key:n,onclick:function(){return o.redoVote(n)}},o.renderIcon(t),h$1("span",{title:"Id: "+n},o.state.ideas[n])))}(n);return r},e.prototype._submitVote=function(e){var t=this,n=this.state.loggedIn;if(!this.state.waitASecond)return this.setState({waitASecond:!0,flashButton:e,flashRecent:this.state.current,eagerVoter:null}),setTimeout(this.hasWaited,BETWEEN_VOTE_TIME),$ThemeIdeaVote[e](this.state.current).then(function(e){200===e.status?(t.state.votes[t.state.current]=e.value,t.addToRecentQueue(t.state.current),t.pickRandomIdea(),n||(t.setState({loggedIn:!1}),window.addEventListener("keyup",t.hotKeyVote))):(location.href="#expired",n&&(window.removeEventListener("keyup",t.hotKeyVote),t.setState({loggedIn:!1})))}).catch(function(e){t.setState({error:e})});this.setState({eagerVoter:"Take it easy, don't rush things!"})},e.prototype.hasWaited=function(){this.setState({waitASecond:!1,flashButton:null,flashRecent:null}),this.state.eagerVoter&&setTimeout(this.removeCalmDown,CALM_DOWN_MSG_TIME)},e.prototype.removeCalmDown=function(){this.setState({eagerVoter:null})},e.prototype.submitYesVote=function(e){return this._submitVote("Yes")},e.prototype.submitNoVote=function(e){return this._submitVote("No")},e.prototype.submitFlagVote=function(e){return this._submitVote("Flag")},e.prototype.openLink=function(e){var t="https://www.google.com/search?q="+encodeURIComponent(this.state.ideas[this.state.current]);window.open(t,"_blank").focus()},e.prototype._renderMyIdea=function(e){e=escape(this.state.ideas[e]);return h$1("div",{class:"-item"},h$1("div",{class:"-text",title:e},e))},e.prototype.renderMyIdeas=function(){return Object.keys(this.state.ideas).map(this._renderMyIdea)},e.prototype.renderBody=function(e){var t=Object.keys(e.votes).length,n=[0,0,0,e["votes-left"]];0!=t&&Object.values(e.votes).forEach(function(e){e==VOTE_NO?n[0]+=1:e==VOTE_YES?n[1]+=1:e==VOTE_FLAG&&(n[2]+=1)});var o=h$1("div",{class:"stats-details"},h$1("div",{class:"section -forty recent-votes"},h$1("h3",null,"Recent Themes"),this.renderRecentQueue(),h$1("div",{class:"-info"},"You can click on a previous vote to change it.")),h$1("div",{class:"section -sixty vote-graph"},h$1("h3",null,"Vote distribution"),h$1(PieChart,{values:n,labels:["Slaughtered","Kept","Flagged","Remaining"],colors:["no","yes","flag","remaining"]})));if(e.done)return h$1("div",{class:"event-slaughter"},h$1("div",{class:"-title"},"Wow! You're totally done! Amazing!"),h$1("div",{class:"-title"},"You slaughtered ",Object.keys(e.votes).length," themes!"),o);if(e.current){var i=e.ideas[e.current],t=e.eagerVoter?h$1("div",{class:"-error"},e.eagerVoter):null;return h$1("div",{class:"event-slaughter"},h$1("div",{class:"-title"},"Would this be a good Theme?"),h$1("div",{class:"-theme",onclick:this.openLink,title:"Click to search Google for this"},h$1("div",null,i)),t,h$1("div",{class:"-main-buttons"},h$1(UIButton,{class:cN("middle big -yes","Yes"==e.flashButton?"-flash":null),onclick:this.submitYesVote,title:"Good"},this.renderIcon(VOTE_YES),h$1("span",null,h$1("span",{class:"hotkey"},"Y"),"ES")),h$1(UIButton,{class:cN("middle big -no","No"==e.flashButton?"-flash":null),onclick:this.submitNoVote,title:"Bad"},this.renderIcon(VOTE_NO),h$1("span",null,h$1("span",{class:"hotkey"},"N"),"O"))),h$1("div",{class:"-other-buttons"},h$1("div",{class:"-title"},h$1("span",null,"If inappropriate or offensive, you can "),h$1(UIButton,{class:"-flag",onclick:this.submitFlagVote},this.renderIcon(VOTE_FLAG),h$1("span",null,"Flag")),h$1("span",null," it.")),h$1("div",{class:"-info"},h$1(SVGIcon,null,"info"),h$1("span",null," You can use ",h$1("strong",null,"Y")," and ",h$1("strong",null,"N")," as hotkeys.")),h$1("div",null,h$1("strong",null,"Themes Slaughtered:")," ",h$1("span",null,Object.keys(e.votes).length))),o)}},e.prototype.render=function(e,t){var n=e.node,o=e.user,i=t.loggedIn,e=h$1("h3",null,"Theme Slaughter Round");return n.slug&&t.votes&&t.ideas?i&&o&&o.id?h$1("div",{class:"-body"},e,this.renderBody(t)):h$1("div",{class:"-body"},e,h$1("div",null,null==i?"Checking logged in status...":"Please log in (hotkeys may not activate immediately)")):h$1("div",{class:"content-base content-post"},t.error||h$1(NavSpinner,null))},e}(Component),ContentEventFusion=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){},e.prototype.render=function(e){var t=e.user,e=h$1("h3",null,"Theme Fusion Round");return t&&t.id?h$1("div",{class:"-body"},e,h$1("div",null,"welcome")):h$1("div",{class:"-body"},e,h$1("div",null,"Please log in"))},e}(Component),$ThemeList={Get:Get$4};function Get$4(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/list/get/"+e,!0)}var $ThemeListVote={GetMy:GetMy$3,Yes:Yes,Maybe:Maybe,No:No};function GetMy$3(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/list/vote/getmy/"+e,!0)}function Yes(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/list/vote/yes/"+e,!0)}function Maybe(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/list/vote/maybe/"+e,!0)}function No(e){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/list/vote/no/"+e,!0)}var $ThemeHistory={Get:Get$3};function Get$3(){return Fetch$2.Get(API_ENDPOINT+"/vx/theme/history/get",!0)}var ContentEventList=function(t){function e(e){t.call(this,e),this.state={lists:null,names:null,votes:null,page:1,history:null},this.renderList=this.renderList.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var o=this,e=this.props.node.id;$ThemeList.Get(e).then(function(e){var t;e.lists?(t={lists:e.lists,names:e.names},0<e.allowed.length&&(t.page=e.allowed[e.allowed.length-1]),o.setState(t)):o.setState({lists:null})}).catch(function(e){o.setState({error:e})}),$ThemeHistory.Get().then(function(e){if(e.history){var t,n={};for(t in e.history)n[Sanitize.makeSlug(e.history[t].theme)]=e.history[t];o.setState({history:n})}else o.setState({error:"no history"})}).catch(function(e){o.setState({error:e})}),$ThemeListVote.GetMy(e).then(function(e){e.votes?o.setState({votes:e.votes}):o.setState({votes:null})}).catch(function(e){o.setState({error:e})})},e.prototype.addToVotes=function(e,t){var n=Object.assign({},this.state.votes);n[e]=t,this.setState({votes:n})},e.prototype._submitVote=function(e,t,n){var o=this;return $ThemeListVote[e](t).then(function(e){200===e.status?o.addToVotes(e.id,e.value):location.href="#expired"}).catch(function(e){o.setState({error:e})})},e.prototype.onYes=function(e,t){return this._submitVote("Yes",e,t)},e.prototype.onMaybe=function(e,t){return this._submitVote("Maybe",e,t)},e.prototype.onNo=function(e,t){return this._submitVote("No",e,t)},e.prototype.voteToClass=function(e){return 1===e?" -yes":0===e?" -maybe":-1===e?" -no":""},e.prototype.renderList=function(e){var o=this;if(this.state.lists[e]){var t=Number.parseInt(this.props.node.meta["theme-page-mode-"+e]);if(this.state.votes&&1===t)return h$1("div",{class:"theme-list"},this.state.lists[e].map(function(e){var t,n=null;return o.state.history&&(t=Sanitize.makeSlug(e.theme),o.state.history[t]&&(n=h$1("span",{class:"-label",title:o.state.history[t].name},o.state.history[t].shorthand))),h$1("div",{class:"theme-item"+o.voteToClass(o.state.votes[e.id])},h$1(ButtonBase,{class:"-button -no",onClick:o.onNo.bind(o,e.id)},"-1"),h$1(ButtonBase,{class:"-button -maybe",onClick:o.onMaybe.bind(o,e.id)},"0"),h$1(ButtonBase,{class:"-button -yes",onClick:o.onYes.bind(o,e.id)},"+1"),h$1("span",{class:"-text"},e.theme),n)}),h$1("div",{class:"-tip"},h$1("strong",null,"NOTE:")," Votes are sent automatically. When the color changes, they have been accepted."));return 2===t?h$1("div",{class:"theme-list"},h$1("div",null,"This round has ended."),h$1("br",null),this.state.lists[e].map(function(e){var t,n=null;return o.state.history&&(t=Sanitize.makeSlug(e.theme),o.state.history[t]&&(n=h$1("span",{class:"-label",title:o.state.history[t].name},o.state.history[t].shorthand))),h$1("div",{class:"theme-item"+(o.state.votes?o.voteToClass(o.state.votes[e.id]):"")},h$1("span",{class:"-text"},e.theme),n)})):[this.state.lists[e].map(function(e){return h$1("div",null,e.theme)})]}return this.state.names[e]?["This round hasn't started yet. Stay tuned!"]:null},e.prototype.render=function(e,t){var n=e.user;e.path;var o=e.extra,i=t.lists,r=t.names,a=t.votes,e=t.page,t=t.error;if(o&&o.length&&o[0]&&(e=Number.parseInt(o[0])),r){o="Theme Voting "+r[e],r=null,r=n&&n.id&&i&&a?e?this.renderList(e):null:i&&!i[e]?["This round hasn't started yet. Stay tuned!"]:i?[h$1("div",{class:"-info"},h$1("h3",null,"Please log in to vote")),e?this.renderList(e):null]:t?h$1("div",null,t):h$1(NavSpinner,null);return h$1("div",{class:"-body"},h$1("h2",null,h$1(SVGIcon,{small:!0,baseline:!0,gap:!0},"ticket"),o),null,r)}return null},e}(Component),ContentLoading=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e=e.error;return h$1("div",{class:"content-base"},e||h$1(NavSpinner,null))},e}(Component),ContentCommonFooterButtonMinMax=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",{class:"content-common-footer-button -minmax",onclick:e.onclick||function(){}},h$1(SVGIcon,{class:"-inline-if-not-minimized"},"arrow-up"),h$1(SVGIcon,{class:"-inline-if-minimized"},"arrow-down"))},e}(Component),$NodeStar={Add:Add$3,Remove:Remove$3};function Add$3(e){return Fetch$2.Get(API_ENDPOINT+"/vx/node/star/add/"+e,!0).then(function(e){return e&&e.caller_id,e})}function Remove$3(e){return Fetch$2.Get(API_ENDPOINT+"/vx/node/star/remove/"+e,!0).then(function(e){return e&&e.caller_id,e})}var ContentCommonFooterButtonStar=function(t){function e(e){t.call(this,e),this.state={starred:null},this.onStar=this.onStar.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){},e.prototype.onStar=function(e){},e.prototype.render=function(e,t){return e.node,h$1("div",{class:"content-common-footer-button -star"+(t.starred?" starred":""),onclick:this.onStar},h$1(SVGIcon,null,"star-full"))},e}(Component),Memory={Store:Store,Fetch:Fetch,Push:Push,Pop:Pop},MEMORY=[],MEMORY_TTL=[];function _StoreVal(e,t){return MEMORY[e]=t}function _RemoveVal(e){delete MEMORY[e]}function _PushVal(e,t){return Array.isArray(MEMORY[e])?MEMORY[e].push(t):null}function _PopVal(e,t){if(Array.isArray(MEMORY[e])){t=MEMORY[e].indexOf(t);if(-1!==t)return MEMORY[e].splice(t,1)}return null}function _FetchVal(e){return MEMORY[e]}function _StoreTTL(e,t){return MEMORY_TTL[e]=t}function _RemoveTTL(e){delete MEMORY_TTL[e]}function _FetchTTL(e){return MEMORY_TTL[e]}function Store(e,t,n){return(n=void 0===n?null:n)?_StoreTTL(e,Date.now()+n):_RemoveTTL(e),_StoreVal(e,t)}function Fetch(e,t){void 0===t&&(t=null);var n=_FetchTTL(e);if(n&&Date.now()>n)return _RemoveTTL(e),_RemoveVal(e),null;n=_FetchVal(e);return n?(t&&_StoreTTL(e,Date.now()+t),n):null}function Push(e,t,n){return _PushVal(e,t)}function Pop(e,t,n){return _PopVal(e,t)}var $NodeLove={Get:Get$2,GetMy:GetMy$2,Add:Add$2,Remove:Remove$2},STORAGE=Memory;function Get$2(e){return Fetch$2.Get(API_ENDPOINT+"/vx/node/love/get/"+e,!0)}function _GetMy(){return Fetch$2.Get(API_ENDPOINT+"/vx/node/love/getmy",!0)}function GetMy$2(r){return new Promise(function(t,n){var o="NODE|LOVE|MINE",i=STORAGE.Fetch(o);i?t(r?-1!==i.indexOf(r):i):_GetMy().then(function(e){i=e["my-love"],STORAGE.Store(o,i),t(r?-1!==i.indexOf(r):i)}).catch(function(e){n(e)})})}function Add$2(e){return STORAGE.Push("NODE|LOVE|MINE",e),Fetch$2.Get(API_ENDPOINT+"/vx/node/love/add/"+e,!0)}function Remove$2(e){return STORAGE.Pop("NODE|LOVE|MINE",e),Fetch$2.Get(API_ENDPOINT+"/vx/node/love/remove/"+e,!0)}var ContentCommonFooterButtonLove=function(t){function e(e){t.call(this,e),this.state={loved:null,lovecount:null},this.onLove=this.onLove.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this;this.props.user&&this.props.user.id&&$NodeLove.GetMy(this.props.node.id).then(function(e){t.setState({loved:e})})},e.prototype.onLove=function(e){var t=this;this.state.loved?$NodeLove.Remove(this.props.node.id).then(function(e){t.setState({loved:!1,lovecount:e.love.count})}):$NodeLove.Add(this.props.node.id).then(function(e){t.setState({loved:!0,lovecount:e.love.count})})},e.prototype.render=function(e,t){var n=e.node,e=t.loved,t=t.lovecount,t=Number.isInteger(t)?t:n.love,n="";return 10<=t?n="-count-10":4<=t?n="-count-4":1<=t&&(n="-count-1"),h$1("div",{class:cN("content-common-footer-button -love",e?" loved":"",n),onclick:this.onLove},h$1(SVGIcon,{class:"-hover-hide"},"heart"),h$1(SVGIcon,{class:"-hover-show -loved-hide"},"heart-plus"),h$1(SVGIcon,{class:"-hover-show -loved-show"},"heart-minus"),h$1("div",{class:"-count"},t))},e}(Component),ContentCommonFooterButtonComments=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.node,e="";return 10<=t.comments?e="-count-10":4<=t.comments?e="-count-4":1<=t.comments&&(e="-count-1"),t&&Number.isInteger(t.comments)?h$1(NavLink,{href:t.path,class:cN("content-common-footer-button -comments",e),title:"Comments"},h$1(SVGIcon,null,"bubbles"),h$1("div",{class:"-count"},t.comments)):null},e}(Component),ContentCommonFooterButtonEdit=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1(NavLink,{href:e.node.path+"/edit",class:"content-common-footer-button -edit"},h$1(SVGIcon,null,"edit"))},e}(Component),ContentCommon=function(t){function e(e){t.call(this,e),this.state={minimized:!1},this.onMinMax=this.onMinMax.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onMinMax=function(e){this.setState({minimized:!this.state.minimized})},e.prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path;e.extra;var r=t.minimized;if(t.error,e.minimized&&(r=!r),n&&n.slug){var a=["content-base","content-common"];"string"==typeof e.class&&(a=a.concat(e.class.split(" "))),e.editing&&a.push("edit"),r&&a.push("minimized");var s=null;return e.nofooter||(t=[],e.minmax&&t.push(h$1(ContentCommonFooterButtonMinMax,{user:o,node:n,onclick:this.onMinMax})),r=[],e.love&&r.push(h$1(ContentCommonFooterButtonLove,{node:n,user:o,path:i})),e.comments&&r.push(h$1(ContentCommonFooterButtonComments,{node:n,user:o,path:i})),e.star&&r.push(h$1(ContentCommonFooterButtonStar,{node:n,user:o,path:i})),e.edit&&r.push(h$1(ContentCommonFooterButtonEdit,{node:n,user:o,path:i})),s=h$1("div",{class:cN("content-common-footer",t.length+r.length?"-has-items":"")},h$1("div",{class:"-left"},t),h$1("div",{class:"-right"},r))),h$1("div",{class:a},e.children,s)}return h$1(ContentLoading,null)},e}(Component),ContentCommonBody=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props.children,e.children)},e.prototype.render=function(e){return h$1("div",{class:"content-common-body"+(e.class?" "+e.class:"")},e.children)},e}(Component),ContentCommonNav=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",{class:cN("content-common-body content-common-nav",e.class)},e.children)},e}(Component),ContentCommonNavButton=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=["content-common-nav-button"];return e.class&&(t=t.concat(e.class.split(" "))),e.href?h$1(ButtonLink,{disabled:e.disabled,class:t,href:e.href,onclick:e.onclick},e.children):h$1(ButtonBase,{disabled:e.disabled,class:t,onclick:e.onclick},e.children)},e}(Component),InputText=function(t){function e(e){t.call(this,e),this.onModify=this.onModify.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props,e)},e.prototype.onModify=function(e){this.props.onmodify&&this.props.onmodify(e)},e.prototype.render=function(e){var t=this,n=e.maxlength,o=null;return n&&(o=h$1("div",{class:"-right"},h$1("span",{class:"-chars"},e.value.length),"/",h$1("span",{class:"-limit"},n))),h$1("div",{class:cN("input-text",e.class)},h$1("input",{value:e.value,placeholder:e.placeholder,maxlength:e.maxlength,type:"text",oninput:this.onModify,ref:function(e){t.textinput=e}}),h$1("div",{class:"-footer"},o,h$1("div",{class:"-left if-sidebar-block"})))},e}(Component),CopyToClipboardButton=function(t){function e(e){t.call(this,e),this.onClick=this.onClick.bind(this),this.state={data:e.data,state:"IDEL"}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){var t=this;e.target.getElementsByTagName("div")[0],this.copy(this.state.data).then(function(){console.log("Copied "+t.state.data+" to clipboard"),"IDEL"===t.state.state&&(t.setState({state:"SUCCESS"}),window.setTimeout(function(){"SUCCESS"===t.state.state&&t.setState({state:"IDEL"})},2e3))}).catch(function(e){console.log("Error copying shortlink to clipboard",e),t.setState({state:"ERROR"})})},e.prototype.copy=function(o){return new Promise(function(e,t){var n=!1;listener=function(e){e.clipboardData.setData("text/plain",o),e.preventDefault(),n=!0},document.addEventListener("copy",listener),document.execCommand("copy"),document.removeEventListener("copy",listener),(n?e:t)()})},e.prototype.render=function(e,t){var n,o,i,r=Object.assign({},e).children;switch(t.state){case"SUCCESS":n="checkmark",o="-success",i="Copied to clipboard succesfully!";break;case"ERROR":n="cross",o="-error",i="Failed to copy to clipboard";break;default:n=void 0===this.props.icon?"link":e.icon,i=void 0===this.props.tooltip?"Copy to clipboard":e.tooltip}return h$1("div",{title:i,class:cN("-c2cbutton",e.class),onclick:this.onClick},h$1(SVGIcon,{class:void 0===o?null:o,baseline:!0},n),r)},e}(ButtonBase),ContentCommonBodyTitle=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e.class="string"==typeof e.class?e.class.split(" "):[],e.class.push("content-common-body"),e.class.push("-title"),e.subtitle&&e.class.push("-has-subtitle");var t=null;e.titleIcon&&(t=h$1(SVGIcon,{baseline:!0,small:!0,class:"-prefix"},e.titleIcon));var n=e.limit||64,o=e.placeholder||"Title";if(e.editing)return e.class.push("-editing"),h$1("div",{class:e.class},h$1("div",{class:"-label"},"Title"),h$1(InputText,{value:e.title,onmodify:e.onmodify,placeholder:o,maxlength:n}));e.class.push("_font2");n=e.title.trim().length?e.title.trim():o,o=[];return e.href?(o.push(h$1(NavLink,{class:"-text",href:e.href,title:e.hover},t,n)),e.shortlink&&!e.minmax&&e.id&&o.push(h$1(CopyToClipboardButton,{tooltip:"Copy shortlink to clipboard",icon:"link",class:"-shortener",data:window.location.protocol+"//"+SHORTENER_DOMAIN+"/$"+e.id}))):o.push(h$1("div",{class:"-text",title:e.hover},t,n)),e.subtitle&&o.push(h$1("span",{class:"-subtext"}," (",e.subtitle,")")),h$1("div",{class:e.class},o)},e}(Component),ContentError=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",{class:"content-base content-error"},h$1("div",{class:"-title"},e.code||"404"),h$1("div",null,e.children))},e}(Component),ContentCommonBodyBy=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props.children,e.children)},e.prototype.getName=function(e){return e.meta["real-name"]||e.name},e.prototype.getAtName=function(e){return e.slug},e.prototype.getURL=function(e){return"/users/"+e.slug},e.prototype.getWhen=function(e,t){if(e.published){var n=new Date(e.published);e.meta["origin-date"]&&(n=new Date(e.meta["origin-date"]));e=(new Date).getTime()-n.getTime();return h$1("span",null,t," ",h$1("span",{title:getLocaleDate(n)},getRoughAge(e)))}return h$1("span",null,"not ",t," yet")},e.prototype.getModified=function(e,t){var n=new Date(e.modified),e=(new Date).getTime()-n.getTime();return h$1("span",null,t," ",h$1("span",{title:getLocaleDate(n)},getRoughAge(e)))},e.prototype.render=function(e){var t=[];if(!e.noby)if(e.by&&"string"==typeof e.by&&t.push(h$1("span",null,e.by," ")),t.push(h$1("span",null,"by ")),e.authors)for(var n=0;n<e.authors.length;n++)t.push(h$1("span",{class:"-name"},this.getName(e.authors[n]))),t.push(" "),t.push(h$1("span",null,"(",h$1(NavLink,{class:"-at-name",href:this.getURL(e.authors[n])},"@",this.getAtName(e.authors[n])),") ",1<e.authors.length&&e.authors[n].id==e.node.author?h$1("span",{title:"Team Leader"},"*"):"")),n<e.authors.length-2?t.push(h$1("span",null,", ")):n<e.authors.length-1&&t.push(h$1("span",null,", and "));else e.author&&(t.push(h$1("span",{class:"-name"},this.getName(e.author))),t.push(" "),t.push(h$1("span",null,"(",h$1(NavLink,{class:"-at-name",href:this.getURL(e.author)},"@",this.getAtName(e.author)),")")));return e.when&&e.node?t.push(h$1("span",{class:"-when"},t.length?", ":"",this.getWhen(e.node,e.label))):e.modified&&e.node&&t.push(h$1("span",{class:"-when"},t.length?", ":"",this.getModified(e.node,e.label))),h$1("div",{class:cN("content-common-body","-by",e.class)},t,e.children)},e}(Component),ContentCommonFlag=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props.children,e.children)},e.prototype.render=function(e){var t=null;return e.icon&&(t=h$1(SVGIcon,null,e.icon)),h$1("div",{class:cN("content-common-flag",e.class)},t,e.children)},e}(Component),$Asset={Upload:Upload};function Upload(e,t){var n=new FormData;return n.append("asset",t),fetch(API_ENDPOINT+"/vx/asset/upload/"+e,{method:"POST",credentials:"include",mode:"cors",headers:{Accept:"application/json"},body:n}).then(function(e){if(e){var t=e.headers.get("content-type");if(t&&-1!=t.indexOf("application/json"))return e.json();if(!1===_json_only)return e.text()}return null})}var ContentCommonBodyAvatar=function(t){function e(e){t.call(this,e),this.onEdit=this.onEdit.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onEdit=function(e){var n=this,t=this.props,o=t.node,t=t.user;if(!t||!t.id)return null;if(e.target.files&&e.target.files.length){e=e.target.files[0];return $Asset.Upload(t.id,e).then(function(e){if(e.path){var t="///content/"+e.path;return n.props.onchange&&n.props.onchange(t),$Node.AddMeta(o.id,{avatar:t})}alert(e.message)}).catch(function(e){n.setState({error:e})})}},e.prototype.render=function(e){var t=e.node&&"user"===e.node.type&&e.href===e.node.path,n=t&&e.editing||!t&&!e.editing,o=cN("content-common-body -avatar",e.class,t&&e.editing?"-editing":"",n?"-interactive":""),i="///content/internal/user64.png",r=e.src||i,a=e.node&&e.node.name||"User";return r+=".64x64.fit.png",n?t&&e.editing?h$1("label",null,h$1("input",{type:"file",name:"asset",style:"display: none;",onchange:this.onEdit}),h$1("div",{class:o},h$1(IMG,{src:r,failsrc:i}),h$1(SVGIcon,null,"edit"))):h$1(ButtonLink,{class:o,href:e.href},h$1(IMG,{alt:a+"'s avatar image",src:r,failsrc:i})):h$1("span",{class:o},h$1(IMG,{alt:a+"'s avatar image",src:r,failsrc:i}))},e}(Component),InputTextarea=function(t){function e(e){t.call(this,e),this.state={cursorPos:(e.value||"").length,prevHeight:-1},this.onInput=this.onInput.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onFileChange=this.onFileChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onFocus=this.onFocus.bind(this),this.onClick=this.onClick.bind(this),this.replaceTextEvent=-1}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return Shallow.Diff(this.props,e)},e.prototype.componentWillReceiveProps=function(e){var t,n=e.replaceText,o=e.cursorPos,i=e.replaceTextEvent,r=e.maxlength,a=this.replaceTextEvent;(this.props.value=n)&&this.textarea&&i!=a&&(e=(t=this.props).oncaret,a=t.onmodify,t=!1,r&&n.length>r&&(n=this.textarea.value,t=!0),this.textarea.value=n,this.textarea.focus(),this.replaceTextEvent=i,t&&a&&a({target:{value:n,selectionStart:o,selectionEnd:o}}),this.textarea.selectionStart=o,this.textarea.selectionEnd=o,e&&e({target:{value:n,selectionStart:o,selectionEnd:o},key:"ImaginaryKey"}))},e.prototype.resizeTextarea=function(){var e,t,n;this.textarea&&(e=window.pageXOffset,t=window.pageYOffset,this.textarea.style.height=0,this.textarea.style.height=this.textarea.scrollHeight+"px",n=0<this.state.prevHeight?this.textarea.scrollHeight-this.state.prevHeight:0,window.scrollTo(e,t+n),this.state.prevHeight=this.textarea.scrollHeight)},e.prototype.componentDidMount=function(){this.resizeTextarea()},e.prototype.componentDidUpdate=function(){this.resizeTextarea()},e.prototype.insertAtCursor=function(e){var t,n,o=this.textarea;o.selectionStart||"0"==o.selectionStart?(t=o.selectionStart,n=o.selectionEnd,o.value=o.value.substring(0,t)+e+o.value.substring(n,o.value.length)):this.props.value+=e},e.prototype.onFileChange=function(e){var t=this;if(!this.props.user)return null;if(e.target.files&&e.target.files.length){e=e.target.files[0];return $Asset.Upload(this.props.user.id,e).then(function(e){e.path?(t.insertAtCursor("!["+e.name+"](///raw/"+e.path+")"),t.textarea.dispatchEvent(new Event("input"))):(console.error("Unable to upload image."),window.location.hash="#error-upload/"+encodeURI(e.message))}).catch(function(e){console.error("Unable to upload image."),window.location.hash="#error-upload"})}},e.prototype.onInput=function(e){this.props.onmodify&&this.props.onmodify(e)},e.prototype.onKeyDown=function(e){var t=this.props,n=t.onkeydown;t.oncaret,n&&!n(e)&&e.preventDefault()},e.prototype.onKeyUp=function(e){var t=this.props,n=t.onkeyup,o=t.oncaret;if(n&&!n(e))e.preventDefault();else if(o)switch(e.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"Home":case"End":case"PageUp":case"PageDown":o(e)||e.preventDefault()}},e.prototype.onBlur=function(e){var t=this.props.onblur;t&&!t(e)&&e.preventDefault()},e.prototype.onFocus=function(e){var t=this.props,n=t.onfocus,t=t.oncaret;n&&!n(e)&&e.preventDefault(),t&&!t(e)&&e.preventDefault()},e.prototype.onClick=function(e){var t=this.props.oncaret;t&&!t(e)&&e.preventDefault()},e.prototype.render=function(e){var t=this,n=null;return e.maxlength&&(n=h$1("div",{class:"-right"},h$1("span",{class:"-chars"},e.value.length),"/",h$1("span",{class:"-limit"},e.maxlength))),h$1("div",{class:"input-textarea"},h$1("div",{class:"-textarea"},h$1("textarea",Object.assign({},e,{oninput:this.onInput,onkeydown:this.onKeyDown,onkeyup:this.onKeyUp,onclick:this.onClick,ref:function(e){t.textarea=e}}))),h$1("div",{class:"-footer"},n,h$1("div",{class:"-left"},h$1("label",null,h$1("input",{type:"file",name:"asset",style:"display: none;",onchange:this.onFileChange}),h$1(NavLink,{class:"-upload"},h$1(SVGIcon,{baseline:!0,gap:!0},"upload"),"Upload Image")),h$1("span",{class:"if-sidebar-inline"},". Supports ",h$1(NavLink,{blank:!0,href:"/markdown"},h$1(SVGIcon,null,"markdown")," Markdown")," and ",h$1("strong",null,":emoji_codes:")))))},e}(Component),ContentCommonBodyMarkup=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props,e)},e.prototype.render=function(e){var t=this,n=["content-common-body","-markup"];"string"==typeof e.class&&(n=n.concat(e.class.split(" ")));var o=e.label||"Description",i=e.placeholder||"Description",r=e.children.join("");if(e.editing){var a=e.limit||8192;return h$1("div",{class:n},h$1("div",{class:"-label"},o),h$1(InputTextarea,{user:e.user,value:r,onmodify:e.onmodify,onkeydown:e.onkeydown,onkeyup:e.onkeyup,onblur:e.onblur,onfocus:e.onfocus,oncaret:e.oncaret,placeholder:i,ref:function(e){t.textarea=e},maxlength:a,replaceText:e.replaceText,replaceTextEvent:e.replaceTextEvent,cursorPos:e.cursorPos}))}n.push("markup"),r.trim().length||(r=i);e={highlight:function(e,t){var n=Prism.languages.clike;return Prism.languages[t]&&(n=Prism.languages[t]),Prism.highlight(e,n)},sanitize:!0,smartypants:!0,langPrefix:"language-"},i=new marked;return markdown=i.parse(r,e),h$1("div",{class:n},markdown)},e}(Component),ContentCommonDraft=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",{class:"content-common-draft"+(e.class?" "+e.class:"")},"Unpublished ",e.draft||"Draft")},e}(Component),ContentCommonEdit=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=null,n=null,o=null,i=null,n=e.editing?(t=h$1(ButtonBase,{class:"-selected"},h$1(SVGIcon,null,"edit"),h$1("div",{class:"if-sidebar-block"},"Edit")),h$1(ButtonBase,{onclick:e.onpreview},h$1(SVGIcon,null,"preview"),h$1("div",{class:"if-sidebar-block"},"Preview"))):(t=h$1(ButtonBase,{onclick:e.onedit},h$1(SVGIcon,null,"edit"),h$1("div",{class:"if-sidebar-block"},"Edit")),h$1(ButtonBase,{class:"-selected"},h$1(SVGIcon,null,"preview"),h$1("div",{class:"if-sidebar-block"},"Preview"))),o=e.modified?h$1(ButtonBase,{class:"-available -save",onclick:e.onsave},h$1(SVGIcon,null,"save"),h$1("div",{class:"if-sidebar-block"},"Save")):h$1(ButtonBase,null,h$1(SVGIcon,null,"save"),h$1("div",{class:"if-sidebar-block"},"Saved"));return e.nopublish||(i=e.published?h$1(ButtonBase,{class:"-available -publish",onclick:e.ondone},h$1(SVGIcon,null,"checkmark"),h$1("div",{class:"if-sidebar-block"},"Done")):h$1(ButtonBase,{class:"-available -publish",onclick:e.onpublish},h$1(SVGIcon,null,"publish"),h$1("div",{class:"if-sidebar-block"},"Publish"))),h$1("div",{class:"content-common-body -edit"},h$1("div",{class:"-right"},o,i),h$1("div",{class:"-left"},n,t))},e}(Component),ItemTeambuilding=function(t){function e(e){t.call(this,e),this.state={friends:[],processing:!1},this.removeFromTeam=this.removeFromTeam.bind(this),this.addToTeam=this.addToTeam.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.loadFriends()},e.prototype.removeFromTeam=function(t){var n=this,e=this.props;e.featured;var o=e.node,i=e.onChange;this.setState({processing:t}),$Node.RemoveLink(o.id,t,{author:null}).then(function(){n.setState({processing:!1,error:null}),i(t,-1)}).catch(function(e){n.setState({error:"Requesting removing user "+t+" caused "+e,processing:!1})})},e.prototype.addToTeam=function(e){var t=this,n=this.props;n.featured;var o=n.node,i=n.onChange;this.setState({processing:e}),$Node.AddLink(o.id,e,{author:null}).then(function(){t.setState({processing:!1}),i(e,1)}).catch(function(e){t.setState({error:e,processing:!1})})},e.prototype.loadFriends=function(){var n=this;$Node.GetMy().then(function(t){t.meta.star&&t.meta.star.length&&t.refs.star&&t.refs.star.length&&$Node.Get(t.meta.star.filter(function(e){return-1<t.refs.star.indexOf(e)})).then(function(e){n.setState({friends:e.node})}).catch(function(e){return n.setState({error:"Error fetching friends "+e})})}).catch(function(e){return n.setState({error:"Error getting friends-list "+e})})},e.prototype.renderUser=function(e,t,n){var o=this,i=e.id===t,r=e.id===n,t=i&&!r||!i&&n===t;return h$1("li",{class:"team-list-member"},h$1(UIIcon,{baseline:!0,small:!0,src:"user"}),h$1("strong",null,e.name),i&&" (you)",r&&h$1("span",{title:"Primary Author"},"*"),t&&h$1(UIButton,{class:"team-member-remove",onclick:function(){return o.removeFromTeam(e.id)},title:"Remove from team"},h$1(UIIcon,{src:"cross"})))},e.prototype.renderAddUser=function(e){var t=this,n=e.id;return h$1(UIButton,{onclick:function(){return t.addToTeam(n)},key:e.id,title:"Click to add "+e.name},h$1(UIIcon,null,"user"),h$1("span",null,e.name))},e.prototype.renderAdder=function(e){var t=this,n=this.state.friends;if(n){var o=e.map(function(e){return e.id}),n=[h$1("div",{class:"team-list-add-header"},"Add to team",h$1(UIIcon,{src:"arrow-down"}))].concat(n.filter(function(e){return-1===o.indexOf(e.id)}).sort(function(e,t){return e.name>t.name?1:-1}).map(function(e){return t.renderAddUser(e)}));return 1<n.length?h$1("div",{class:"team-list-add"},h$1(UIDropdown,null,n)):void 0}},e.prototype.render=function(e,t){var n=this,o=t.processing,i=t.error,r=e.node,a=e.user,s=e.authors,l=[];if("item"==r.type){t=!0,e=node_IsAuthor(r,a)&&!o;return"compo"==r.subsubtype&&(s.length<2?(l.push(h$1("div",{class:"-items"},"You are competing in the ",r.subsubtype,". You cannot add others to your ",r.subtype)),l.push(h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"})," You can change this if you select a different event")),t=!1):0<s.length&&(l.push(h$1("div",{class:"team-building-warning -items"},"You are competing in the ",r.subsubtype,", but your ",r.subsubtype," has multiple authors. Please change the event")),e=!1)),t&&(t=s.sort(function(e,t){return(e.id===r.author?-1:t.id===r.author&&1)||(e.name>t.name?1:-1)}).map(function(e){return n.renderUser(e,a.id,r.author)}),s=e&&this.renderAdder(s),l.push(h$1("ul",{class:"team-list -items"},t,s,o&&h$1(ContentLoading,null))),l.push(h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"To add members to a team, you first need to add them as friends. Visit each others user pages and click the ",h$1("span",{class:"_nowrap"},h$1(UIIcon,{baseline:!0,small:!0,src:"user-plus"})," ",h$1("strong",null,"Follow"))," button to become friends. When you are done, return here and you will be able to add them to your team.")))),h$1(ContentCommonBody,{class:"team-building"},h$1("div",{class:"-label"},"Author(s)"),h$1("div",{class:"-body"},l,i&&h$1("div",{class:"team-building-warning"},i)))}},e}(Component),Autocompletions=function(t){function e(e){t.call(this,e),this.onKeyDown=this.onKeyDown.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onKeyDown=function(e){if(!this.state.editMode)return!0;switch(e.key){case"Escape":return this.handleAbort(),!1;case"ArrowUp":return this.updateSelected(-1),!1;case"ArrowDown":return this.updateSelected(1),!1;case"Enter":case"Tab":return this.selectSelected(),!1}return!0},e.prototype.componentDidMount=function(){this.componentWillReceiveProps(this.props)},e.prototype.componentWillReceiveProps=function(e){var t,n=e.text,o=(o=e.cursorPos)||0;e.textareaFocus?n&&(t=this.getMatch(n,o))?(e=n!==this.state.text||this.state.editMode,this.setState({editMode:e,text:n,cursorPos:o,match:t.match,matchStart:t.matchStart,matchEnd:t.matchEnd,matchEndNewLine:t.matchEndNewLine})):this.setState({match:null,cursorPos:o,editMode:!1,text:n}):this.setState({match:null,cursorPos:o,editMode:!1,text:n=n||""})},e.prototype.getMatch=function(e,t){var n=this.state,o=n.startPattern,n=n.endPattern,o=e.slice(0,t).match(o);if(!o)return null;e=e.slice(t).match(n),n=e&&"\n"==e[2];return{match:o[2]+(e?e[0]:""),matchStart:t-o[2].length,matchEnd:t+(e?e[0].length:0),matchEndNewLine:n}},e.prototype.selectSelected=function(){var e=this.state,t=e.match,n=e.editMode;e.matchStart,e.matchEnd,n&&(n=this.state.selected,n=this.getOptions(n||t).sort(function(e,t){return t.score-e.score})[0].slug,this.executeSelect(n))},e.prototype.handleSelect=function(e,t){this.state.editMode&&this.executeSelect(e.slug)},e.prototype.executeSelect=function(e){var t=this.state,n=t.matchStart,o=t.matchEnd;t.match;var i=t.matchEndNewLine,r=this.props,t=r.onSelect,r=r.text;e=e+" "+(i?"\n":"");o=r.slice(0,n)+e+r.slice(o);this.setState({text:o,selected:null,editMode:!1}),t&&t(o,n+e.length-(i?1:0))},e.prototype.updateSelected=function(e){var t=this.getSelected(),n=t.selectedIndex,t=t.options,e=n+e;e<0?e=t.length-1:e%=t.length,e<t.length&&this.setState({selected:t[e].slug})},e.prototype.handleAbort=function(){this.setState({selected:null,editMode:!1})},e.prototype.getOptions=function(e){return[]},e.prototype.renderSuggestion=function(e,t){return null},e.prototype.getSelected=function(){var e=this.state,t=e.match,n=e.selected,o=(o=this.state.maxItems)||4,e=n?-1:0,t=this.getOptions(t).sort(function(e,t){return t.score-e.score}).slice(0,o);return!t||1==(o=t.map(function(e,t){return[e,t]}).filter(function(e){return e[0].slug==n})).length&&(e=o[0][1]),{selected:n,selectedIndex:e,options:t}},e.prototype.render=function(e,t){var n=this,o=t.editMode,i=t.match,r=t.name;t.maxItems;var a=t.selected;if(o&&i&&i!=a){var t=this.getSelected(),o=t.selected,a=t.options,s=t.selectedIndex;if(0<a.length&&(!o||s<0)&&(o=a[0].slug,s<0&&this.setState({selected:o})),o?1<a.length||1==a.length&&a[0].name!=i&&i!=o:0<a.length)return e.captureKeyDown(r,this.onKeyDown),h$1("div",{class:cN("-auto-complete",e.class)},a.map(function(e,t){return n.renderSuggestion(e,t==s?"-selected":"")}));e.captureKeyDown(r,null),this.setState({editMode:!1})}},e}(Component),AutocompleteEmojis=function(t){function e(e){t.call(this,e),this.state={name:"emojis",startPattern:/(\s| |^)(:[A-Za-z-_0-9]*)$/,endPattern:/^([A-Za-z-_0-9]*:?)( +|$|\n)/,maxItems:8,mrkd:new marked}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getOptions=function(e){var t,n=window.emoji.emojiList,o=[],i=new RegExp(e?e.trim().substr(1).replace(":","").replace("-","_"):"","i");for(t in n){var r,a,s=i.exec(t);0!=e.length&&!s||(r=s?t.indexOf(s[0])+1:0,a=s?r+s[0].length:0,s=0==r?.5:1,s=Math.pow(e.length/t.length,s),o.push({name:":"+t+":",slug:":"+t+":",score:s,matchStart:r,matchEnd:a}))}return o},e.prototype.renderSuggestion=function(e,t){var n=e.matchStart,o=e.matchEnd,i=e.name,r=null,a=null,s=null;o!=n?(r=i.substr(0,n),a=h$1("b",null,i.substr(n,o-n)),s=i.substr(o)):r=i;o=this.state.mrkd.parse(i,{});return h$1(UIButton,{key:i,class:cN(t),onclick:this.handleSelect.bind(this,e)},h$1("div",{class:"-emoji-autocomplete-markup"},o),r,a,s)},e}(Autocompletions),AutocompleteAtNames=function(t){function e(e){t.call(this,e),this.state={name:"at-names",startPattern:/(\s| |^)(@[A-Za-z-_0-9]*)$/,endPattern:/^([A-Za-z-_0-9]*)( +|$|\n)/,maxItems:8}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getOptions=function(e){var t=this.props.authors,n=[],o=new RegExp(e?e.trim().substr(1):"","i");if(t)for(var i in t){var r,a=t[i],s=o.exec(a.slug);0!=e.length&&!s||(r=s?a.slug.indexOf(s[0])+1:0,i=s?r+s[0].length:0,s=0==r?.5:1,s=Math.pow(e.length/a.name.length,s),n.push({name:"@"+a.name,slug:"@"+a.slug,score:s,matchStart:r,matchEnd:i}))}return n},e.prototype.renderSuggestion=function(e,t){var n=e.matchStart,o=e.matchEnd,i=e.name,r=null,a=null,s=null;return n!=o?(r=i.substr(0,n),a=h$1("b",null,i.substr(n,o-n)),s=i.substr(o)):r=i,h$1(UIButton,{key:i,class:cN(t),onclick:this.handleSelect.bind(this,e)},r,a,s)},e}(Autocompletions),ContentSimple=function(t){function e(e){t.call(this,e),this.state={author:{},authors:[],editing:this.isEditMode(),modified:!1,name:e.node.name,body:e.node.body,avatar:""},this.onEdit=this.onEdit.bind(this),this.onPreview=this.onPreview.bind(this),this.onSave=this.onSave.bind(this),this.onPublish=this.onPublish.bind(this),this.onDone=this.onDone.bind(this),this.onModifyTitle=this.onModifyTitle.bind(this),this.onModifyText=this.onModifyText.bind(this),this.onModifyAvatar=this.onModifyAvatar.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onTextAreaBlur=this.onTextAreaBlur.bind(this),this.onTextAreaFocus=this.onTextAreaFocus.bind(this),this.onTextAreaCaret=this.onTextAreaCaret.bind(this),this.onAutocompleteSelect=this.onAutocompleteSelect.bind(this),this.onAutoselectCaptureKeyDown=this.onAutoselectCaptureKeyDown.bind(this),this.onAutoselectCaptureKeyUp=this.onAutoselectCaptureKeyUp.bind(this),this.autocompleters={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var e=this.props;e.authored&&this.getAuthor(e.node),e.authors&&this.getAuthors(e.node)},e.prototype.componentWillUpdate=function(e,t){e.extra&&e.extra.length&&"edit"==e.extra[e.extra.length-1]&&!this.isEditMode()&&this.setState({editing:!0}),this.props.authors&&this.getAuthors(e.node),this.props.node!==e.node&&this.props.authored&&this.getAuthor(e.node)},e.prototype.isIdenticalAuthorLists=function(e,n){return!e==!n&&(!e||e.length===n.length&&e.filter(function(e,t){return n.indexOf(e)===t}).length===e.length)},e.prototype.onAutocompleteSelect=function(e,t){this.setState({body:e,modified:e!==this.state.body,editText:e,replaceText:e,replaceCursorPos:t,replaceTextEvent:this.state.replaceTextEvent?this.state.replaceTextEvent+1:1})},e.prototype.onAutoselectCaptureKeyDown=function(e,t){var n=this.autocompleters;n[e]||(n[e]={}),n[e].captureKeyDown=t},e.prototype.onAutoselectCaptureKeyUp=function(e,t){var n=this.autocompleters;n[e]||(n[e]={}),n[e].captureKeyUp=t},e.prototype.onKeyDown=function(e){var t,n=this.autocompleters;for(t in n){var o=n[t];if(o.captureKeyDown&&!o.captureKeyDown(e))return!1}return!0},e.prototype.onKeyUp=function(e){var t,n=this.autocompleters;for(t in n){var o=n[t];if(o.captureKeyUp&&!o.captureKeyUp(e))return!1}return!0},e.prototype.onTextAreaFocus=function(e){return this.setState({textareaFocus:!0}),!0},e.prototype.onTextAreaBlur=function(e){var t=this;return setTimeout(function(){return t.setState({textareaFocus:!1})},300),!0},e.prototype.onTextAreaCaret=function(e){return this.setState({editCursorPos:e.target.selectionStart}),!0},e.prototype.getAuthors=function(e){var t=this;e.meta&&e.meta.author&&!this.isIdenticalAuthorLists(e.meta.author,this.state.authorIds)&&(this.setState({authorIds:e.meta.author.map(function(e){return e})}),$Node.Get(e.meta.author).then(function(e){e.node&&e.node.length?t.setState({authors:e.node}):t.setState({error:"Authors not found"})}).catch(function(e){t.setState({error:e})}))},e.prototype.getAuthor=function(e){var t=this;$Node.Get(e.author).then(function(e){e.node&&e.node.length?(e=e.node[0],t.setState({author:e,avatar:e&&e.meta&&e.meta.avatar?e.meta.avatar:""})):t.setState({error:"Author not found"})}).catch(function(e){t.setState({error:e})})},e.prototype.onEdit=function(e){this.setState({editing:!0})},e.prototype.onPreview=function(e){this.setState({editing:!1})},e.prototype.onSave=function(e){var t=this,n=this.state.name||this.props.node.name,o=this.state.body||this.props.node.body;return this.props.onSave&&this.props.onSave(e),$Node.Update(this.props.node.id,n,o).then(function(e){return 200==e.status?(t.setState({modified:!1}),!0):(0==e.caller_id||e.data&&0==e.data.caller_id?location.hash="#savebug":t.setState({error:e.status+": "+e.error}),!1)}).catch(function(e){console.log(e),t.setState({error:e})})},e.prototype.onPublish=function(e){var t=this;return console.log("do save first"),this.onSave(e).then(function(e){e&&(console.log("do publish"),$Node.Publish(t.props.node.id).then(function(e){if(console.log(e),200!=e.status||!e.path)throw Object.assign({},e);window.location.href=e.path}).catch(function(e){console.log(e),t.setState({error:e}),window.location.hash="#error-publish/"+encodeURI(e.message)}))}).catch(function(e){console.log(e),t.setState({error:e}),window.location.hash="#error-publish/"+encodeURI(e.message)})},e.prototype.onDone=function(e){var t=this;if(this.state.modified)return console.log("do save first"),this.onSave(e).then(function(e){e&&(console.log("done"),window.location.href=t.props.node.path)}).catch(function(e){console.log(e),t.setState({error:e}),window.location.hash="#error-publish/"+encodeURI(e.message)});console.log("done"),window.location.href=this.props.node.path},e.prototype.onModifyTitle=function(e){this.setState({modified:!0,name:e.target.value})},e.prototype.onModifyText=function(e){this.setState({modified:!0,body:e.target.value,editText:e.target.value,editCursorPos:e.target.selectionStart,replaceText:null,textareaFocus:!0})},e.prototype.onModifyAvatar=function(e){this.setState({avatar:e})},e.prototype.isEditMode=function(){var e=this.props.extra;return e&&e.length&&"edit"==e[e.length-1]},e.prototype.render=function(e,t){var n=(e=Object.assign({},e)).node,o=e.user;e.path,e.extra;var i=e.featured,r=t.author,a=t.authors;if(n&&(n.slug&&!e.authored&&!e.authors||n.slug&&r&&r.slug||n.slug&&a.length)){var s,l,c=null,h=null;if(this.isEditMode()){if(!node_IsAuthor(n,o))return h$1(ContentError,{code:"403"},"Forbidden: You do not have permission to edit this");var u={editing:t.editing,modified:t.modified,published:!!n.published,onedit:this.onEdit,onpreview:this.onPreview,onsave:this.onSave,onpublish:this.onPublish,ondone:this.onDone};u.nopublish=e.nopublish,c=h$1(ContentCommonEdit,u),l=h$1(AutocompleteAtNames,{text:t.editText,cursorPos:t.editCursorPos,authors:e.authors,textareaFocus:t.textareaFocus,onSelect:this.onAutocompleteSelect,captureKeyDown:this.onAutoselectCaptureKeyDown,captureKeyUp:this.onAutoselectCaptureKeyUp}),s=h$1(AutocompleteEmojis,{text:t.editText,cursorPos:t.editCursorPos,textareaFocus:t.textareaFocus,onSelect:this.onAutocompleteSelect,captureKeyDown:this.onAutoselectCaptureKeyDown,captureKeyUp:this.onAutoselectCaptureKeyUp})}else node_IsAuthor(n,o)&&(e.edit=1);var f=null,u=null;e.authored?(f=h$1(ContentCommonBodyAvatar,{node:n,user:o,src:t.avatar,editing:!!node_IsAuthor(n,o)&&t.editing,onchange:this.onModifyAvatar,href:t.author.path}),!e.notitleedit&&t.editing||(u=h$1(ContentCommonBodyBy,{node:n,author:r,by:"string"==typeof e.by?e.by:null,label:e.label||"published",noby:e.noby,when:!0}))):e.authors&&e.by?u=t.editing?"item"==n.type?h$1(ItemTeambuilding,{node:n,authors:a,featured:i,user:o,onChange:e.onChangeTeam}):h$1("div",{class:"content-common-body"},h$1("div",{class:"-label"},"Authors"),"Visit ",h$1(NavLink,{blank:!0,href:o.path+"/following"},"your userpage")," to add authors. ",h$1("br",null),h$1("strong",null,"NOTE:")," You can only add friends (users that follow each other)."):h$1(ContentCommonBodyBy,{node:n,authors:a,by:"string"==typeof e.by?e.by:null}):e.updated&&!t.editing&&(u=h$1(ContentCommonBodyBy,{node:n,label:"Last updated",modified:!0})),t.editing&&e.editonly?h=e.editonly:!t.editing&&e.viewonly&&(h=e.viewonly);i=null;e.noflag||e.noheader||!e.flag&&!e.flagIcon||(d=null,e.flag&&(d=h$1("span",null,e.flag)),i=h$1(ContentCommonFlag,{class:e.flagClass,icon:e.flagIcon},d));a=null;e.notitle||e.noheader||(a=h$1(ContentCommonBodyTitle,{href:e.title?null:n.path,id:n.id,minmax:e.minmax,title:e.title||t.name,shortlink:!e.title,hover:n.slug+" [$"+n.id+"]",subtitle:e.subtitle,titleIcon:e.titleIcon,editing:!e.notitleedit&&t.editing,onmodify:this.onModifyTitle,limit:"80"}));var d=null;e.nomarkup||(d=h$1(ContentCommonBodyMarkup,{node:n,user:o,label:e.label||"Description",editing:t.editing,placeholder:"Say something",class:"-block-if-not-minimized",onmodify:this.onModifyText,minimized:e.minimized,limit:e.limit,onkeydown:this.onKeyDown,onkeyup:this.onKeyUp,onfocus:this.onTextAreaFocus,onblur:this.onTextAreaBlur,oncaret:this.onTextAreaCaret,replaceText:t.replaceText,cursorPos:t.replaceCursorPos,replaceTextEvent:t.replaceTextEvent},t.body));o=null;e.above&&(o=e.above);t=null;return n.published||(t=h$1(ContentCommonDraft,{draft:e.draft})),e.class=cN("content-simple",e.class),this.isEditMode()&&(e.minmax=null,e.minimized=null),h$1(ContentCommon,e,c,t,f,i,a,o,u,d,l,s,h,e.children)}return h$1(ContentLoading,null)},e}(Component),ContentEvent=function(t){function e(e){t.call(this,e),this.onJoin=this.onJoin.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onJoin=function(e){var t=this.props.featured;window.location.hash="#create/"+t.id+"/item/game"},e.prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,r=e.extra,a=e.featured;e=Object.assign({},e),n&&(e.flag="EVENT",e.flagIcon="trophy",e.flagClass="-col-ab");var s=!1,l=null;r&&0==r.length&&(l="-selected",s=!0),h$1(ContentCommonNavButton,{href:i,class:l},h$1(SVGIcon,null,"home"),h$1("div",{class:"if-sidebar-inline"},"Home"));l=null;r&&0<r.length&&"games"==r[0]&&(l="-selected"),h$1(ContentCommonNavButton,{href:i+"/games",class:l},h$1(SVGIcon,null,"gamepad"),h$1("div",{class:"if-sidebar-inline"},"Games")),r&&0<r.length&&"mygrades"==r[0]&&(c="-selected"),h$1(ContentCommonNavButton,{href:i+"/mygrades",class:c},h$1(SVGIcon,null,"star-half"),h$1("div",{class:"if-sidebar-inline"},"My Grades"));var c,h,l=null;return o&&o.id&&node_CanCreate(n,"item/game")&&(c="-diabled",r&&0<r.length&&"games"==r[0]&&(c="-selected"),a&&a.what&&a.focus_id||(l=h$1(ContentCommonNavButton,{onclick:this.onJoin,class:c},h$1(SVGIcon,null,"publish"),h$1("div",{class:"if-sidebar-inline"},"Join Event")))),nodeEvent_CanTheme(n)&&(h=null,r&&r.length&&"theme"===r[0]&&(h="-selected"),h$1(ContentCommonNavButton,{href:i+"/theme",class:h},h$1(SVGIcon,null,"ticket"),h$1("div",{class:"if-sidebar-inline"},"Theme Selection"))),e.class="content-event",e.above=[],n.meta["event-start"]&&n.meta["event-end"]&&(r=new Date(n.meta["event-start"]),i=new Date(n.meta["event-end"]),h="["+navigator.language+"] ",navigator.languages&&(h+="["+navigator.languages.join(",")+"] "),ShowEventTheme=null,n.meta["event-theme"]&&(ShowEventTheme=h$1("div",null,h$1(SVGIcon,{small:!0,baseline:!0,gap:!0},"lightbulb")," Theme: ",h$1("strong",null,n.meta["event-theme"]))),e.above.push(h$1(ContentCommonBody,null,ShowEventTheme,h$1("div",null,h$1(SVGIcon,{small:!0,baseline:!0,gap:!0},"calendar")," ",getLocaleDay(r)," ",getLocaleMonthDay(r)," to ",h$1("span",{class:"if-sidebar-inline"},getLocaleDay(i))," ",getLocaleDate(i)),h$1("div",{title:h+r.toString()},h$1(SVGIcon,{small:!0,baseline:!0,gap:!0},"clock")," Starts at ",h$1("strong",null,getLocaleTime(r))," ",getLocaleTimeZone(r)," ",h$1(NavLink,{href:"https://github.com/ludumdare/ludumdare/issues/589"},h$1("strong",{title:"Adjusted for your local timezone. If this is not your timezone, click here and let us know!"},"*")))))),s||(e.minimized=!0),h$1(ContentSimple,e,h$1(ContentCommonNav,null,l))},e}(Component),ContentHeadliner=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.renderItem=function(e){var t=this.props;if(e){var n=[];n.push(h$1("span",{class:"-main"},e.name));var o=[];t.published&&o.push(this.renderWhen(e,"string"==typeof t.published?t.published:"published")),t.love&&o.push(h$1("div",{title:"Love",class:"-statistic"},h$1(SVGIcon,{small:!0,baseline:!0},"heart")," ",h$1("span",null,e.love))),t.comments&&o.push(h$1("div",{title:"Comments",class:"-statistic"},h$1(SVGIcon,{small:!0,baseline:!0},"bubble")," ",h$1("span",null,e.comments))),t.games&&e.games&&o.push(h$1("div",{title:"Games",class:"-statistic"},h$1(SVGIcon,{small:!0,baseline:!0},"gamepad")," ",h$1("span",null,e.games))),t.articles&&e.articles&&o.push(h$1("div",{title:"Articles",class:"-statistic"},h$1(SVGIcon,{small:!0,baseline:!0},"article")," ",h$1("span",null,e.articles)));var i=null,i=o.length?h$1("div",{class:"-top-bot"},h$1("div",{class:"-title _font2"},n),h$1("div",{class:"-subtext"},o)):h$1("div",{class:"-fill"},h$1("div",{class:"-title _font2"},n));return h$1(ButtonLink,{class:cN("item -list-item",t.childclass),href:e.path},i)}return null},e.prototype.renderNullItem=function(){var e=this.props,t=h$1("div",{class:"-fill"},h$1("div",{class:"-title _font2"},e.title));return h$1("div",{class:cN("item -list-item",e.childclass)},t)},e.prototype.renderItems=function(e){if(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++)t.push(this.renderItem(e[n]));return t}return this.renderItem(e)}return this.renderNullItem()},e.prototype.renderWhen=function(e,t,n){if(void 0===n&&(n=1440),e.published){var o=new Date(e.published);e.meta["origin-date"]&&(o=new Date(e.meta["origin-date"]));var i=(new Date).getTime()-o.getTime(),e=[];return null!==n&&i<60*parseInt(n)*1e3&&(e.push(h$1("span",{class:"-label"},"NEW")),e.push(" ")),e.push(h$1("span",null,t)),e.push(" "),e.push(h$1("span",{title:getLocaleDate(o)},getRoughAge(i))),h$1("div",null,e)}return h$1("div",null,"not ",t," yet")},e.prototype.render=function(e){var t=[];e.icon&&t.push(h$1(SVGIcon,{big:!0},e.icon)),e.name&&(n=cN("-text",e.icon?"if-sidebar-inline":""),t.push(h$1("span",{class:n},e.name.toUpperCase())));var n=null;t.length&&(n=e.href?h$1(ButtonLink,{class:cN("corner-flag",e.flagclass),href:e.href},t):h$1("div",{class:cN("corner-flag",e.flagclass)},t));t=null;return e.footer?t=e.footerhref?h$1(ButtonLink,{class:cN("item -footer-item",e.childclass),href:e.footerhref},e.footer):h$1("div",{class:cN("item -footer-item",e.childclass)},e.footer):e.more&&(t=h$1(ButtonLink,{class:cN("item -more-item",e.childclass),href:e.more},h$1(SVGIcon,null,"circle"),h$1(SVGIcon,null,"circle"),h$1(SVGIcon,null,"circle"))),h$1("div",{class:cN("content-base content-headliner",e.class),style:e.style},n,this.renderItems(e.node),t)},e}(Component),$Stats={Get:Get$1};function Get$1(e){return Fetch$2.Get(API_ENDPOINT+"/vx/stats/"+e,!0)}var ContentHeadlinerEvent=function(t){function e(e){t.call(this,e),this.state={stats:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var e=this.props;e.node&&this.getStats(e.node.id)},e.prototype.getStats=function(e){var t=this;e&&$Stats.Get(e).then(function(e){e.stats&&t.setState({stats:e.stats})}).catch(function(e){t.setState({error:e})})},e.prototype.render=function(e,t){if(t.stats)return h$1(ContentHeadliner,Object.assign({},e,{footer:null}));return null},e}(Component),ContentNavButton=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=[],n=[e.class];return e.path!==e.href&&e.path!==e.match||n.push("-selected"),e.light&&n.push("-light"),e.icon&&(t.push(h$1(UIIcon,{src:e.icon})),n.push("-has-icon")),t.push(h$1("span",null,e.children)),h$1(UIButton,Object.assign({},e,{class:cN(n)}),t)},t}(Component),PageNavRoot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra;if(!t)return null;e=o+(i&&i.length?"/"+i.join("/"):""),t=(e=e||"/").split("/",2).join("/"),o={"/news":"/feed/news"},i=[],o="/"==(e=o[e]?o[e]:e),n=n&&0!==n.id;return o?i.push(h$1(ContentNavButton,{path:e,title:"Home",icon:"home",href:"/"})):i.push(h$1(ContentNavButton,{path:e,title:"Go Back",icon:"previous",href:"/"})),["/","/my"].includes(t)&&n&&(i.push(h$1(ContentNavButton,{path:e,title:"Me",light:!o,icon:"user",href:"/my"},"Me")),o||(i.push(h$1(ContentNavButton,{path:e,title:"Notifications",icon:"bubble",href:"/my/notifications"},"Notifications")),i.push(h$1(ContentNavButton,{path:e,title:"Stats",icon:"stats",href:"/my/stats"},"Stats")),i.push(h$1(ContentNavButton,{path:e,title:"Settings",icon:"cog",href:"/my/settings"},"Settings")))),["/","/feed","/news"].includes(t)&&(i.push(h$1(ContentNavButton,{path:e,title:"Feed",light:!o,icon:"feed",href:"/feed"},"Feed")),i.push(h$1(ContentNavButton,{path:e,title:"News",icon:"news",href:"/feed/news"},"News"))),["/","/explore","/games","/events"].includes(t)&&(i.push(h$1(ContentNavButton,{path:e,title:"Explore",light:!o,icon:"browse",href:"/explore"},"Explore")),i.push(h$1(ContentNavButton,{path:t,title:"Games",icon:"gamepad",href:"/games"},"Games")),"/"!=t&&i.push(h$1(ContentNavButton,{path:t,title:"Events",icon:"trophy",href:"/events/ludum-dare",match:"/events"},"Events"))),(["/dev"].includes(t)||0<=location.search.indexOf("debug"))&&(i.push(h$1(ContentNavButton,{path:e,title:"Dev",light:!o,icon:"embed",href:"/dev"},"Dev")),o||i.push(h$1(ContentNavButton,{path:e,title:"Palette",icon:"image",href:"/dev/palette"},"Palette"))),h$1("div",{class:"content-base content-nav"},i)},t}(Component),ContentPost=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t,n,o,i=e.node;return e.user,e.path,e.extra,e=Object.assign({},e),i&&("news"===i.subtype?(e.by="NEWS",e.flagIcon="news",e.flagClass="-col-c"):"info"===i.subtype?(e.by="INFO",e.flagIcon="info",e.flagClass="-col-nddd"):"guide"===i.subtype?(e.by="GUIDE",e.flagIcon="article",e.flagClass="-col-nddd"):"promo"===i.subtype&&(e.flagIcon="gift",e.flagClass="-col-ab",e.single?e.user&&e.user.id?(o=h$1("div",null,"Unknown Promo Type"),"shared"==i.subsubtype?o=i.meta["promo-code"]?(n=!1,0===(t=i.meta["promo-code"].toLowerCase()).indexOf("http://")&&(n=!0),0===t.indexOf("https://")&&(n=!0),(n=0===t.indexOf("ftp://")?!0:n)?h$1("div",null,h$1("span",null,"Link:")," ",h$1("strong",null,h$1(UILink,{href:i.meta["promo-code"]},i.meta["promo-code"]))):h$1("div",null,h$1("span",null,"Code:")," ",h$1("strong",null,i.meta["promo-code"]))):h$1("div",null,"No `promo-code` associated with shared promo node."):"single"==i.subsubtype&&(o=h$1("div",null,i.subsubtype)),e.children=h$1("div",{class:"content-common-body -promo"},h$1("h2",null,"Get Promo"),o)):e.children=h$1("div",{class:"content-common-body -promo"},h$1("h2",null,"Get Promo"),h$1("div",null,"Login to claim")):e.children=h$1("div",{class:"content-common-body -promo"},h$1(UIButton,{class:"content-common-nav-button",href:i.path},h$1(UIIcon,{src:"gift"}),h$1("div",null,"Continue"))))),e.limit=24576,h$1(ContentSimple,e)},e}(Component),ContentCommonNavButtonFollow=function(t){function e(e){t.call(this,e),this.state={isFollowing:null},this.onFollow=this.onFollow.bind(this),this.onUnfollow=this.onUnfollow.bind(this),this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isFollowing=function(){var e=this.props.node,t=this.props.user,n=this.state.isFollowing;return null!==n?n:t.private&&t.private.meta&&t.private.meta.star&&-1!==t.private.meta.star.indexOf(e.id)},e.prototype.isFriend=function(){var e=this.props.node,t=this.props.user;return t.private.refs.star&&-1!==t.private.refs.star.indexOf(e.id)},e.prototype.onFollow=function(e){var t=this;return $NodeStar.Add(this.props.node.id).then(function(e){t.setState({isFollowing:!0})}).catch(function(e){t.setState({error:e})})},e.prototype.onUnfollow=function(e){var t=this;return $NodeStar.Remove(this.props.node.id).then(function(e){t.setState({isFollowing:!1})}).catch(function(e){t.setState({error:e})})},e.prototype.onClick=function(e){return this.isFollowing()?this.onUnfollow(e):this.onFollow(e)},e.prototype.render=function(e){var t=e.node,n=e.user;if(n&&0!==n.id){var o=!1,i=this.isFollowing();i&&(o=this.isFriend());var r=[];(r=e.class?r.concat(e.class.split(" ")):r).push("-follow");var a=h$1(SVGIcon,{class:"if-not-hover-block"},"user"),n=h$1(SVGIcon,{class:"if-hover-block"},"user-plus"),e=h$1("div",null,"Follow");if(i&&(n=h$1(SVGIcon,{class:"if-hover-block"},"user-minus")),o?(a=h$1(SVGIcon,{class:"if-not-hover-block"},"users"),e=h$1("div",null,"Friends"),r.push("-friends")):i&&(a=h$1(SVGIcon,{class:"if-not-hover-block"},"user-check"),e=h$1("div",null,"Following"),r.push("-following")),t&&t.slug)return h$1(ContentCommonNavButton,{class:r,onclick:this.onClick},a,n,e)}return null},e}(Component),ContentUser=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.isEditMode=function(){var e=this.props.extra;return e&&e.length&&"edit"==e[e.length-1]},e.prototype.render=function(e){var t=(e=Object.assign({},e)).node,n=e.user;e.path;var o=e.extra;if(!t||!n)return null;if("user"!=t.type)return h$1(ContentError,null,"User ",o.length?'"'+o[0]+'"':""," not found");var i=!1;if(o&&0==o.length&&(i=!0),e.flagIcon="user",e.flagClass="-col-bc",e.subtitle="@"+t.slug,e.notitleedit=!0,e.authored=!0,e.label="Joined",e.noby=!0,i||this.isEditMode()){i=[];return this.isEditMode()||n&&n.id&&t.id!==n.id&&i.push(h$1(ContentCommonNavButtonFollow,{node:t,user:n})),h$1(ContentSimple,Object.assign({},e,{class:cN("content-user",e.class)}),h$1(ContentCommonNav,null,i))}return h$1(ContentHeadliner,{node:t,name:"user",icon:"user",flagclass:"-col-bc",published:"Joined",at:!0,games:!0,articles:!0,trophies:!0})},e}(Component),ContentMore=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return e.loading?h$1("div",{class:"content-base content-more"},h$1(NavSpinner,null)):h$1("div",{class:"content-base content-more"},h$1(ButtonBase,{class:"-button",onclick:e.onclick},"MORE"))},e}(Component),ContentTimeline=function(t){function e(e){t.call(this,e),this.state={feed:[],hash:{},offset:5,lastadded:null,loaded:!1},this.makeFeedItem=this.makeFeedItem.bind(this),this.fetchMore=this.fetchMore.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var e=this.props;this.getFeed(e.node.id,e.methods||["parent","superparent"],e.types||["post"],e.subtypes||null,e.subsubtypes||null,e.tags||null,null,this.props.limit)},e.prototype.appendFeed=function(e){for(var t=this.state.feed,n=this.state.hash,o=0,i=0;i<e.length;i++){var r=e[i];n[r.id]||(n[r.id]=t.length,t.push(r),o++)}this.setState({feed:t,hash:n,lastadded:o})},e.prototype.getFeedIdsWithoutNodes=function(){for(var e=this.state.feed,t=[],n=0;n<e.length;n++)e[n].node||t.push(e[n].id);return t},e.prototype.getMissingNodes=function(){var i=this,e=this.state.feed;if(e.length)return $Node.GetKeyed(e,["author","parent","superparent"]).then(function(e){var t,n=i.state.feed,o=i.state.hash;for(t in o)e.node[t]&&(n[o[t]].node=e.node[t]);i.setState({feed:n,hash:o})}).catch(function(e){i.setState({error:e})})},e.prototype.getFeed=function(e,t,n,o,i,r,a,s){var l=this;this.setState({loaded:!1}),$Node.GetFeed(e,t,n,o,i,r,a,s).then(function(e){if(l.setState({loaded:!0}),e.feed&&e.feed.length)return l.appendFeed(e.feed),l.getMissingNodes()}).catch(function(e){l.setState({error:e})})},e.prototype.fetchMore=function(e){var t=this.props,e=this.state.offset;this.getFeed(t.node.id,t.methods||["parent","superparent"],t.types||["post"],t.subtypes||null,t.subsubtypes||null,t.tags||null,e,this.props.limit||15),this.setState({offset:e+10})},e.prototype.makeFeedItem=function(e){if((e=e.node)&&this.props){var t=this.props.path+"/"+e.slug,n=this.props.user,o=this.props.extra;return"post"===e.type||"game"===e.type?h$1(ContentPost,{node:e,user:n,path:t,extra:o,authored:!0,by:!0,minmax:!0,love:!0,comments:!0,minimized:this.props.minimized}):"user"===e.type?h$1(ContentUser,{node:e,user:n,path:t,extra:o,minmax:!0}):h$1("div",{class:"content-base"},"Unsupported Node Type: ",""+e.type)}return null},e.prototype.render=function(e,t){var n=t.feed,o=t.lastadded,i=t.error,r=t.loaded,t=[];return i?t.push(h$1(ContentCommon,{node:e.node},h$1(ContentCommonBody,null,"Error: ",""+i))):n&&0==n.length?e.noemptymessage||t.push(h$1(ContentCommon,{node:e.node},h$1(ContentCommonBody,null,"Feed is empty"))):n&&n.length&&(t=t.concat(n.map(this.makeFeedItem))),!e.nomore&&0<o&&t.push(h$1(ContentMore,{loading:!r,onclick:this.fetchMore})),h$1(ContentList,{class:cN("content-timeline",e.class)},t)},e}(Component),ContentHeadlinerFeed=function(t){function e(e){t.call(this,e),this.state={feed:null,nodes:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var e=this.props;this.getFeed(e.node.id,e.methods||["parent","superparent"],e.types||["post"],e.subtypes||null,e.subsubtypes||null,e.tags||null,null,this.props.limit)},e.prototype.getFeed=function(e,t,n,o,i,r,a,s){var l=this;$Node.GetFeed(e,t,n,o,i,r,a,s).then(function(e){return e&&e.feed&&e.feed.length?(l.setState({feed:e.feed}),$Node.Get(e.feed)):null}).then(function(e){e&&e.node&&l.setState({nodes:e.node})}).catch(function(e){l.setState({error:e})})},e.prototype.render=function(e,t){return t.nodes?h$1(ContentHeadliner,Object.assign({},e,{node:t.nodes})):null},e}(Component),ContentBox=function(t){function e(e){t.call(this,e),this.state={authors:null,parent:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.getParent(this.props)},e.prototype.componentWillReceiveProps=function(e){Shallow.Diff(this.props,e)&&this.getParent(e)},e.prototype.getParent=function(e){var t=this,e=e.node;return e&&e.parent?$Node.Get(e.parent).then(function(e){e&&e.node&&e.node.length&&(e=e.node[0],t.setState({parent:e}))}):Promise.resolve({})},e.prototype.getAuthors=function(){},e.prototype.render=function(e,t){var n=(e=Object.assign({},e)).node;if(e.path,e.extra,n){var o=["content-box"],i=n.name,r="///content/internal/tvfail.png",a=n.meta&&n.meta.cover?n.meta.cover:r,s=n.meta&&n.meta["hover-cover"]?n.meta["hover-cover"]:r;a+=".480x384.fit.jpg";var l=null;n.meta["cover-hover"]&&(l=h$1(IMG,{class:"-cover-hover",src:s,failsrc:r}));var c=null;!e.noevent&&t.parent&&t.parent.name&&(c=h$1("div",null,t.parent.name));s=null,t=null;!e.nosubevent&&n.subtype&&(n.published?"game"==n.subtype?(s=h$1("div",null,"GAME"),n.subsubtype&&("jam"==n.subsubtype?(s=h$1("div",null,"JAM ",h$1(SVGIcon,{baseline:!0,small:!0},1===node_CountAuthors(n)?"user":"users")),t="-col-a"):"extra"==n.subsubtype?(s=h$1("div",null,"EXTRA ",h$1(SVGIcon,{baseline:!0,small:!0},1===node_CountAuthors(n)?"user":"users")),t="-col-bc"):"compo"==n.subsubtype?(s=h$1("div",null,"COMPO"),t="-col-ab"):"craft"==n.subsubtype?(s=h$1("div",null,"CRAFT"),t="-col-b"):"release"==n.subsubtype?(s=h$1("div",null,"RELEASE"),t="-col-ca"):"unfinished"==n.subsubtype&&(s=h$1("div",null,h$1(SVGIcon,{baseline:!0,small:!0},"cross"))))):"tool"==n.subtype&&(s=h$1("div",null,"TOOL"),t="-col-c"):s=h$1("div",null,h$1(SVGIcon,{baseline:!0,small:!0},"cross")));var h=null;if(n.magic)for(var u in h=[],n.magic){var f=u.split("-");3==f.length&&"grade"==f[0]&&"result"==f[2]&&(1==n.magic[u]?h.push(h$1("span",{class:"-first"},h$1(SVGIcon,null,"trophy"))):2==n.magic[u]?h.push(h$1("span",{class:"-second"},h$1(SVGIcon,null,"trophy"))):3==n.magic[u]&&h.push(h$1("span",{class:"-third"},h$1(SVGIcon,null,"trophy"))))}return h$1(ButtonLink,{class:cN(o,e.class),href:n.path},l,h$1(IMG,{class:"-cover",src:a,failsrc:r}),h$1("div",{class:"-top-bar"},c),h$1("div",{class:cN("-sub-event",t)},s),h$1("div",{class:"-bot-left"},h),h$1("div",{class:"-bot-right"}),h$1("div",{class:"-bot-bar"},h$1("div",{class:"-title"},i)))}return e.placeHolder?h$1("div",{class:cN(o,e.class,"-place-holder")}):h$1(ContentLoading,null)},e}(Component),ContentItemBox=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){return e=Object.assign({},e),h$1(ContentBox,e)},e}(Component),randomPick=function(e,t){for(var n=[];n.length<t;){var o=Math.floor(Math.random()*e);-1===n.indexOf(o)&&n.push(o)}return n},N_RESHUFFLE_BEFORE_RELOAD=6,N_SHOW_MAX=4,TimelineRateGames=function(t){function e(e){t.call(this,e),this.state={expanded:!0,loading:!0},this.handleMinMax=this.handleMinMax.bind(this),this.handleRefresh=this.handleRefresh.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.handleMinMax=function(){this.setState({expanded:!this.state.expanded})},e.prototype.handleRefresh=function(){var e=this.state,t=e.loading,n=e.reshuffles,e=e.feed;t||(n<N_RESHUFFLE_BEFORE_RELOAD&&e?(e=e.length,this.setState({reshuffles:n+1,pick:randomPick(e,Math.min(e,N_SHOW_MAX))})):this.getGames(this.props))},e.prototype.componentDidMount=function(){this.getGames(this.props)},e.prototype.componentWillReceiveProps=function(e){var t=this.props;t.featured&&t.featured!=e.featured&&this.getGames(e)},e.prototype.getGames=function(e){var n=this;e.featured&&e.featured.id&&(e=e.featured.id,this.setState({loading:!0}),$Node.GetFeed(e,["smart","parent"],["item"],["game"],"compo+jam+extra",null,null,30).then(function(e){var t=e.feed&&e.feed.length||0;0===t?n.setState({feed:[],pick:[],loaded:new Date,loading:!1,reshuffles:0}):$Node.Get(e.feed).then(function(e){n.setState({feed:e.node,pick:randomPick(t,Math.min(t,N_SHOW_MAX)),loaded:new Date,loading:!1,reshuffles:0})}).catch(function(e){n.setState({error:e,loading:!1})})}).catch(function(e){n.setState({error:e,loading:!1})}))},e.prototype.render=function(e,t){var n=t.expanded,o=t.feed,i=t.pick,r=t.error,a=t.loading,t=cN("content-common-header"),n=cN("content-base","content-common","rate-games",!n&&"minimized"),r=r?h$1("div",{class:"-warning"},h$1(UIIcon,{src:"bug"}),h$1("span",null,"An error occurred while loading the games.")):a?h$1(ContentLoading,null):0==o.length?h$1(ContentCommonBody,null,"Sorry, there are no published games yet"):h$1("div",{class:"games-pick"},i.map(function(e){return h$1(ContentItemBox,{node:o[e],noevent:!0})})),a=[],i=[];return a.push(h$1(ContentCommonFooterButtonMinMax,{onclick:this.handleMinMax})),i.push(h$1(UIButton,{class:cN("content-common-footer-button","-refresh"),title:"Refresh",onclick:this.handleRefresh},h$1(UIIcon,{src:"refresh"}),h$1("div",{class:"-count"},"Refresh"))),i.push(h$1(UIButton,{class:cN("content-common-footer-button","-all-games"),href:e.featured&&"/events/ludum-dare/"+e.featured.slug+"/games/"},h$1(UIIcon,{src:"gamepad"}),h$1("div",{class:"-count"},"All Games"))),h$1("div",{class:n},h$1("div",{class:t},h$1(UIIcon,{src:"gamepad"})," ",h$1("span",null,"Play, Rate, and give Feedback")),h$1("div",{class:"-bodies"},h$1("div",{class:"-inline-if-not-minimized"},r),h$1("div",{class:"-inline-if-not-minimized"},h$1("strong",null,"TIP"),": For more ratings and feedback, leave feedback on the games you play, and give ",h$1(UIIcon,{src:"heart"}),"'s to feedback you like.")),h$1("div",{class:cN("content-common-footer",a.length+i.length?"-has-items":"")},h$1("div",{class:"-left"},a),h$1("div",{class:"-right"},i)))},e}(Component),PageRootHome=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra,r=e.featured,a=h$1(ContentHeadlinerFeed,{node:t,types:["post"],subtypes:["news"],methods:["all"],limit:1,name:"news",icon:"news",flagclass:"-col-c -inv -inv-lit",childclass:"-col-c",published:!0,love:!0,comments:!0,href:"/news"}),s=null;n&&n.id&&r&&r.focus_id&&"1"==r.meta["can-grade"]&&r.what&&r.what[r.focus_id]&&r.what[r.focus_id].published&&(s=h$1(TimelineRateGames,{featured:e.featured}));r=h$1(ContentTimeline,{class:"content-timeline-posts",types:["post"],methods:["all"],node:t,user:n,path:o,extra:i,featured:r});return h$1(ContentList,{class:"page-home-home"},null,a,s,r)},t}(Component),PageRootFeed=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,e=e.extra;return h$1(ContentList,{class:"page-home-feed"},h$1(ContentHeadliner,{title:"Everything",name:"feed",icon:"feed",flagclass:"-col-ab",childclass:""}),h$1(ContentTimeline,{class:"content-timeline-posts",types:["post"],methods:["all"],node:t,user:n,path:o,extra:e}))},t}(Component),PageRootFeedNews=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,e=e.extra;return h$1(ContentList,{class:"page-home-feed-news"},h$1(ContentHeadliner,{title:"All News",name:"feed",icon:"feed",flagclass:"-col-ab",childclass:""}),h$1(ContentTimeline,{class:"content-timeline-news",types:["post"],subtypes:["news"],methods:["all"],node:t,user:n,path:o,extra:e}))},t}(Component),PageRootExplore$2=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return e.node,e.user,e.path,e.extra,h$1("div",null,h$1("div",null,"Exploration landing page goes here"),h$1("br",null),h$1("div",null,"Click the tabs above to explore"))},t}(Component),LayoutCol=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.flex;void 0===t&&(t=1);var n=e.flexGrow,o=e.flexShrink,i=e.flexBasis,i="flex: "+(n=null!=n?n:t)+" "+(o=null!=o?o:t)+(i=void 0===i?100:i)+"%; max-width: "+i+"%;";return h$1("div",Object.assign({},{class:cN(e.class,"-col"),style:i},e),e.children)},e}(Component),LayoutContainer=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",Object.assign({},e,{class:cN("layout-container",e.class)}),e.children)},e}(Component),LayoutGrid=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var n=e.columns;return void 0===n&&(n=3),h$1(LayoutContainer,Object.assign({},e,{class:cN(e.class,"-grid")}),e.children.map(function(e,t){return h$1(LayoutCol,{flexGrow:0,flexBasis:100/n},e)}))},e}(Component),GridSelector=function(t){function e(e){t.call(this,e),this.state={expanded:!1,selected:null},this.onSelectLayout=this.onSelectLayout.bind(this),this.onToggleDropDown=this.onToggleDropDown.bind(this),this.onHideDropDown=this.onHideDropDown.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.state.selected||this.handleNewSelection(this.props.defaultLayout)},e.prototype.handleNewSelection=function(e){var t=this.props.onChangeLayout;this.setState({selected:e,expanded:!1}),t&&t(e)},e.prototype.onToggleDropDown=function(){console.log("toggle dropdown",this.state),this.setState({expanded:!this.state.expanded})},e.prototype.onHideDropDown=function(){this.setState({expanded:!1})},e.prototype.onSelectLayout=function(e){this.handleNewSelection(e)},e.prototype.render=function(e,t){var n=this,o=t.expanded,i=t.selected,r=null,a=h$1(ButtonBase,{onclick:this.onToggleDropDown},h$1(SVGIcon,null,"cog"));return o&&(t=[[1,"1 per line",h$1("div",{onclick:function(){return n.onSelectLayout(1)},class:"-click-catcher"})],[1,"2 per line",h$1("div",{onclick:function(){return n.onSelectLayout(2)},class:"-click-catcher"})],[1,"3 per line",h$1("div",{onclick:function(){return n.onSelectLayout(3)},class:"-click-catcher"})],[1,"4 per line",h$1("div",{onclick:function(){return n.onSelectLayout(4)},class:"-click-catcher"})],[1,"5 per line",h$1("div",{onclick:function(){return n.onSelectLayout(5)},class:"-click-catcher"})],[1,"6 per line",h$1("div",{onclick:function(){return n.onSelectLayout(6)},class:"-click-catcher"})]],r=h$1(InputDropdown,{items:t,onmodify:this.onSelectLayout,expanded:o,value:i,selfManaged:!1,onhide:this.onHideDropDown})),h$1("div",{class:cN(e.class,"grid-selector")},a,r)},e}(Component),LayoutChangeableGrid=function(t){function e(e){t.call(this,e),this.state={columns:4}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=this,t=t.columns;return h$1("div",null,h$1(GridSelector,{defaultLayout:t,onChangeLayout:function(e){n.setState({columns:e})}}),h$1(LayoutGrid,Object.assign({},e,{columns:t,class:cN(e.class,"-selectable")}),e.children))},e}(Component),ContentGames=function(t){function s(e){t.call(this,e),this.state={feed:[],hash:{},offset:19,added:null,loaded:!1},this.fetchMore=this.fetchMore.bind(this)}return t&&(s.__proto__=t),((s.prototype=Object.create(t&&t.prototype)).constructor=s).prototype.componentDidMount=function(){var e=this.props;this.getFeed(e.node.id,e.methods||["parent","superparent"],e.types||["item"],e.subtypes||["game"],e.subsubtypes||null,e.tags||null,null,this.props.limit||24)},s.prototype.appendFeed=function(e){for(var t=this.state.feed,n=this.state.hash,o=0;o<e.length;o++){var i=e[o];n[i.id]||(n[i.id]=t.length,t.push(i))}this.setState({feed:t,hash:n,added:e.length})},s.prototype.getFeedIdsWithoutNodes=function(){var e=this.state.feed;this.state.hash;for(var t=[],n=0;n<e.length;n++)e[n].node||t.push(e[n].id);return t},s.prototype.getMissingNodes=function(){var i=this,e=this.state.feed;if(e.length)return $Node.GetKeyed(e).then(function(e){var t,n=i.state.feed,o=i.state.hash;for(t in e.node)n[o[e.node[t].id]].node=e.node[t];i.setState({feed:n,hash:o})}).catch(function(e){i.setState({error:e})})},s.prototype.getFeed=function(e,t,n,o,i,r,a,s){var l=this;$Node.GetFeed(e,t,n,o,i,r,a,s).then(function(e){if(l.setState({loaded:!0}),e.feed&&e.feed.length)return l.appendFeed(e.feed),l.getMissingNodes()}).catch(function(e){l.setState({error:e})})},s.prototype.fetchMore=function(e){console.log("loading more");var t=this.props,e=this.state.offset;this.getFeed(t.node.id,t.methods||["parent","superparent"],t.types||["item"],t.subtypes||["game"],t.subsubtypes||null,t.tags||null,e,this.props.limit||29),this.setState({offset:e+24})},s.matchesFilter=function(t,e){if(void 0===t)return!1;if(e&&e.active){e=e.wordsLowerCase;if(0<e.length){var n=0;return e.forEach(function(e){e&&(-1<t.name.toLowerCase().indexOf(e)||-1<t.body.toLowerCase().indexOf(e))&&n++}),0<n}return!0}return!0},s.prototype.render=function(n,e){var o=n.filter,t=e.feed;e.added;var i=e.error,r=e.loaded;e.defaultLayout;var a=e.layout,e=null;if(i)return h$1(ContentError,{code:"400"},'"Bad Request : Couldn\'t load games"');if(t&&0<t.length){n.nomore||(e=h$1(ContentMore,{onclick:this.fetchMore}));i=t.map(function(e,t){if(s.matchesFilter(e.node,o))return h$1(ContentItemBox,{node:e.node,path:n.path,noevent:n.noevent||null})});return h$1("div",{class:cN("content-base",n.class)},n.children,h$1(LayoutChangeableGrid,{columns:a},i),e)}return r&&t&&0==t.length?h$1(ContentCommon,n,h$1(ContentCommonBodyTitle,{href:"",title:"No Games!"}),h$1(ContentCommonBody,null,"Sorry, there are no published games yet")):h$1(ContentLoading,null)},s}(Component),FilterDesc={smart:h$1("div",null,h$1("strong",null,"Smart"),": This is the modern balancing filter. It balances the list using a combination of votes and the karma given to feedback. You start seeing diminishing returns after 50 ratings, but you can make up for it by leaving quality feedback."),unbound:h$1("div",null,h$1("strong",null,"Unbound"),": This is a variation of the Smart filter that is unbound. For curiousity."),classic:h$1("div",null,h$1("strong",null,"Classic"),": This is the classic balancing filter. It balances the list based on ratings alone. You start seeing diminishing returns after 100 ratings."),danger:h$1("div",null,h$1("strong",null,"Danger"),": This is the rescue filter. Everything with less than 20 ratings sorted top to bottom. Items on the first page are typically 1-2 rating away, so help them out!"),zero:h$1("div",null,h$1("strong",null,"Zero"),": This filter shows the most neglected games. These are often new users that didn't understand you should rate games. Leaving them some feedback is greatly appreciated."),feedback:h$1("div",null,h$1("strong",null,"Feedback"),": This filter lets you find who is working the hardest, leaving quality feedback for others."),grade:h$1("div",null,h$1("strong",null,"Grade"),": This filter lets you find the games that have the most ratings.")},PatternTag=/#[\w\d-]*/g,PatternAtName=/@[\w\d-]*/g,PatternWord=/[^ ]+/g,GamesFilter=function(t){function e(e){t.call(this,e),this.state={allowShowFilters:!0,simpleFilter:!0},this.onModifyTextFilter=this.onModifyTextFilter.bind(this),this.onTextFilerFocus=this.onTextFilerFocus.bind(this),this.onTextFilerBlur=this.onTextFilerBlur.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onModifyTextFilter=function(e){e.preventDefault();var t,n=this.props.onchangefilter,o=this.state.simpleFilter;n&&e.target&&(e=(t=e.target.value).replace(PatternTag,"").replace(PatternAtName,""),e=(o?t:e).match(PatternWord),n({text:t,active:!!t,words:e,wordsLowerCase:e?e.map(function(e){return e.toLowerCase()}):[],atnames:t.match(PatternAtName),tags:t.match(PatternTag)}))},e.prototype.onTextFilerFocus=function(e){},e.prototype.onTextFilerBlur=function(e){},e.prototype.render=function(e,t){var n=t.allowShowFilters,o=e.node,i=e.Path,r=e.Filter,a=e.SubFilter,s=e.SubSubFilter,l=e.showFeatured,c=e.showEvent,h=e.showVotingCategory,u=e.showRatingSort;e.showRatingSortDesc;var f=a?"/"+a:"",t=s&&"featured"!=s?"/"+s:"";h$1("div",{class:"feed-filter"},h$1("label",null,h$1("div",{class:"-label"},"Filter:"),h$1(InputText,{onmodify:this.onModifyTextFilter,onBlur:this.onTextFilerBlur,onFocus:this.onTextFilerFocus})));e=null;l&&n&&(d=[[1,h$1("div",null,h$1(SVGIcon,null,"tag"),h$1("div",null,"Featured Event")),h$1(NavLink,{href:i+r+f,class:"-click-catcher"})],[2,h$1("div",null,h$1(SVGIcon,null,"tag"),h$1("div",null,"All Events")),h$1(NavLink,{href:i+r+f+"/everything",class:"-click-catcher"})]],e=h$1(InputDropdown,{value:"featured"==s?1:2,items:d,useClickCatcher:!0,class:"-filter-featured",selfManaged:!1}));var d=null;c&&n&&(p=[[1,h$1("div",null,h$1(SVGIcon,null,"gamepad"),h$1("div",null,"All")),h$1(NavLink,{href:i+r+"/all"+t,class:"-click-catcher"})],[2,h$1("div",null,h$1(SVGIcon,null,"trophy"),h$1("div",null,"Jam")),h$1(NavLink,{href:i+r+"/jam"+t,class:"-click-catcher"})],[3,h$1("div",null,h$1(SVGIcon,null,"trophy"),h$1("div",null,"Compo")),h$1(NavLink,{href:i+r+"/compo"+t,class:"-click-catcher"})],[4,h$1("div",null,h$1(SVGIcon,null,"trophy"),h$1("div",null,"Extra")),h$1(NavLink,{href:i+r+"/extra"+t,class:"-click-catcher"})],[5,h$1("div",null,h$1(SVGIcon,null,"trash"),h$1("div",null,"Unfinished")),h$1(NavLink,{href:i+r+"/unfinished"+t,class:"-click-catcher"})]],c=1,"jam"==a?c=2:"compo"==a?c=3:"extra"==a?c=4:"unfinished"==a&&(c=5),d=h$1(InputDropdown,{value:c,items:p,useClickCatcher:!0,class:"-filter-event",selfManaged:!1}));var p=null;h&&n&&(g=[[1,h$1("div",null,"Overall"),h$1(NavLink,{href:i+"overall"+f+t,class:"-click-catcher"})],[2,h$1("div",null,"Fun"),h$1(NavLink,{href:i+"fun"+f+t,class:"-click-catcher"})],[3,h$1("div",null,"Innovation"),h$1(NavLink,{href:i+"innovation"+f+t,class:"-click-catcher"})],[4,h$1("div",null,"Theme"),h$1(NavLink,{href:i+"theme"+f+t,class:"-click-catcher"})],[5,h$1("div",null,"Graphics"),h$1(NavLink,{href:i+"graphics"+f+t,class:"-click-catcher"})],[6,h$1("div",null,"Audio"),h$1(NavLink,{href:i+"audio"+f+t,class:"-click-catcher"})],[7,h$1("div",null,"Humor"),h$1(NavLink,{href:i+"humor"+f+t,class:"-click-catcher"})],[8,h$1("div",null,"Mood"),h$1(NavLink,{href:i+"mood"+f+t,class:"-click-catcher"})]],m=1,"fun"==r?m=2:"innovation"==r?m=3:"theme"==r?m=4:"graphics"==r?m=5:"audio"==r?m=6:"humor"==r?m=7:"mood"==r&&(m=8),p=h$1(InputDropdown,{value:m,items:g,useClickCatcher:!0,class:"-filter-category",selfManaged:!1}));var m=null,g=null;return u&&n&&(i=[[1,h$1("div",null,h$1(SVGIcon,null,"ticket"),h$1("div",null,"Smart")),h$1(NavLink,{href:i+"smart"+f,class:"-click-catcher"})],[2,h$1("div",null,h$1(SVGIcon,null,"ticket"),h$1("div",null,"Classic")),h$1(NavLink,{href:i+"classic"+f,class:"-click-catcher"})],[3,h$1("div",null,h$1(SVGIcon,null,"help"),h$1("div",null,"Danger")),h$1(NavLink,{href:i+"danger"+f,class:"-click-catcher"})],[4,h$1("div",null,h$1(SVGIcon,null,"gift"),h$1("div",null,"Zero")),h$1(NavLink,{href:i+"zero"+f,class:"-click-catcher"})],[5,h$1("div",null,h$1(SVGIcon,null,"bubbles"),h$1("div",null,"Feedback")),h$1(NavLink,{href:i+"feedback"+f,class:"-click-catcher"})],[6,h$1("div",null,h$1(SVGIcon,null,"todo"),h$1("div",null,"Grade")),h$1(NavLink,{href:i+"grade"+f,class:"-click-catcher"})]],f=1,"classic"==r?f=2:"danger"==r?f=3:"zero"==r?f=4:"feedback"==r?f=5:"grade"==r&&(f=6),g=h$1(ContentCommonBody,null,FilterDesc[r]),m=h$1(InputDropdown,{value:f,items:i,useClickCatcher:!0,class:"-filter-event",selfManaged:!1})),h$1(ContentCommon,{node:o,class:"filter-item filter-game"},e,d,p,m,g)},e}(Component),$Tag={Get:Get,GetFresh:GetFresh,GetAll:GetAll,GetContains:GetContains},TAG_CACHE={};function _Cache(e,t){e&&(TAG_CACHE["_"+e]=t)}function _Exists(e){return!!TAG_CACHE["_"+e]}function _Get(e){return TAG_CACHE["_"+e]}function GetContains(e){return pattern=new RegExp(e.match(/^#?(.+)/)[1],"i"),GetAll().then(function(e){var t=Object.assign({},e);return t.tag=[],e.tag.forEach(function(e){e.name.match(pattern)&&t.tag.push(e)}),Promise.resolve(t)})}function GetAll(){return Get("all")}function Get(e){return _Exists(e)?Promise.resolve(_Get(e)):GetFresh(e)}function GetFresh(t){return Fetch$2.Get(API_ENDPOINT+"/vx/tag/get/"+t).then(function(e){return e.tag&&_Cache(t,e),e})}h$1("p",null,"Start typing platform names, genres, and other details. A list of choices will appear below. Push ",h$1("strong",null,"ENTER")," to add the item."),h$1("p",null,h$1("strong",null,"Featured Event:")," Items from the currently active event."),h$1("p",null,h$1("strong",null,"All Events:")," Items from all events."),h$1("p",null,h$1("strong",null,"Jam:")," Things created for the 72 hour ",h$1("strong",null,"Jam")," event."),h$1("p",null,h$1("strong",null,"Compo:")," Things created for the 48 hour ",h$1("strong",null,"Compo")," event."),h$1("p",null,h$1("strong",null,"Craft:")," Things created for the ",h$1("strong",null,"Craft")," event, or things impractical to rate by normal means."),h$1("p",null,h$1("strong",null,"Extra:")," Things created after the event."),h$1("p",null,h$1("strong",null,"Unfinished:")," Unfinished things from any event."),h$1("p",null,h$1("strong",null,"Warmup:")," Things created in preparation for an event."),h$1("p",null,h$1("strong",null,"Release:")," Things created after the event, based on something created for the event."),h$1("p",null,h$1("strong",null,"Smart"),": This is the modern balancing filter. It balances the list using a combination of votes and the karma given to feedback. You start seeing diminishing returns after 50 ratings, but you can make up for it by leaving quality feedback."),h$1("p",null,h$1("strong",null,"Unbound"),": This is a variation of the Smart filter that is unbound. For curiousity."),h$1("p",null,h$1("strong",null,"Classic"),": This is the classic balancing filter. It balances the list based on ratings alone. You start seeing diminishing returns after 100 ratings."),h$1("p",null,h$1("strong",null,"Danger"),": This is the rescue filter. Everything with less than 20 ratings sorted top to bottom. Items on the first page are typically 1-2 rating away, so help them out!"),h$1("p",null,h$1("strong",null,"Zero"),": This filter shows the most neglected games. These are often new users that didn't understand you should rate games. Leaving them some feedback is greatly appreciated."),h$1("p",null,h$1("strong",null,"Feedback"),": This filter lets you find who is working the hardest, leaving quality feedback for others."),h$1("p",null,h$1("strong",null,"Grade"),": This filter lets you find the games that have the most ratings.");var PageHomeGames=function(t){function e(e){t.call(this,e),this.state={gamesFilter:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=this,o=e.node,i=e.user,r=e.path,a=e.extra,s=e.featured,l=t.gamesFilter,c="smart";function h(e){var t={all:"compo+jam+extra+craft+release",classic:"cool"};return t[e]||e}var u=[],f=c,d="all",e=s&&5<=s.meta["event-mode"]?"featured":"everything";if(3<a.length&&(e=a[3]),2<a.length&&(d=a[2]),-1==(f=1<a.length?a[1]:f).indexOf("-"))switch(f){case"smart":case"classic":case"cool":case"danger":case"grade":case"feedback":u=[h(f)];break;case"zero":u=["grade","reverse"];break;case"jam":case"compo":case"extra":case"craft":case"late":case"release":case"unfinished":d=f,u=[h(c)];break;default:u=["null"]}else d=f.split("-"),u=[h(c)];t=null,t=h$1(GamesFilter,{Filter:f,SubFilter:d,SubSubFilter:e,Path:this.props.path+"/games/",node:o,onchangefilter:function(e){n.setState({gamesFilter:e})},showFeatured:!0,showEvent:!0,showRatingSort:!0,showRatingSortDesc:!0});"featured"==e&&(u.push("parent"),o=s);d=h(d);return h$1(ContentList,{class:"page-home-games"},t,null,h$1(ContentGames,{node:o,user:i,path:r,extra:a,methods:u,subsubtypes:d||null,filter:l}))},e}(Component),PageRootExplore$1=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return e.node,e.user,e.path,e.extra,h$1("div",null,h$1("div",null,"No tools (yet)"))},t}(Component),PageRootExplore=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return e.node,e.user,e.path,e.extra,h$1("div",null,h$1("div",null,"No communities (yet)"))},t}(Component),PageRootSearch=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return e.node,e.user,e.path,e.extra,h$1("div",null,"Coming soon")},t}(Component),PageMyHome=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(){return h$1("div",{id:"content"},h$1("div",null,"Me/My/Self landing page goes here"),h$1("br",null),h$1("div",null,"Click the tabs above to browse (though only notifications work)"))},t}(Component),PageMySettings=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(){return h$1("div",{id:"content"},h$1("strong",null,"TODO:")," Settings")},t}(Component),PageMyStats=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(){return h$1("div",{id:"content"},h$1("strong",null,"TODO:")," Stats")},t}(Component),UICheckbox=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=(e.radio?"radio":"checkbox")+(e.value?"-checked":"-unchecked");return h$1(UIButtonDiv,{class:cN("ui-checkbox",e.class),onclick:e.onclick,title:e.tooltip},h$1(UIIcon,{src:t}),h$1("span",{class:"-text"},e.children))},t}(Component),NotificationsFilter=function(t){function e(e){t.call(this,e),this.onToggleComments=function(){return e.handleFilterChange("Comment")},this.onToggleMention=function(){return e.handleFilterChange("Mention")},this.onToggleFeedback=function(){return e.handleFilterChange("Feedback")},this.onToggleFriendPost=function(){return e.handleFilterChange("FriendPost")},this.onToggleFriendGame=function(){return e.handleFilterChange("FriendGame")},this.onToggleOther=function(){return e.handleFilterChange("Other")}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.filters,o=n.Comment,i=n.Feedback,r=n.FriendGame,a=n.FriendPost,s=n.Mention,l=n.Other,c=e.notifications,h=null;!1===o&&(h=" ("+c.filter(function(e){return isNotificationComment(e)}).length+")");var u=null;!1===i&&(u=" ("+c.filter(function(e){return isNotificationFeedback(e)}).length+")");var f=null;!1===s&&(f=" ("+c.filter(function(e){return isNotificationMention(e)}).length+")");var d=null;!1===a&&(d=" ("+c.filter(function(e){return isNotificationFriendPost(e)}).length+")");n=null;!1===r&&(n=" ("+c.filter(function(e){return isNotificationFriendGame(e)}).length+")");e=null;return!1===l&&(e=" ("+c.filter(function(e){return isNotificationOther(e)}).length+")"),h$1("div",null,h$1(UICheckbox,{class:"-filter",value:!1!==s,onclick:this.onToggleMention},h$1(SVGIcon,null,"at"),h$1("span",null,"Mentions",f)),h$1(UICheckbox,{class:"-filter",value:!1!==i,onclick:this.onToggleFeedback},h$1(SVGIcon,null,"bubble-empty"),h$1("span",null,"Feedback",u)),h$1(UICheckbox,{class:"-filter",value:!1!==o,onclick:this.onToggleComments},h$1(SVGIcon,null,"bubble"),h$1("span",null,"Comments",h)),h$1(UICheckbox,{class:"-filter",value:!1!==r,onclick:this.onToggleFriendGame},h$1(SVGIcon,null,"gamepad"),h$1("span",null,"Friend's games",n)),h$1(UICheckbox,{class:"-filter",value:!1!==a,onclick:this.onToggleFriendPost},h$1(SVGIcon,null,"feed"),h$1("span",null,"Friend's posts",d)),h$1(UICheckbox,{class:"-filter",value:!1!==l,onclick:this.onToggleOther},h$1(SVGIcon,null,"question"),h$1("span",null,"Other",e)))},e}(Component),NotificationsFeed=function(t){function e(e){t.call(this,e),this.state={errorStatus:0,maxReadId:0,offset:0,limit:40,count:0,notifications:null,notificationIds:[],status:null,highestRead:-1},this.fetchMore=this.fetchMore.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this;$Notification.GetFeedAll(this.state.offset,this.state.limit).then(function(e){200==e.status?t.processNotificationFeed(e):t.setState({errorStatus:e.status})})},e.prototype.fetchMore=function(){var t=this,n=this.state.offset+this.state.limit;$Notification.GetFeedAll(n,this.state.limit).then(function(e){200==e.status?(t.processNotificationFeed(e),t.setState({offset:n})):t.setState({errorStatus:e.status})})},e.prototype.render=function(e,t){var n=this,o=t.highestRead,i=null===t.status||this.isLoading(),r=!i&&t.offset+this.state.limit<t.count,a=this.getHighestNotificationInFeed()>o,s=[],l=t.notifications,c=this.getNotificationsOrder(),h=[];c.forEach(function(e){var t=l.get(e);h.push(t),n.shouldShowNotification(t)&&s.push(h$1(NotificationItem,{notification:t,class:cN("-item -notification",t.notification[0].id>o?"-new-comment":""),id:"notification-"+e}))}),0==s.length&&s.push(h$1("div",null,"There are no notifications here. You'll get notifications when other people reply to posts you've made or commented on."));c=r?h$1(ContentMore,{onclick:this.fetchMore}):null,r=a?h$1(ButtonBase,{class:"-button -light focusable",id:"button-mark-read",onclick:function(e){n.markReadHighest()}},"Mark all notifications as read"):null,a=i?h$1(NavSpinner,null):null,i=t.errorStatus?h$1("div",{class:"-error"},"Error code ",t.errorStatus," while fetching notifications"):null,t=$Notification.GetFilters(),a=h$1("div",{class:"-notifications"},h$1(NotificationsFilter,{handleFilterChange:this.handleFilterChange,filters:t,notifications:h}),r,i,s,c,a);return h$1(ContentSimple,Object.assign({},{class:"content-notifications"},e,{notitle:!0,nofooter:!0,nomarkup:!0,viewonly:a,flag:"NOTIFICATIONS",flagIcon:"bubble"}))},e}(NotificationsBase),PageMyNotifications=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){return h$1("div",{id:"content"},h$1(NotificationsFeed,e))},t}(Component),ContentPalette=function(t){function e(e){t.call(this,e),this.ColorVariants=[h$1("div",{class:"-col-a"},"A"),h$1("div",{class:"-col-ab"},"AB"),h$1("div",{class:"-col-b"},"B"),h$1("div",{class:"-col-bc"},"BC"),h$1("div",{class:"-col-c"},"C"),h$1("div",{class:"-col-ca"},"CA"),h$1("div",{class:"-col-n"},"N"),h$1("div",{class:"-col-am"},"AM"),h$1("div",{class:"-col-abm"},"ABM"),h$1("div",{class:"-col-bm"},"BM"),h$1("div",{class:"-col-bcm"},"BCM"),h$1("div",{class:"-col-cm"},"CM"),h$1("div",{class:"-col-cam"},"CAM"),h$1("div",{class:"-col-l"},"L"),h$1("div",{class:"-col-w"},"W"),h$1("div",{class:"-col-g"},"G"),h$1("div",{class:"-col-k"},"K"),h$1("div",{class:"-col-d"},"D"),h$1("div",{class:"-col-m"},"M")],this.BGVariants=[h$1("div",{class:"-bg-a"},"A"),h$1("div",{class:"-bg-ab"},"AB"),h$1("div",{class:"-bg-b"},"B"),h$1("div",{class:"-bg-bc"},"BC"),h$1("div",{class:"-bg-c"},"C"),h$1("div",{class:"-bg-ca"},"CA"),h$1("div",{class:"-bg-n"},"N"),h$1("div",{class:"-bg-am"},"AM"),h$1("div",{class:"-bg-abm"},"ABM"),h$1("div",{class:"-bg-bm"},"BM"),h$1("div",{class:"-bg-bcm"},"BCM"),h$1("div",{class:"-bg-cm"},"CM"),h$1("div",{class:"-bg-cam"},"CAM"),h$1("div",{class:"-bg-l"},"L"),h$1("div",{class:"-bg-w"},"W"),h$1("div",{class:"-bg-g"},"G"),h$1("div",{class:"-bg-k"},"K"),h$1("div",{class:"-bg-d"},"D"),h$1("div",{class:"-bg-m"},"M")],this.ColorPerception=[h$1("div",{class:"-col-ag"},"A"),h$1("div",{class:"-col-abg"},"AB"),h$1("div",{class:"-col-bg"},"B"),h$1("div",{class:"-col-bcg"},"BC"),h$1("div",{class:"-col-cg"},"C"),h$1("div",{class:"-col-cag"},"CA"),h$1("div",{class:"-col-amg"},"AM"),h$1("div",{class:"-col-abmg"},"ABM"),h$1("div",{class:"-col-bmg"},"BM"),h$1("div",{class:"-col-bcmg"},"BCM"),h$1("div",{class:"-col-cmg"},"CM"),h$1("div",{class:"-col-camg"},"CAM"),h$1("div",{class:"-col-ndddddg"},"5"),h$1("div",{class:"-col-nddddg"},"4"),h$1("div",{class:"-col-ndddg"},"3"),h$1("div",{class:"-col-nddg"},"2"),h$1("div",{class:"-col-ndg"},"1"),h$1("div",{class:"-col-ng"},"0"),h$1("div",{class:"-col-nlg"},"1"),h$1("div",{class:"-col-nllg"},"2"),h$1("div",{class:"-col-nlllg"},"3"),h$1("div",{class:"-col-nllllg"},"4"),h$1("div",{class:"-col-nlllllg"},"5")],this.BGPerception=[h$1("div",{class:"-bg-ag"},"A"),h$1("div",{class:"-bg-abg"},"AB"),h$1("div",{class:"-bg-bg"},"B"),h$1("div",{class:"-bg-bcg"},"BC"),h$1("div",{class:"-bg-cg"},"C"),h$1("div",{class:"-bg-cag"},"CA"),h$1("div",{class:"-bg-amg"},"AM"),h$1("div",{class:"-bg-abmg"},"ABM"),h$1("div",{class:"-bg-bmg"},"BM"),h$1("div",{class:"-bg-bcmg"},"BCM"),h$1("div",{class:"-bg-cmg"},"CM"),h$1("div",{class:"-bg-camg"},"CAM"),h$1("div",{class:"-bg-ndddddg"},"5"),h$1("div",{class:"-bg-nddddg"},"4"),h$1("div",{class:"-bg-ndddg"},"3"),h$1("div",{class:"-bg-nddg"},"2"),h$1("div",{class:"-bg-ndg"},"1"),h$1("div",{class:"-bg-ng"},"0"),h$1("div",{class:"-bg-nlg"},"1"),h$1("div",{class:"-bg-nllg"},"2"),h$1("div",{class:"-bg-nlllg"},"3"),h$1("div",{class:"-bg-nllllg"},"4"),h$1("div",{class:"-bg-nlllllg"},"5")]}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.genBGRow=function(e){return h$1("div",{class:"-bg-"+e},h$1("div",null,"COL_",e.toUpperCase()),h$1("div",{class:"-bg-"+e+"g"},"PG"),this.ColorVariants)},e.prototype.genColorRow=function(e){return h$1("div",{class:"-col-"+e},h$1("div",null,"COL_",e.toUpperCase()),h$1("div",{class:"-col-"+e+"g"},"PG"),this.BGVariants)},e.prototype.genBGPRow=function(e){return h$1("div",{class:"-bg-"+e},h$1("div",null,"COL_",e.toUpperCase()),this.ColorPerception)},e.prototype.genColorPRow=function(e){return h$1("div",{class:"-col-"+e},h$1("div",null,"COL_",e.toUpperCase()),this.BGPerception)},e.prototype.genBGPRowG=function(e){return h$1("div",{class:"-bg-"+e+"g"},h$1("div",{class:"-bg-"+e},"COL_",e.toUpperCase()),this.ColorPerception)},e.prototype.genColorPRowG=function(e){return h$1("div",{class:"-col-"+e+"g"},h$1("div",{class:"-col-"+e},"COL_",e.toUpperCase()),this.BGPerception)},e.prototype.render=function(e,t){return h$1("div",{class:"content-base content-palette"},h$1("h1",null,"Standard Colors"),h$1("div",{class:"palette"},this.genBGRow("a"),this.genBGRow("ab"),this.genBGRow("b"),this.genBGRow("bc"),this.genBGRow("c"),this.genBGRow("ca"),this.genBGRow("n"),this.genColorRow("a"),this.genColorRow("ab"),this.genColorRow("b"),this.genColorRow("bc"),this.genColorRow("c"),this.genColorRow("ca"),this.genColorRow("n")),h$1("h1",null,"Mute Colors"),h$1("div",{class:"palette"},this.genBGRow("am"),this.genBGRow("abm"),this.genBGRow("bm"),this.genBGRow("bcm"),this.genBGRow("cm"),this.genBGRow("cam"),this.genColorRow("am"),this.genColorRow("abm"),this.genColorRow("bm"),this.genColorRow("bcm"),this.genColorRow("cm"),this.genColorRow("cam")),h$1("h1",null,"Relative Neutral Colors"),h$1("div",{class:"palette"},this.genBGRow("nddddd"),this.genBGRow("ndddd"),this.genBGRow("nddd"),this.genBGRow("ndd"),this.genBGRow("nd"),this.genBGRow("n"),this.genBGRow("nl"),this.genBGRow("nll"),this.genBGRow("nlll"),this.genBGRow("nllll"),this.genBGRow("nlllll"),this.genColorRow("nddddd"),this.genColorRow("ndddd"),this.genColorRow("nddd"),this.genColorRow("ndd"),this.genColorRow("nd"),this.genColorRow("n"),this.genColorRow("nl"),this.genColorRow("nll"),this.genColorRow("nlll"),this.genColorRow("nllll"),this.genColorRow("nlllll")),h$1("h1",null,"Color vs. Perception"),h$1("div",{class:"palette"},this.genBGPRow("a"),this.genBGPRow("ab"),this.genBGPRow("b"),this.genBGPRow("bc"),this.genBGPRow("c"),this.genBGPRow("ca"),this.genColorPRow("a"),this.genColorPRow("ab"),this.genColorPRow("b"),this.genColorPRow("bc"),this.genColorPRow("c"),this.genColorPRow("ca"),this.genBGPRow("am"),this.genBGPRow("abm"),this.genBGPRow("bm"),this.genBGPRow("bcm"),this.genBGPRow("cm"),this.genBGPRow("cam"),this.genColorPRow("am"),this.genColorPRow("abm"),this.genColorPRow("bm"),this.genColorPRow("bcm"),this.genColorPRow("cm"),this.genColorPRow("cam"),this.genBGPRow("nddddd"),this.genBGPRow("ndddd"),this.genBGPRow("nddd"),this.genBGPRow("ndd"),this.genBGPRow("nd"),this.genBGPRow("n"),this.genBGPRow("nl"),this.genBGPRow("nll"),this.genBGPRow("nlll"),this.genBGPRow("nllll"),this.genBGPRow("nlllll"),this.genColorPRow("nddddd"),this.genColorPRow("ndddd"),this.genColorPRow("nddd"),this.genColorPRow("ndd"),this.genColorPRow("nd"),this.genColorPRow("n"),this.genColorPRow("nl"),this.genColorPRow("nll"),this.genColorPRow("nlll"),this.genColorPRow("nllll"),this.genColorPRow("nlllll")),h$1("h1",null,"Perception vs. Perception"),h$1("div",{class:"palette"},this.genBGPRowG("a"),this.genBGPRowG("ab"),this.genBGPRowG("b"),this.genBGPRowG("bc"),this.genBGPRowG("c"),this.genBGPRowG("ca"),this.genColorPRowG("a"),this.genColorPRowG("ab"),this.genColorPRowG("b"),this.genColorPRowG("bc"),this.genColorPRowG("c"),this.genColorPRowG("ca"),this.genBGPRowG("am"),this.genBGPRowG("abm"),this.genBGPRowG("bm"),this.genBGPRowG("bcm"),this.genBGPRowG("cm"),this.genBGPRowG("cam"),this.genColorPRowG("am"),this.genColorPRowG("abm"),this.genColorPRowG("bm"),this.genColorPRowG("bcm"),this.genColorPRowG("cm"),this.genColorPRowG("cam"),this.genBGPRowG("nddddd"),this.genBGPRowG("ndddd"),this.genBGPRowG("nddd"),this.genBGPRowG("ndd"),this.genBGPRowG("nd"),this.genBGPRowG("n"),this.genBGPRowG("nl"),this.genBGPRowG("nll"),this.genBGPRowG("nlll"),this.genBGPRowG("nllll"),this.genBGPRowG("nlllll"),this.genColorPRowG("nddddd"),this.genColorPRowG("ndddd"),this.genColorPRowG("nddd"),this.genColorPRowG("ndd"),this.genColorPRowG("nd"),this.genColorPRowG("n"),this.genColorPRowG("nl"),this.genColorPRowG("nll"),this.genColorPRowG("nlll"),this.genColorPRowG("nllll"),this.genColorPRowG("nlllll")))},e}(Component),PageDevPalette=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(){return h$1("div",{id:"content"},h$1(ContentPalette,null))},t}(Component),HeaderNoob=function(t){function e(e){t.call(this,e),this.state={hidden:!1},this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){this.setState({hidden:!0})},e.prototype.render=function(e,t){return t.hidden?null:h$1("div",{class:"content-base content-common content-simple content-noob"},h$1("div",{class:"-close",onclick:this.onClick},h$1(SVGIcon,null,"cross")),h$1("div",{class:"-title -gap _font2"},"What is Ludum Dare?"),h$1("div",null,h$1(NavLink,{href:"/about"},h$1("strong",null,"Ludum Dare"))," is an online event where games are made from scratch in a weekend. Check us out every April and October!"))},e}(Component),PageRoot=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){e.node;var t=e.user,n=e.path,o=e.extra,i=e.featured,r=h$1("div",null),a=null;t&&t.id||(a=h$1(HeaderNoob,{featured:i}));var s=null;return i&&i.id&&(s=t&&t.id&&i.focus_id?h$1(ContentHeadlinerEvent,{node:i,name:"event",icon:"trophy",flagclass:"-col-ab",childclass:"-col-a -inv-lit",style:"--headlinerSize: 2.5rem;"}):h$1(ContentEvent,{node:i,user:t,path:n,extra:o,featured:i})),h$1(ContentList,{class:"page-root"},a,s,h$1(PageNavRoot,e),h$1(Router,{node:e.node,props:e,name:"root"},h$1(Route,{static:!0,path:"/",default:!0,component:PageRootHome}),h$1(Route,{static:!0,path:"/my",component:PageMyHome},h$1(Route,{static:!0,path:"/notifications",component:PageMyNotifications}),h$1(Route,{static:!0,path:"/stats",component:PageMyStats}),h$1(Route,{static:!0,path:"/settings",component:PageMySettings})),h$1(Route,{static:!0,path:"/dev"},h$1(Route,{static:!0,path:"/palette",component:PageDevPalette})),h$1(Route,{static:!0,path:"/news",component:PageRootFeedNews}),h$1(Route,{static:!0,path:"/feed",component:PageRootFeed}),h$1(Route,{static:!0,path:"/feed/news",component:PageRootFeedNews}),h$1(Route,{static:!0,path:"/feed/hot",component:r}),h$1(Route,{static:!0,path:"/games/:filter?/:subfilter?/:target?",component:PageHomeGames}),h$1(Route,{static:!0,path:"/explore",component:PageRootExplore$2}),h$1(Route,{static:!0,path:"/tools",component:PageRootExplore$1}),h$1(Route,{static:!0,path:"/communities",component:PageRootExplore}),h$1(Route,{static:!0,path:"/search",component:PageRootSearch}),h$1(Route,{type:"error",component:ContentError})))},t}(Component),PagePage=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,e=e.extra;return h$1("div",{id:"content"},h$1(ContentPost,{node:n,user:o,path:i,extra:e,updated:!0}))},t}(Component),PageNavContent=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.parent,o=e.superparent;e.author;var i=e.user,r=e.path,a=e.extra;if(!t)return null;var s=a&&a.length?"/"+a.join("/"):"";(s=s||"/").split("/",2).join("/");var l=[];l.push(h$1(ContentNavButton,{path:r+s,title:"Go Back",icon:"previous",href:"/"})),i&&i.id;e="Event",a=r+"/";"event"==t.type?(e=t.name,a=t.path):n&&"event"==n.type?(e=n.name,a=n.path):o&&"event"==o.type&&(e=o.name,a=o.path);i="Game",o=r+"/";return"item"==t.type?(i=t.name||"Untitled",o=t.path):n&&"item"==n.type&&(i=n.name||"Untitled",o=n.path),console.log(r,s,o),l.push(h$1(ContentNavButton,{path:r+s,title:e,light:!0,icon:"trophy",href:a},e)),l.push(h$1(ContentNavButton,{path:r+s,title:"Games",light:!0,icon:"gamepad",href:a+"/games"},"Games")),l.push(h$1(ContentNavButton,{path:r+("/"==s?"":s),title:i,icon:"gamepad",href:o},i)),h$1("div",{class:"content-base content-nav"},l)},t}(Component),MAX_LENGTH=4096,ContentCommentsMarkup=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e){return shallowDiff(this.props,e)},e.prototype.isCommentingOnOwnPost=function(){var e=this.props,t=e.node,e=e.user;return t&&e&&(t.author==e.id||t.meta&&t.meta.authors&&-1<t.meta.authors.indexOf(e.id))},e.prototype.postIsAnItem=function(){return"item"==this.props.node.type},e.prototype.checkSelfLinking=function(){var n=this;if(this.postIsAnItem()&&!this.isCommentingOnOwnPost()){var o=this.props.children.join(""),e=this.props.user,e=e&&e.private&&e.private.refs?e.private.refs.author:null;if(e&&0<e.length)return $Node.Get(e).then(function(e){var t=!1;e.node.forEach(function(e){t||-1==o.indexOf(e.path)||(n.setState({warnSelfLinking:"Asking others to play your game is highly discouraged. To get ratings and feedback, play games and leave feedback. Also, give a like to any good feedback you see. This website rewards good community behavior with improved visibility. If we catch you abusing it, it can punish too."}),t=!0)}),t||n.setState({warnSelfLinking:null})})}return Promise.resolve()},e.prototype.render=function(e,t){var n=this,o=[],i=e.children.join("");if(e.editing){var r=[],t=t.warnSelfLinking,a=e.limit||MAX_LENGTH;return a===i.length&&r.push(h$1("div",{key:"limit"},"You have reached the maximum comment length. If you want to write more, consider making it two comments.")),t&&r.push(h$1("div",{key:"self-link"},t)),h$1("div",{class:cN(o,e.class)},h$1("div",{class:"-label"},e.label),h$1(InputTextarea,{user:e.user,value:i,onmodify:e.onmodify,onkeydown:e.onkeydown,onkeyup:e.onkeyup,onblur:e.onblur,onfocus:e.onfocus,oncaret:e.oncaret,placeholder:e.placeholder,replaceText:e.replaceText,replaceTextEvent:e.replaceTextEvent,cursorPos:e.cursorPos,ref:function(e){n.textarea=e},maxlength:a}),0<r.length&&h$1("div",{class:"-helparea"},r))}o.push("-markup"),o.push("markup");a=new marked,r={highlight:function(e,t){var n=Prism.languages.clike;return Prism.languages[t]&&(n=Prism.languages[t]),Prism.highlight(e,n)},sanitize:!0,smartypants:!0,langPrefix:"language-"};return markdown=a.parse(i,r),h$1("div",{class:cN(o,e.class)},markdown)},e.prototype.componentDidUpdate=function(){this.checkSelfLinking()},e}(Component),$CommentLove={GetMy:GetMy$1,Add:Add$1,Remove:Remove$1};function GetMy$1(e){return Fetch$2.Get(API_ENDPOINT+"/vx/comment/love/getmy/"+e,!0)}function Add$1(e,t){return Fetch$2.Get(API_ENDPOINT+"/vx/comment/love/add/"+t,!0)}function Remove$1(e,t){return Fetch$2.Get(API_ENDPOINT+"/vx/comment/love/remove/"+t,!0)}var ContentCommentsComment=function(t){function e(e){t.call(this,e),this.state={editing:!!e.editing,preview:!e.editing,modified:!1,original:e.comment.body,loved:!!e.comment.loved,lovecount:e.comment.love},this.autocompleters={},this.onEditing=this.onEditing.bind(this),this.onPreview=this.onPreview.bind(this),this.onModify=this.onModify.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.onEdit=this.onEdit.bind(this),this.onSave=this.onSave.bind(this),this.onCancel=this.onCancel.bind(this),this.onToggleAnon=this.onToggleAnon.bind(this),this.onPublish=this.onPublish.bind(this),this.onLove=this.onLove.bind(this),this.onReply=this.onReply.bind(this),this.onSubscribe=this.onSubscribe.bind(this),this.onTextAreaBlur=this.onTextAreaBlur.bind(this),this.onTextAreaFocus=this.onTextAreaFocus.bind(this),this.onTextAreaCaret=this.onTextAreaCaret.bind(this),this.onAutocompleteSelect=this.onAutocompleteSelect.bind(this),this.onAutoselectCaptureKeyDown=this.onAutoselectCaptureKeyDown.bind(this),this.onAutoselectCaptureKeyUp=this.onAutoselectCaptureKeyUp.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentWillUpdate=function(e,t){!t.preview||!this.state.preview||e.comment.body===this.props.comment.body||e.comment.body&&0!==e.comment.body.length||this.setState({preview:!1})},e.prototype.onEditing=function(e){this.setState({preview:!1})},e.prototype.onPreview=function(e){this.setState({preview:!0})},e.prototype.canSave=function(){return 1<this.props.comment.body.trim().length},e.prototype.onModify=function(e){return this.props.comment.body=e.target.value,this.setState({modified:this.canSave(),editText:e.target.value,editCursorPos:e.target.selectionStart,replaceText:null,textareaFocus:!0}),!0},e.prototype.onKeyDown=function(e){var t,n=this.autocompleters;for(t in n){var o=n[t];if(o.captureKeyDown&&!o.captureKeyDown(e))return!1}return!0},e.prototype.onKeyUp=function(e){var t,n=this.autocompleters;for(t in n){var o=n[t];if(o.captureKeyUp&&!o.captureKeyUp(e))return!1}return!0},e.prototype.onTextAreaFocus=function(e){return this.setState({textareaFocus:!0}),!0},e.prototype.onTextAreaBlur=function(e){var t=this;return setTimeout(function(){return t.setState({textareaFocus:!1})},300),!0},e.prototype.onTextAreaCaret=function(e){return this.setState({editCursorPos:e.target.selectionStart}),!0},e.prototype.onCancel=function(e){this.props.comment.body=this.state.original,this.setState({modified:!1,editing:!1,preview:!1})},e.prototype.onSave=function(e){var t=this,n=this.props.comment;$Comment.Update(n.id,n.node,n.body).then(function(e){console.log(e),t.setState({modified:!1,editing:!1,preview:!1,original:t.props.comment.body})}).catch(function(e){t.setState({error:e})})},e.prototype.onToggleAnon=function(){this.setState({publishAnon:!this.state.publishAnon})},e.prototype.onPublish=function(e){this.canSave()&&(this.state.publishAnon?this.props.onpublish&&this.props.onpublish(e,!0):this.props.onpublish&&this.props.onpublish(e))},e.prototype.onEdit=function(e){this.setState({editing:!0,preview:!1})},e.prototype.onLove=function(e){var t=this;0!=this.props.user.id&&null!=this.props.user.id&&null!=this.props.comment.id&&(this.state.loved?$CommentLove.Remove(this.props.comment.node,this.props.comment.id).then(function(e){0!=e.removed&&t.setState({loved:!1,lovecount:t.state.lovecount-1})}):$CommentLove.Add(this.props.comment.node,this.props.comment.id).then(function(e){0!=e.id&&t.setState({loved:!0,lovecount:t.state.lovecount+1})}))},e.prototype.onReply=function(e){console.log("reply")},e.prototype.onSubscribe=function(e){this.props.onsubscribe&&this.props.onsubscribe(e,this.props.cansubscribe)},e.prototype.onAutocompleteSelect=function(e,t){this.props.comment.body=e,this.setState({modified:this.canSave(),editText:e,replaceText:e,replaceCursorPos:t,replaceTextEvent:this.state.replaceTextEvent?this.state.replaceTextEvent+1:1})},e.prototype.onAutoselectCaptureKeyDown=function(e,t){var n=this.autocompleters;n[e]||(n[e]={}),n[e].captureKeyDown=t},e.prototype.onAutoselectCaptureKeyUp=function(e,t){var n=this.autocompleters;n[e]||(n[e]={}),n[e].captureKeyUp=t},e.prototype.render=function(e,t){var n=e.user,o=e.comment,i=e.author,r=e.error,a=e.node,s=e.isNodeAuthor,l=e.isMyComment,c=e.isMention;if(!o||!i&&0!=o.author)return h$1("div",{class:"-item -comment -indent-"+e.indent},h$1("div",{class:"-body"},"There was a problem with this node"));var h="Anonymous",u="///other/dummy/user64.png";i&&(h=i.name,i.meta["real-name"]&&(h=i.meta["real-name"]),i.meta.avatar&&(u=i.meta.avatar+".64x64.fit.png"));var f,d=[];t.editing&&!t.preview||(f=new Date(o.created),m=new Date(o.modified),p=(new Date).getTime()-f.getTime(),g=6e4<m.getTime()-f.getTime(),d.push(h$1("span",null,"by ",h$1("span",{class:"-author"},h))),i&&d.push(h$1("span",null,"(",h$1(NavLink,{class:"-atname",href:"/users/"+i.slug},"@"+i.slug),")",o.anonymous?" (Published Anonymously)":"")),o.created?d.push(h$1("span",null,", ",h$1("span",{title:o.id},"published")," ",h$1("span",{class:"-date",title:getLocaleTimeStamp(f)},getRoughAge(p)),h$1("span",{title:getLocaleDate(m)},g?" (edited)":""))):d.push(h$1("span",null,", not yet published")));var p=null;n&&o&&0<o.author&&o.author===n.id&&!t.editing&&(p=h$1("div",{class:"-button -edit",onclick:this.onEdit},h$1(SVGIcon,null,"edit")));var m=null;e.nolove||(m=h$1("div",{class:"-button -love"+(t.loved?" -loved":""),onclick:this.onLove},h$1(SVGIcon,{class:"-hover-hide"},"heart"),h$1(SVGIcon,{class:"-hover-show -loved-hide"},"heart-plus"),h$1(SVGIcon,{class:"-hover-show -loved-show"},"heart-minus"),h$1("div",null,Number.isInteger(t.lovecount)?t.lovecount:o.love)));var g=null,g=h$1("div",{class:"-nav"},h$1("div",{class:"-right"},m,p),h$1("div",{class:"-left"},null)),m=null;t.editing&&(v=[],v=t.preview?[h$1("div",{class:"-button -preview -selected"},h$1(SVGIcon,null,"preview"),h$1("div",{class:"if-sidebar-block"},"Preview")),h$1("div",{class:"-button -editing",onclick:this.onEditing},h$1(SVGIcon,null,"edit"),h$1("div",{class:"if-sidebar-block"},"Edit"))]:[h$1("div",{class:"-button -preview",onclick:this.onPreview},h$1(SVGIcon,null,"preview"),h$1("div",{class:"if-sidebar-block"},"Preview")),h$1("div",{class:"-button -editing -selected"},h$1(SVGIcon,null,"edit"),h$1("div",{class:"if-sidebar-block"},"Edit"))],(p=[]).push(h$1(UICheckbox,{onclick:this.onSubscribe,value:e.subscribed,tooltip:"You always receive notifications for mentions"},"Receive notifications")),e.publish?(e.allowAnonymous&&p.push(h$1(UICheckbox,{onclick:this.onToggleAnon,value:t.publishAnon,tooltip:"NOTE: Your identity is always available to the administrators."},"Anonymous")),p.push(h$1("div",{class:"-button -publish"+(t.modified?" -modified":""),onclick:this.onPublish},h$1(SVGIcon,null,"publish"),h$1("div",null,"Publish")))):(p.push(h$1("div",{class:"-button -cancel",onclick:this.onCancel},h$1(SVGIcon,null,"cross"),h$1("div",{class:"if-sidebar-block"},"Cancel"))),p.push(h$1("div",{class:"-button -save"+(t.modified?" -modified":""),onclick:this.onSave},h$1(SVGIcon,null,"save"),h$1("div",null,"Save")))),m=h$1("div",{class:"-nav"},h$1("div",{class:"-right"},p),h$1("div",{class:"-left"},v)));var v=null;r&&(v=h$1("div",{class:"-error"},"Failed to post comment: "+r));r=null,r=i?h$1(ButtonLink,{class:"-avatar",href:i.path},h$1(IMG,{alt:i.slug+"'s avatar image",src:u})):h$1("div",{class:"-avatar"},h$1(IMG,{src:u})),i=h$1(AutocompleteAtNames,{text:t.editText,cursorPos:t.editCursorPos,authors:e.authors,textareaFocus:t.textareaFocus,onSelect:this.onAutocompleteSelect,captureKeyDown:this.onAutoselectCaptureKeyDown,captureKeyUp:this.onAutoselectCaptureKeyUp}),u=h$1(AutocompleteEmojis,{text:t.editText,cursorPos:t.editCursorPos,textareaFocus:t.textareaFocus,onSelect:this.onAutocompleteSelect,captureKeyDown:this.onAutoselectCaptureKeyDown,captureKeyUp:this.onAutoselectCaptureKeyUp});return h$1("div",{id:"comment-"+o.id,class:cN("-item","-comment","-indent-"+e.indent,s&&"comment-node-author",l&&"comment-self-authored",c&&"comment-mention")},r,i,u,h$1("div",{class:"-body"},m,v,h$1("div",{class:"-text"},h$1("div",{class:"-title"},d),h$1(ContentCommentsMarkup,{user:n,node:a,editing:t.editing&&!t.preview,onmodify:this.onModify,onkeydown:this.onKeyDown,onkeyup:this.onKeyUp,onfocus:this.onTextAreaFocus,onblur:this.onTextAreaBlur,oncaret:this.onTextAreaCaret,placeholder:"type a comment here",limit:e.limit,replaceText:t.replaceText,cursorPos:t.replaceCursorPos,replaceTextEvent:t.replaceTextEvent},o.body)),g),e.children)},e}(Component),ContentComments=function(t){function e(e){t.call(this,e),this.state={comments:null,tree:null,authors:null,newcomment:null,subscribed:null,hascomment:!1,isauthor:!1},this.onPublish=this.onPublish.bind(this),this.onToggleSubscribe=this.onToggleSubscribe.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentWillMount=function(){this.getComments(this.props.node)},e.prototype.componentDidUpdate=function(e){!e.user&&this.props.user&&this.updateUser(this.props.user)},e.prototype.genComment=function(){return{parent:0,node:this.props.node.id,author:this.props.user.id,body:"",love:0,loved:!1}},e.prototype.getComments=function(t){var n=this;$Comment.GetByNode(t.id).then(function(e){e.comment&&e.comment.length?n.setState({comments:e.comment,tree:null,authors:null}):e.comment&&n.setState({comments:[],tree:null,authors:null}),n.getAuthors().then(function(e){n.setState({newcomment:n.genComment()})}),$CommentLove.GetMy(t.id).then(function(e){n.setState({lovedComments:e["my-love"]}),n.setState({tree:n.buildTree()})}),n.props.user&&n.updateUser(n.props.user)}).catch(function(e){n.setState({error:e})})},e.prototype.updateUser=function(e){var t=this;if(e&&e.id&&this.comments){var n=this.props.node;$Notification.GetSubscription(n.id).then(function(e){200==e.status&&t.setState({subscribed:e.subscribed})}).catch(function(e){t.setState({error:e})});var o=!1;if(n.meta&&n.meta.authors)for(var i in n.meta.authors)if(n.meta.authors[i]==e.id){o=!0;break}n.author==e.id&&(o=!0),this.setState({isauthor:o});var r,a=!1;for(r in this.state.comments)if(this.state.comments[r].author==e.id){a=!0;break}this.setState({hascomment:a})}},e.prototype.buildTree=function(){for(var e=this.state.comments,t={},n=0;n<e.length;n++)0===e[n].parent?t[e[n].id]={node:e[n]}:e[n].parent&&t[e[n].parent]?(t[e[n].parent].child||(t[e[n].parent].child={}),t[e[n].parent].child[e[n].id]={node:e[n]}):console.log("[Comments] Unable to find parent for "+e[n].id);return t},e.prototype.getAuthors=function(){var t=this,e=this.props,n=e.user,e=e.node,o=this.state.comments;if(o){for(var i=[],r=0;r<o.length;r++)0!=o[r].author&&i.push(o[r].author);return n&&n.id&&i.push(n.id),e.meta&&e.meta.authors?e.meta.authors.forEach(function(e){return i.push(e)}):e&&i.push(e.author),i=i.filter(function(e,t,n){return n.indexOf(e)===t&&0<e}),$Node.GetKeyed(i).then(function(e){t.setState({authors:e.node})}).catch(function(e){t.setState({error:e})})}},e.prototype.renderComments=function(e,t){void 0===t&&(t=0);var n=this.props,o=n.user,i=n.node,n=this.state,r=n.authors,a=n.lovedComments,s=o&&0!==o.id&&o.id,l=s&&"@"+o.slug,c=[];for(h in a)c.push(a[h].comment);var h,u=[];for(h in e){var f=e[h].node;f.loved=-1!==c.indexOf(f.id);var d=r[f.author],p=null!=f.author&&f.author===s,m=!p&&l&&-1<f.body.indexOf(l),g=!m&&node_IsAuthor(i,{id:f.author});e[h].child?u.push(h$1(ContentCommentsComment,{user:o,node:i,comment:f,author:d,indent:t,isMyComment:p,isNodeAuthor:g,isMention:m},h$1("div",{class:"-indent"},this.renderComments(e[h].child,t+1)))):u.push(h$1(ContentCommentsComment,{user:o,node:i,comment:f,author:d,indent:t,isMyComment:p,isNodeAuthor:g,isMention:m}))}return u},e.prototype.renderPostNew=function(){var e=this.props,t=e.user,n=e.node,o=this.state,i=o.authors,r=o.error,a=o.newcomment,s=o.subscribed,e=i&&a&&a.author?i[a.author]:0,o=parseInt(this.props.node.meta["allow-anonymous-comments"]);return h$1("div",{class:"-new-comment"},h$1(ContentCommentsComment,{user:t,node:n,comment:a,author:e,indent:0,editing:!0,publish:!0,onpublish:this.onPublish,nolove:!0,allowAnonymous:o,error:r,subscribed:s,onsubscribe:this.onToggleSubscribe,authors:i}))},e.prototype.onPublish=function(e,n){var o=this;this.props.node;var t=this.state,i=t.newcomment,r=t.subscribed;this.setState({error:null}),$Comment.Add(i.parent,i.node,i.body,null,n).then(function(e){var t;null==r&&o.onToggleSubscribe(),e.comment?(t=new Date,t=Object.assign({id:e.comment,created:t.toISOString(),modified:t.toISOString(),anonymous:n},i),o.state.comments.push(t),i.parent=0,i.body="",o.setState({tree:o.buildTree(),hascomment:!0})):o.setState({error:e.message||"Unknown error when posting comment"})}).catch(function(e){o.setState({error:e})})},e.prototype.onToggleSubscribe=function(){var t=this;(this.state.subscribed?$Notification.Unsubscribe(this.props.node.id):$Notification.Subscribe(this.props.node.id)).then(function(e){200==e.status?t.setState({subscribed:e.subscribed}):t.setState({error:"Could update subscription status"})})},e.prototype.render=function(e,t){var n=t.comments,o=t.tree,i=t.authors,r=t.newcomment;e.node;var a=e.user;e.path,e.extra;t=h$1(NavSpinner,null);n&&o&&i&&(t=n.length?this.renderComments(o):h$1("div",{class:"-item -comment -indent-0"},h$1("div",{class:"-nothing"},"No Comments.")));o=null;return a&&a.id&&r?o=this.renderPostNew():a&&0===a.id&&(o=h$1("div",{class:"-new-comment",style:"padding:0"},h$1("div",{class:"-item -comment -indent-0"},h$1("div",{class:"-nothing"},"Sign in to post a comment")))),h$1("div",{class:cN("content-base content-common content-comments",e.no_gap?"-no-gap":"",e.no_header?"-no-header":"")},h$1("div",{class:"-headline"},"COMMENTS"),t,o,h$1("div",{class:"content-footer content-footer-common -footer",style:"height:0"}))},e}(Component),ViewContentPost=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra,r=null;return e.edit||(r=h$1(ContentComments,{node:t,user:n,path:o,extra:i})),h$1("div",{id:"content"},h$1(ContentPost,{node:t,user:n,path:o,extra:i,authored:!0,by:!0,love:!0,single:!0}),r)},e}(Component),PagePost=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra,r=i&&i.length&&"edit"==i[i.length-1];return h$1("div",null,h$1(PageNavContent,e),h$1(ViewContentPost,{node:t,user:n,path:o,extra:i,edit:r}))},t}(Component),ContentNavItem=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){e.node,e.user;var n=e.path,e=e.extra,e="/"+(e?e.join("/"):"");return h$1("div",{class:"-body"},h$1("div",{class:"content-base content-nav content-nav-root"},h$1(ContentNavButton,{path:n+(e="/"===e?"/comments":e),title:"Comments",icon:"bubbles",href:n+"/comments"},"Comments")))},e}(Component),ContentCommonBodyLink=function(t){function e(e){t.call(this,e),this.state={items:null,itemlist:null,indexes:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var n=this;$Tag.Get(this.props.filter).then(function(e){var t;e&&e.tag&&e.tag.length&&(t={items:e.tag,itemlist:[],indexes:{}},e.tag.forEach(function(e){t.indexes[e.id]=t.itemlist.length,t.itemlist.push([e.id,e.name])}),n.setState(t))})},e.prototype.getTagAndIndex=function(){var e=this.state,t=this.props,n=0<t.tag&&e.indexes&&null!=e.indexes[t.tag]?e.indexes[t.tag]:t.defaultIndex;return{index:n,tag:e.itemlist&&e.itemlist[n]||[t.defaultValue,t.defaultText]}},e.prototype.componentDidUpdate=function(){var e;!this.props.tag&&this.props.onModifyTag&&((e=this.getTagAndIndex()).index,e=e.tag,this.props.onModifyTag(e[0]))},e.prototype.render=function(e,t){var n=e.urlPlaceholder||"URL (example: http://some.website.com/file.zip)",o=this.getTagAndIndex(),i=o.index,r=o.tag;if(e.editing&&t.itemlist&&t.indexes)return h$1("div",{class:cN("content-common-link","-editing",e.class)},h$1(InputDropdown,{class:"-tag",items:t.itemlist,value:r[0],onmodify:e.onModifyTag,useClickCatcher:!0,selfManaged:!0}),h$1(InputText,{class:"-name",value:e.name,onmodify:e.onModifyName,placeholder:r[1],maxlength:64}),h$1(InputText,{class:"-url",value:e.url,onmodify:e.onModifyUrl,placeholder:n,maxlength:512}),h$1(UIButton,{onclick:e.onRemove,title:"Remove"},h$1(SVGIcon,null,"cross")));if(t.itemlist&&e.url){var a=Sanitize.sanitize_URI(e.url),o=-1!=a.indexOf("//")?a:"",n=o?h$1("a",{href:o,target:"_blank"},a):h$1("span",null,a),o=e.name||r[1],a="earth";return t.items[i].icon&&(a=t.items[i].icon),h$1("div",{class:cN("content-common-link",e.class)},h$1("div",{class:"-name",title:"$"+r[0]+" - "+r[1]},h$1(SVGIcon,{small:!0},a)," ",h$1("span",null,o)),h$1("div",{class:"-url"},n))}return h$1("div",null)},e}(Component),ContentItemRulesCheck=function(t){function e(e){t.call(this,e),this.state={}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var e=this.props,t=e.onAllowChange,e=e.answers,e=Object.assign({},this.state,e);t&&t({allowJam:this.allowJam(e),allowCompo:this.allowCompo(e),allowExtra:this.allowExtra(e),allowUnfinished:this.allowUnfinished(e),rulesAnswers:e})},e.prototype.handleChange=function(e,t){var n=this.props.onAllowChange,o=Object.assign({},this.state,this.props.answers,((o={})[e]=t,o));n&&n({allowJam:this.allowJam(o),allowCompo:this.allowCompo(o),allowExtra:this.allowExtra(o),allowUnfinished:this.allowUnfinished(o),rulesAnswers:o}),this.setState(((o={})[e]=t,o))},e.prototype.allowJam=function(e){return!!this.allowByCommonRules(e)&&(!!e.willVote&&!!e.optedOut)},e.prototype.allowExtra=function(e){return!!this.allowByCommonRules(e)&&!!e.optedOut},e.prototype.allowCompo=function(e){return!!this.allowByCommonRules(e)&&(!!e.willVote&&(!!e.optedOut&&(!!e.workedSolo&&(!!e.createdAll&&(!!e.createdWithin48&&!!e.includedSource)))))},e.prototype.allowUnfinished=function(e){return!!this.allowByCommonRules(e)},e.prototype.allowByCommonRules=function(e){return!(node_IsPublished(this.props.node)&&!e.changeFormat)&&!!e.readRules},e.prototype.getFormatName=function(){var e={jam:"Jam",compo:"Compo",extra:"Extra",unfinished:"Unfinished",release:"Release"};return this.props.node.subsubtype&&e[this.props.node.subsubtype]?e[this.props.node.subsubtype]:this.props.node.subsubtype},e.prototype.render=function(e,t){var n=h$1("span",{class:"-mandatory"},"(",h$1("span",null,"COMPO ONLY"),")"),o=h$1(UIIcon,{small:!0,baseline:!0,class:"-checkbox",src:"checkbox-unchecked"}),i=h$1(UIIcon,{small:!0,baseline:!0,class:"-checkbox",src:"checkbox-checked"}),r=e.answers||t,a=r.changeFormat,s=r.readRules,l=r.workedSolo,c=r.createdAll,h=r.createdWithin48,u=r.includedSource,t=r.willVote,r=r.optedOut;return h$1(ContentCommonBody,{class:"-rules-check -body"},h$1("div",{class:"-label"},"Submission Checklist"),h$1("div",{class:"-items"},node_IsPublished(e.node)&&h$1(ButtonBase,{onclick:this.handleChange.bind(this,"changeFormat",!a)},a?i:o,"I wish to change my event format. ",e.node.subsubtype?"(currently: "+this.getFormatName()+")":""),h$1(ButtonBase,{onclick:this.handleChange.bind(this,"readRules",!s)},s?i:o,"I have read and understood ",h$1(UILink,{blank:!0,href:"//ludumdare.com/rules/"},h$1("strong",null,"the rules")),"."),h$1(ButtonBase,{onclick:this.handleChange.bind(this,"optedOut",!r)},r?i:o,"I have opted-out of all or any categories we are not eligible for (see opt-outs above)."),(node_CanPublish(e.parent,"item/game/jam")||node_CanPublish(e.parent,"item/game/compo"))&&h$1(ButtonBase,{onclick:this.handleChange.bind(this,"willVote",!t)},t?i:o,"I understand that if we want a score at the end, we need to play, rate, and give feedback on other games."),node_CanPublish(e.parent,"item/game/compo")&&node_CountAuthors(e.node)<=1&&h$1("div",null,h$1(ButtonBase,{onclick:this.handleChange.bind(this,"workedSolo",!l)},l?i:o,"I worked alone. ",n),h$1(ButtonBase,{onclick:this.handleChange.bind(this,"createdAll",!c)},c?i:o,"I created all the code, art, sound, music, and other assets myself during the event. ",n),h$1(ButtonBase,{onclick:this.handleChange.bind(this,"createdWithin48",!h)},h?i:o,"I created everything in 48 hours. ",n),h$1(ButtonBase,{onclick:this.handleChange.bind(this,"includedSource",!u)},u?i:o,"I have included source code. ",n))),h$1("div",{class:"-footer"},h$1("p",null,h$1(UIIcon,{baseline:!0,src:"warning",class:"-warning"}),h$1("span",null," ",h$1("strong",null,"IMPORTANT:")," Before you can select an Event Format and Publish, you must agree to ",h$1("em",null,"some")," questions above.")),h$1("p",null,h$1("span",null,"You can change your format at any time, but be aware: Once a format has closed, it can no longer be selected. Contact ",h$1(UILink,{href:"https://ludumdare.com/support"},"support")," for assistance."))))},e}(Component),InputStar=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e,t){this.props.onclick&&this.props.onclick(e,t)},e.prototype.onDelete=function(e){this.props.ondelete&&this.props.ondelete(e)},e.prototype.render=function(e,t){var n=t.value||parseFloat(e.value),o=parseInt(e.max)||5,i=null,r=null;e.number&&(r=h$1("div",{class:"-number"},n.toFixed(1)));var a=[],t=null;if(e.edit){a.push(h$1(ButtonBase,{class:cN("-star -hover",1<=n?"-lit":""),onclick:this.onClick.bind(this,1),title:1},h$1(SVGIcon,{baseline:!0},"star-full")));for(var s=3;s<=Math.floor(2*n);s++)a.push(h$1(ButtonBase,{class:"-star -hover -lit",onclick:this.onClick.bind(this,.5*s),title:.5*s},h$1(SVGIcon,{baseline:!0},"star-"+(1&s?"left":"right")+"-full")));for(;s<=2*o;s++)a.push(h$1(ButtonBase,{class:"-star -hover",onclick:this.onClick.bind(this,.5*s),title:.5*s},h$1(SVGIcon,{baseline:!0},"star-"+(1&s?"left":"right")+"-full")));e.delete&&(t=h$1(ButtonBase,{class:"-delete -hover",onclick:this.onDelete.bind(this)},h$1(SVGIcon,{small:!0,baseline:!0},"cross")))}else{for(var l=0;l<Math.floor(n);l++)a.push(h$1("div",{class:"-star"},h$1(SVGIcon,{small:e.small,baseline:!0},"star-full")));n%1&&a.push(h$1("div",{class:"-star"},h$1(SVGIcon,{small:e.small,baseline:!0},"star-half")));for(var c=Math.ceil(n);c<o;c++)a.push(h$1("div",{class:"-star"},h$1(SVGIcon,{small:e.small,baseline:!0},"star-empty")));i=n+" of "+o}return h$1("div",{class:"input-star",title:i},e.prefix,h$1("div",{class:"-stars"},a),r,t,e.suffix)},e}(Component),$Grade={GetMy:GetMy,GetAllMy:GetAllMy,GetMyList:GetMyList,Add:Add,Remove:Remove};function GetMy(e){return Fetch$2.Get(API_ENDPOINT+"/vx/grade/getmy/"+e,!0)}function GetAllMy(e){return Fetch$2.Get(API_ENDPOINT+"/vx/grade/getallmy/"+e,!0)}function GetMyList(e){return Fetch$2.Get(API_ENDPOINT+"/vx/grade/getmylist/"+e,!0)}function Add(e,t,n){return Fetch$2.Get(API_ENDPOINT+"/vx/grade/add/"+e+"/"+t+"/"+n,!0)}function Remove(e,t){return Fetch$2.Get(API_ENDPOINT+"/vx/grade/remove/"+e+"/"+t,!0)}var MAX_LINKS=9,ContentItem=function(o){function e(e){o.call(this,e);var t=e.node;this.state={parent:null,grade:null,linkUrls:[],linkTags:[],linkNames:[],linksShown:1,allowAnonymous:parseInt(t.meta["allow-anonymous-comments"]),dontRateMe:parseInt(t.meta["dont-rate-me"])};for(var n=0;n<MAX_LINKS;n++)this.state.linkUrls[n]=t.meta["link-0"+(n+1)]||"",this.state.linkTags[n]=t.meta["link-0"+(n+1)+"-tag"]?parseInt(t.meta["link-0"+(n+1)+"-tag"]):0,this.state.linkNames[n]=t.meta["link-0"+(n+1)+"-name"]||"",this.state.linkUrls[n]&&n+1>this.state.linksShown&&(this.state.linksShown=n+1);this.onSetJam=this.onSetJam.bind(this),this.onSetCompo=this.onSetCompo.bind(this),this.onSetExtra=this.onSetExtra.bind(this),this.onSetUnfinished=this.onSetUnfinished.bind(this),this.onAnonymousComments=this.onAnonymousComments.bind(this),this.onDontRateMe=this.onDontRateMe.bind(this),this.onChangeTeam=this.onChangeTeam.bind(this),this.handleAllowSubmission=this.handleAllowSubmission.bind(this)}return o&&(e.__proto__=o),((e.prototype=Object.create(o&&o.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this,n=this.props.node;node_IsPublished(n)&&this.setState({allowCompo:"compo"==n.subsubtype,allowJam:"jam"==n.subsubtype,allowExtra:"extra"==n.subsubtype,allowUnfinished:"unfinished"==n.subsubtype}),$Node.Get(n.parent).then(function(e){if(e.node&&e.node.length){e=e.node[0];return t.setState({parent:e}),$Grade.GetMy(n.id)}return Promise.resolve({})}).then(function(e){e.grade?t.setState({grade:e.grade}):t.setState({grade:[]})}).catch(function(e){t.setState({error:e})})},e.prototype.setSubSubType=function(t){var n=this;return $Node.Transform(this.props.node.id,"item","game",t).then(function(e){return e&&e.changed&&(n.props.node.subsubtype=t,n.setState({})),e})},e.prototype.onSetJam=function(e){return this.setSubSubType("jam").then(function(e){})},e.prototype.onSetCompo=function(e){return this.setSubSubType("compo").then(function(e){})},e.prototype.onSetExtra=function(e){return this.setSubSubType("extra").then(function(e){})},e.prototype.onSetUnfinished=function(e){return this.setSubSubType("unfinished").then(function(e){})},e.prototype.onGrade=function(n,o){var i=this,e=this.props.node;return $Grade.Add(e.id,n,o).then(function(e){var t;return(e&&e.id||e.changed)&&((t=i.state.grade)[n]=o,i.setState({grade:t})),e})},e.prototype.onOptOut=function(e,t){var n=this,o=this.props.node,i=e+"-out",r={};return t?(r[i]=1,$Node.AddMeta(o.id,r).then(function(e){return e&&e.changed&&(n.props.node.meta[i]=r[i],n.setState({})),e})):(r[i]=0,$Node.RemoveMeta(o.id,r).then(function(e){return e&&e.changed&&(n.props.node.meta[i]=r[i],n.setState({})),e}))},e.prototype.onChangeTeam=function(e,t){var n=(this.state.team||this.props.node.meta.author).map(function(e){return e});1===t?-1===n.indexOf(e)&&n.push(e):-1===t&&n.splice(n.indexOf(e),1),this.setState({team:n})},e.prototype.positionSuffix=function(e){var t=e%10,e=e%100;return 1==t&&11!=e?"st":2==t&&12!=e?"nd":3==t&&13!=e?"rd":"th"},e.prototype.onUpload=function(t,e){var n=this,o=this.props.node,i=this.props.user;if(!this.props.user)return null;var r=null;if(e.target.files&&e.target.files.length){e=e.target.files[0];return $Asset.Upload(i.id,e).then(function(e){if(e&&e.path){r="///content/"+e.path;e={};return e[t]=r,$Node.AddMeta(o.id,e)}return Promise.resolve({})}).then(function(e){e&&e.changed&&(n.props.node.meta[t]=r,n.setState({}))}).catch(function(e){n.setState({error:e})})}},e.prototype.onAnonymousComments=function(){var t=this,n=this.state.allowAnonymous,e=this.props.node;return(n?$Node.RemoveMeta(e.id,{"allow-anonymous-comments":0}):$Node.AddMeta(e.id,{"allow-anonymous-comments":1})).then(function(e){e&&e.changed&&t.setState({allowAnonymous:!n})})},e.prototype.onDontRateMe=function(){var t=this,n=this.state.dontRateMe,e=this.props.node;return(n?$Node.RemoveMeta(e.id,{"dont-rate-me":0}):$Node.AddMeta(e.id,{"dont-rate-me":1})).then(function(e){e&&e.changed&&t.setState({dontRateMe:!n})})},e.prototype.onModifyLinkName=function(e,t){var n=this.state.linkNames;n[e]=t.target.value,this.setState({modified:!0,linkNames:n}),this.contentSimple.setState({modified:!0})},e.prototype.onModifyLinkTag=function(e,t){var n=this.state.linkTags.slice();n[e]=t,this.setState({modified:!0,linkTags:n}),this.contentSimple.setState({modified:!0})},e.prototype.onModifyLinkUrl=function(e,t){var n=this.state.linkUrls;n[e]=t.target.value,this.setState({modified:!0,linkUrls:n}),this.contentSimple.setState({modified:!0})},e.prototype.onRemoveLink=function(e){var t=this.state,n=t.linkTags,o=t.linkNames,i=t.linkUrls,t=t.linksShown;e<0||e>=n.length||(n=n.slice(),i=i.slice(),o=o.slice(),n.splice(e,1),i.splice(e,1),o.splice(e,1),this.setState({linkTags:n,linkNames:o,linkUrls:i,linksShown:Math.max(t-1,1)}),this.contentSimple.setState({modified:!0}))},e.prototype.onSave=function(e){var t=this.props,n=t.node;if(!t.user)return null;for(var o={},i=0;i<this.state.linkUrls.length;i++){var r="link-0"+(i+1);(n.meta[r]||"")!=this.state.linkUrls[i].trim()&&(o[r]=this.state.linkUrls[i],this.props.node.meta[r]=o[r]),(n.meta[r+"-tag"]?parseInt(n.meta[r+"-tag"]):0)!=parseInt(this.state.linkTags[i])&&(o[r+"-tag"]=this.state.linkTags[i],this.props.node.meta[r+"-tag"]=o[r+"-tag"]),(n.meta[r+"-name"]||"")!=this.state.linkNames[i].trim()&&(o[r+"-name"]=this.state.linkNames[i],this.props.node.meta[r+"-name"]=o[r+"-name"])}return $Node.AddMeta(n.id,o)},e.prototype.handleAllowSubmission=function(e){this.setState(e)},e.prototype.makeLinks=function(e){var t=this,n=[];e&&n.push(h$1("div",{class:cN("content-common-link","-editing","-header")},h$1("div",{class:"-tag"},"Platform"),h$1("div",{class:"-name"},"Description (optional)"),h$1("div",{class:"-url"},"URL (leave blank to omit)")));for(var o=0;o<this.state.linksShown;o++)n.push(h$1(ContentCommonBodyLink,{name:this.state.linkNames[o],tag:this.state.linkTags[o],url:this.state.linkUrls[o],urlPlaceholder:"http://example.com/file.zip",editing:e,filter:"platform",onModifyName:this.onModifyLinkName.bind(this,o),onModifyTag:this.onModifyLinkTag.bind(this,o),onModifyUrl:this.onModifyLinkUrl.bind(this,o),onRemove:this.onRemoveLink.bind(this,o),defaultIndex:o,defaultValue:50,defaultText:"Source Code"}));return e&&this.state.linksShown<MAX_LINKS&&n.push(h$1(UIButton,{onclick:function(e){return t.setState({linksShown:++t.state.linksShown})},class:"content-common-nav-button"},h$1(UIIcon,{src:"plus"}),h$1("div",null,"Add"))),h$1(ContentCommonBody,{class:"-body"},h$1("div",{class:"-label"},"Downloads and Links"),h$1("div",{class:"-items"},n))},e.prototype.render=function(e,t){var n=this,o=(e=Object.assign({},e)).node,i=e.user;e.path;var r=e.extra,a=e.featured,s=t.parent,l=t.team,c=t.allowCompo,h=t.allowJam,u=t.allowExtra,f=t.allowUnfinished,d=1<node_CountAuthors(o),c=c&&!d,p=!1,m=t.dontRateMe,g=!1;e.onChangeTeam=this.onChangeTeam,l&&(e.node.meta.author=l),s&&(e.nopublish=!node_CanPublish(s)),o&&("game"==o.subtype?(e.by="GAME",e.flagIcon="gamepad",e.flagClass="-col-a"):"tool"==o.subtype&&(e.by="TOOL",e.flagIcon="hammer",e.flagClass="-col-c"),"jam"==o.subsubtype?(e.by="JAM "+e.by,g=p=!0):"compo"==o.subsubtype?(e.by="COMPO "+e.by,g=p=!0):"extra"==o.subsubtype?(e.by="EXTRA "+e.by,g=!0):"craft"==o.subsubtype?e.by="CRAFT":"release"==o.subsubtype?e.by="RELEASED "+e.by:"unfinished"==o.subsubtype?(e.flagClass=null,e.by="UNFINISHED "+e.by,m=!0):e.nopublish=!0,e.draft="Game");var v=null,l=null;r&&r.length&&"edit"==r[0]&&node_CanPublish(s)&&(l=h$1(ContentItemRulesCheck,{node:this.props.node,parent:this.state.parent,onAllowChange:this.handleAllowSubmission,answers:t.rulesAnswers}),v=h$1(ContentCommonBody,{class:"-body"},h$1("div",{class:"-label"},"Event Format Selection"),h$1("p",null,h$1("span",null,"Choose the event format of your game")),h$1(ContentCommonNav,null,h$1(ContentCommonNavButton,{onclick:this.onSetJam,class:"jam"==o.subsubtype?"-selected":"",disabled:!h},h$1(UIIcon,{src:"users"}),h$1("div",null,"Jam")),h$1(ContentCommonNavButton,{onclick:this.onSetCompo,class:"compo"==o.subsubtype?"-selected":"",disabled:!c},h$1(UIIcon,{src:"user"}),h$1("div",null,"Compo")),h$1(ContentCommonNavButton,{onclick:this.onSetExtra,class:"extra"==o.subsubtype?"-selected":"",disabled:!u},h$1(UIIcon,{src:"users"}),h$1("div",null,"Extra")),h$1(ContentCommonNavButton,{onclick:this.onSetUnfinished,class:"unfinished"==o.subsubtype?"-selected":"",disabled:!f},h$1(UIIcon,{src:"trash"}),h$1("div",null,"Unfinished"))),h$1("div",{class:"-info"},d&&h$1("div",{class:"-warning"},h$1(UIIcon,{baseline:!0,small:!0,src:"warning"})," COMPO unavailable: Too many authors.")),h$1("div",{class:"-footer"},h$1("p",null,h$1(UIIcon,{baseline:!0,small:!0,src:"info"}),h$1("span",null,"If the buttons are grayed out, you haven't checked-off enough items in the Submission Checklist above.")),h$1("p",null,"If your event format is correct (filled background), you ",h$1("strong",null,"don't")," need to change or update this."),h$1("p",null,h$1(UIIcon,{baseline:!0,src:"warning",class:"-warning"}),h$1("span",null," ",h$1("strong",null,"IMPORTANT:")," You can't ",h$1("strong",null,"Publish")," until you finish this step!")))));h=null;if(o.magic){var b=[];for(A in o.magic){var _=A.split("-");!_.length||"grade"==_[0]&&1<_.length||b.push({key:A,value:o.magic[A]})}for(var y=[],$=[],w=0;w<b.length;w++){var k=b[w],C=!1,S=!1,x=null,N=k.key,I=k.value,T=I;if("smart"==k.key)N="Smart Balance",C=!0;else if("cool"==k.key)N="Classic Balance",C=!0;else if("grade"==k.key){if(m)continue;N="Ratings received",T=(S=I<20)?(x=h$1(UIIcon,{baseline:!0,small:!0,src:"warning"}),"The minimum needed to score is about 20"):(x=h$1(UIIcon,{baseline:!0,small:!0,src:"checkmark"}),"This will be scored")}else"given"==k.key?(N="Ratings given",25<I&&(x=h$1(UIIcon,{baseline:!0,small:!0,src:"checkmark"}))):"feedback"==k.key&&(N="Karma from Feedback given");k=I.toFixed(4);k.length>I.toString().length&&(k=I.toString()),C?$.push(h$1("div",{class:"-metric"},h$1("span",{class:"-title"},N,":")," ",h$1("span",{class:"-value",title:T},k," *",x))):y.push(h$1("div",{class:cN("-metric",S?"-warning":"")},h$1("span",{class:"-title"},N,":")," ",h$1("span",{class:"-value",title:T},k,x)))}h=h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Metrics"),h$1("div",{class:"-subtext"},"Advanced data on this game"),h$1("div",{class:"-items"},y,$),h$1("div",{class:"-footer"},"Metrics update roughly every ",h$1("strong",null,"15 minutes"),". If they don't exactly match other data (i.e. ratings), this is because they haven't updated yet. Metrics with a ",h$1("strong",null,"*")," are dynamic, and change based on a variety of factors. It is normal for these numbers to go up and down."))}c=new URLSearchParams(window.location.search),u=parseInt(c.get("admin")),f=i&&i.private&&i.private.meta&&i.private.meta.admin,d=null;if(f&&u||!parseInt(nodeEvent_CanGrade(s))){if((f&&u||!parseInt(nodeEvent_CanGrade(s))&&nodeEvent_IsFinished(s))&&g&&!m){var P=[];if(s&&s.meta)for(var A in s.meta){var E=A.split("-");2==E.length&&"grade"==E[0]&&(!o.meta||0|o.meta[A+"-out"]||P.push({key:A,value:s.meta[A]}))}for(var O=[],R=0;R<P.length;R++){var G=P[R],F=G.value,M="N/A";o.magic&&o.magic[G.key+"-result"]&&(M=o.magic[G.key+"-result"]);var D=0;o.magic&&o.magic[G.key+"-average"]&&(D=o.magic[G.key+"-average"]);var L=0;o.grade&&o.grade[G.key]&&(L=o.grade[G.key]),O.push(h$1("div",{class:"-grade"},h$1("span",{class:"-title"},F,":")," ",h$1("strong",null,M),h$1("sup",null,this.positionSuffix(M))," (",D," average from ",L," ratings)"))}d=h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Results"),h$1("div",{class:"-subtext"},"Final results"),h$1("div",{class:"-items"},O),h$1("div",{class:"-footer"},"When a line is ",h$1("strong",null,"N/A"),", it means there weren't enough ratings for a reliable score. Don't forget to play and rate other people's games during events to prioritize your game."))}}else if(node_IsAuthor(o,i)){if(g&&p){var U=[];for(A in s.meta){var j=A.split("-");2==j.length&&"grade"==j[0]&&(!o.meta||0|o.meta[A+"-out"]||U.push({key:A,value:s.meta[A]}))}for(var B=[],V=0;V<U.length;V++){var H=U[V],z=H.value,Y=0;o.grade&&(Y=o.grade[H.key]),B.push(h$1("div",{class:"-grade"},h$1("span",{class:"-title"},z,":")," ",h$1("strong",null,Y)))}d=h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Total Ratings"),h$1("div",{class:"-subtext"},"Votes on your game so far"),h$1("div",{class:"-items"},B),h$1("div",{class:"-footer"},"To get a score at the end, you need about ",h$1("strong",null,"20")," ratings in a category. To get ratings: play, rate, and leave feedback on games. Every game you rate and leave quality feedback on scores you ",h$1("strong",null,"Coolness"),' points. Having a high "Coolness" prioritizes your game.'))}}else if(a&&a.what&&nodeKeys_HasPublishedParent(a.what,o.parent)){if(g&&!m){var K=[];if(s&&s.meta)for(var A in s.meta){var W=A.split("-");2==W.length&&"grade"==W[0]&&(!o.meta||0|o.meta[A+"-out"]||K.push({key:A,value:s.meta[A]}))}for(var q=[],J=0;J<K.length;J++){var X=K[J],Z=X.value,Q="?";t.grade&&(Q=t.grade[X.key]||0),q.push(h$1("div",{class:"-grade"},h$1("span",{class:"-title"},Z,":"),h$1(InputStar,{value:Q,onclick:this.onGrade.bind(this,X.key),ondelete:this.onGrade.bind(this,X.key,0),edit:!0,delete:!0,number:!0})))}var ee=null;"jam"==o.subsubtype?ee=h$1("div",{class:"-subtext"},"Jam game"):"compo"==o.subsubtype?ee=h$1("div",{class:"-subtext"},"Compo game"):"extra"==o.subsubtype&&(ee=h$1("div",{class:"-subtext"},"Extra game")),d=h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Ratings"),ee,h$1("div",{class:"-items"},q),h$1("div",{class:"-footer"},"Ratings are saved automatically when you click. When they change, they're saved."))}}else d=i&&i.id?h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Ratings"),h$1("div",{class:"-items"},"Sorry! At this time, only participants are able to rate games.")):h$1(ContentCommonBody,{class:"-rating -body"},h$1("div",{class:"-header"},"Ratings"),h$1("div",{class:"-items"},"Please login to rate this game"));c=null;if(s&&!t.dontRateMe){var te=[];for(A in s.meta){var ne=A.split("-");3==ne.length&&"grade"==ne[0]&&"optional"==ne[2]&&0|s.meta[A]&&(ne=ne[0]+"-"+ne[1],te.push({key:ne,name:s.meta[ne],value:!!o.meta&&o.meta[ne+"-out"],required:"1"===s.meta[ne+"-required"]}))}for(var oe=[],ie=0;ie<te.length;ie++){var re=te[ie];oe.push(h$1(UICheckbox,{onclick:this.onOptOut.bind(this,re.key,!re.value),value:re.value},"Do not rate me in ",h$1("strong",null,re.name),re.required?" (required, see below)":""))}c=h$1(ContentCommonBody,{class:"-opt-out -body"},h$1("div",{class:"-label"},"Rating Category Opt-outs"),oe,h$1("div",{class:"-footer"},h$1("p",null,h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"Opt-out of categories here if you and your team didn't make all your graphics, audio, or music during the event. Many participants are making original graphics, audio and music from scratch during the event. As a courtesy, we ask you to opt-out if you didn't do the same. See ",h$1(UILink,{href:"http://ludumdare.com/rules/"},"the rules"),".")),h$1("p",null,h$1("span",null,"Since some games are not meant to be Humourous or Moody, or they don't make good use of the theme, you can choose to opt-out of these categories too. Opting out of these is optional.")),h$1("p",null,h$1("span",null,"NOTE: If you opted out of a category by mistake, you may need more ratings to ensure you get a score in that category."))))}u=null;o.meta&&o.meta.cover&&(u=h$1(IMG,{class:"-img",src:o.meta&&o.meta.cover?o.meta.cover+".320x256.fit.jpg":""}));f=h$1(ContentCommonBody,{class:"-images -body"},h$1("div",{class:"-label"},"Cover Image"),h$1("div",{class:"-upload -items"},h$1("div",{class:"-path"},o.meta&&o.meta.cover?o.meta.cover:""),h$1("label",null,h$1("input",{type:"file",name:"asset",style:"display: none;",onchange:this.onUpload.bind(this,"cover")}),h$1(ButtonBase,{class:"-button"},h$1(SVGIcon,{small:!0,baseline:!0,gap:!0},"upload"),"Upload")),u),h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"Recommended Size: 640x512 (i.e. 5:4 aspect ratio). Other sizes will be scaled+cropped to fit. Animated GIFs will not work here."))),p=null,p=this.makeLinks(!0),a=h$1(ContentCommonBody,{class:"-show-comments -body"},h$1("div",{class:"-label"},"Casual"),h$1("div",{class:"-items"},h$1(UICheckbox,{onclick:this.onDontRateMe,value:t.dontRateMe},"Opt-out of ratings")),h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"If you'd like to entirely opt-out of ratings, choose this, and the Extra format below."))),g=null,g=h$1(ContentCommonBody,{class:"-show-comments -body"},h$1("div",{class:"-label"},"Feedback"),h$1("div",{class:"-items"},h$1(UICheckbox,{onclick:this.onAnonymousComments,value:t.allowAnonymous},"Allow anonymous comments ",h$1(UIIcon,{src:"warning",title:"Do this at your own risk"}))),h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"You should only do this if you want the most critical of feedback."))),ee=null,ee=h$1(ContentCommonBody,{class:"-hosting -body"},h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"If you're new to Ludum Dare, you should know we don't host downloads, we link to them. Check out the ",h$1(UILink,{blank:!0,href:"/events/ludum-dare/hosting-guide"},"Hosting Guide"),"."))),i=this.makeLinks(!1),u=null,u=h$1(ContentCommonBody,{class:"-body"},h$1("div",{class:"-footer"},h$1(UIIcon,{small:!0,baseline:!0,src:"info"}),h$1("span",null,"Add screenshots to your description via the ",h$1("strong",null,"Upload Image")," link above. Try to keep your GIFs less than 640 pixels wide. You can embed ",h$1(UILink,{href:"https://youtube.com"},"YouTube"),' video in your description by pasting a YouTube link on a blank line ("embed code" not required).')));return e.editonly=h$1("div",null,u,f,p,ee,g,a,c,l,v),e.onSave=this.onSave.bind(this),e.viewonly=h$1("div",null,i,d,h),e.class=cN("content-item",e.class),e.ref=function(e){n.contentSimple=e},h$1(ContentSimple,Object.assign({},e,{authors:!0}))},e}(Component),PageItem=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n=e.node,o=e.user;e.featured;var i=e.path,r=e.extra;r&&r.length&&r[r.length-1];var a=null,s=null;return!r||0!=r.length&&"edit"==r[0]||(a=h$1(ContentNavItem,{node:n,user:o,path:i,extra:r}),s=h$1(ContentComments,{node:n,user:o,path:i,extra:r})),h$1("div",{id:"content"},h$1(PageNavContent,e),h$1(ContentItem,e),a,s)},t}(Component),PageTag=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,r=e.extra,a=h$1("div",null,h$1(NavLink,{href:n.path+"/.."},h$1("span",null,h$1(UIIcon,{src:"previous"})," "),"../"));return h$1("div",{id:"content"},h$1(PageNavRoot,e),h$1(ContentCommon,{node:n,user:o,header:n.name,headerIcon:"tag"},h$1(ContentCommonBody,null,h$1("br",null),h$1("br",null),h$1("br",null),a)),h$1(ContentGames,{node:n,user:o,path:i,extra:r,methods:["target"],tags:n.id}))},e}(Component),PageNavUser=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node;e.parent,e.superparent,e.author;var n=e.user,o=e.path,i=e.extra;if(!t)return null;if(!o)return null;var r=i&&i.length?"/"+i.join("/"):"";(r=r||"/").split("/",2).join("/");e=[],i=n&&n.id==t.id;return e.push(h$1(ContentNavButton,{path:o+r,title:"Go Back",icon:"previous",href:"/"})),e.push(h$1(ContentNavButton,{path:o+r,title:t.name,light:!0,icon:"user",href:o+"/"},t.name)),e.push(h$1(ContentNavButton,{path:o+r,title:t.name+"'s Games",icon:"gamepad",href:o+"/games"},"Games")),e.push(h$1(ContentNavButton,{path:o+r,title:t.name+"'s Feed",icon:"feed",href:o+"/feed"},"Feed")),e.push(h$1(ContentNavButton,{path:o+r,title:t.name+"'s Statistics",icon:"stats",href:o+"/stats"},"Stats")),i&&e.push(h$1(ContentNavButton,{path:o+r,title:"Followed by "+n.name,icon:"user-check",href:o+"/following"},"Following")),h$1("div",{class:"content-base content-nav"},e)},t}(Component),UserFeed=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,r=e.extra;if(!n||!o)return null;e=["author"];return n.id==o.id&&e.push("unpublished"),h$1(ContentTimeline,{types:["post"],methods:e,node:n,user:o,path:i,extra:r})},e}(Component),UserArticles=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,e=e.extra;return h$1(ContentTimeline,{types:["page"],methods:["author"],node:n,user:o,path:i,extra:e})},e}(Component),UserGames=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,r=e.extra,e=null;return r&&1<r.length&&"all"!=r[1]&&(e=r[1]),h$1(ContentGames,{node:n,user:o,path:i,extra:r,methods:["authors"],subsubtypes:e||"",filter:null})},t}(Component),ContentUserBar=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.user,n=e.node,o=e.featured,e=null;if(t&&t.id&&(e=h$1(ContentCommonNavButtonFollow,{node:n,user:t}),o&&o.focus_id&&o.what&&o.what[o.focus_id]&&(o.what[o.focus_id].author,t.id)),n&&t){t="/users/"+n.slug;return h$1("div",{class:"content-user-bar"},h$1(ContentCommonBodyAvatar,{href:t,src:n.meta&&n.meta.avatar?n.meta.avatar:""}),h$1(ContentCommonBodyTitle,{href:t,title:n.meta["real-name"]||n.name,subtitle:"@"+n.slug}),h$1(ContentCommonNav,null,e))}return null},e}(Component),ContentUserFollowing=function(t){function e(e){t.call(this,e),this.getFollowing=this.getFollowing.bind(this),this.hasPermission=this.hasPermission.bind(this),this.hasFollowing=this.hasFollowing.bind(this),this.state={followingNodes:[]}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.hasFollowing()&&this.hasPermission()&&this.getFollowing(this.props.user.private.meta.star)},e.prototype.hasPermission=function(){return this.props.node.id==this.props.user.id},e.prototype.hasFollowing=function(){return this.props.user.private&&this.props.user.private.meta&&this.props.user.private.meta.star},e.prototype.getFollowing=function(e){var t=this;$Node.Get(e).then(function(e){t.setState({followingNodes:e.node,loaded:!0})})},e.prototype.render=function(n,e){if(n.class="string"==typeof n.class?n.class.split(" "):[],n.class.push("content-user-following"),this.hasPermission()){if(this.hasFollowing()){if(e.followingNodes&&0<e.followingNodes.length){e=e.followingNodes.sort(function(e,t){return n.user.private&&n.user.private.refs&&n.user.private.refs.star&&(n.user.private.refs.star.indexOf(e.id),n.user.private.refs.star.indexOf(t.id)),0}).map(function(e){return h$1(ContentUserBar,{node:e,user:n.user,featured:n.featured})});return h$1(ContentCommon,n,h$1(ContentCommonBody,null,h$1("p",null,"To add someone to your team, you need to both follow each other. Do so by visiting each others user pages, and clicking the ",h$1("span",null,h$1(SVGIcon,{baseline:!0,small:!0,gap:!0},"user-plus"),h$1("strong",null,"Follow"))," button."),h$1("p",null,"Users that follow each other will be shown below as ",h$1("span",null,h$1(SVGIcon,{baseline:!0,small:!0,gap:!0},"users"),h$1("strong",null,"Friends")),".")),e)}return h$1(ContentLoading,null)}return h$1(ContentCommon,n,h$1(ContentCommonBody,null,"You are not following anyone"))}return h$1(ContentError,{code:"403"},"Forbidden: You do not have permission to see who this user is following")},e}(Component),UserFollowing=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.featured,r=e.path,e=e.extra;return h$1(ContentUserFollowing,{node:n,user:o,path:r,extra:e,featured:i})},e}(Component),ContentUserFollowers=function(t){function e(e){t.call(this,e),this.getFollowers=this.getFollowers.bind(this),this.hasPermission=this.hasPermission.bind(this),this.hasFollowers=this.hasFollowers.bind(this),this.state={followerNodes:[]}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.hasFollowers()&&this.hasPermission()&&this.getFollowers(this.props.user.private.refs.star)},e.prototype.hasPermission=function(){return this.props.node.id==this.props.user.id},e.prototype.hasFollowers=function(){return this.props.user.private&&this.props.user.private.refs&&this.props.user.private.refs.star},e.prototype.getFollowers=function(e){var t=this;$Node.Get(e).then(function(e){t.setState({followerNodes:e.node,loaded:!0})})},e.prototype.render=function(n,e){if(n.class="string"==typeof n.class?n.class.split(" "):[],n.class.push("content-user-follower"),this.hasPermission()){if(this.hasFollowers()){if(e.followerNodes&&0<e.followerNodes.length){e=e.followerNodes.sort(function(e,t){e=-1!=n.user.private.meta.star.indexOf(e.id);return e==(-1!=n.user.private.meta.star.indexOf(t.id))?0:e?-1:1}).map(function(e){return h$1(ContentUserBar,{node:e,user:n.user})});return h$1(ContentCommon,n,e)}return h$1(ContentLoading,null)}return h$1(ContentCommon,n,h$1("h1",null," No one is currently following you "))}return h$1(ContentError,{code:"401"},"Permission Denied : Cannot see who other peoples followers are ")},e}(Component),UserFollowers=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.featured,r=e.path,e=e.extra;return h$1(ContentUserFollowers,{node:n,user:o,path:r,extra:e,featured:i})},e}(Component),UserStats$1=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return e.node,e.user,e.path,e.extra,h$1("div",{class:"content-base"},"Coming soon")},e}(Component),PageUser=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra,r=null;return"edit"==i[i.length-1]||(r=h$1(PageNavUser,e)),h$1(ContentList,{class:"page-user"},r,h$1(ContentUser,{node:t,user:n,path:o,extra:i}),h$1(Router,{node:t,props:e},h$1(Route,{default:!0,static:!0,path:"/home"}),h$1(Route,{static:!0,path:"/games",component:UserGames}),h$1(Route,{static:!0,path:"/articles",component:UserArticles}),h$1(Route,{static:!0,path:"/feed",component:UserFeed}),h$1(Route,{static:!0,path:"/following",component:UserFollowing}),h$1(Route,{static:!0,path:"/followers",component:UserFollowers}),h$1(Route,{static:!0,path:"/stats",component:UserStats$1}),h$1(Route,{static:!0,path:"/edit"}),h$1(Route,{type:"error",component:ContentError})))},t}(Component),PageUsers=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.path,e=e.extra;return h$1("div",{id:"content"},h$1(ContentUser,{node:n,user:o,path:i,extra:e}))},e}(Component),PageNavEvent=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.node;e.parent,e.superparent,e.author;var n=e.user,o=e.path,i=e.extra;if(!t)return null;if(!o)return null;var r=i&&i.length?"/"+i.join("/"):"",a=(r=r||"/").split("/",2).join("/"),e=[];e.push(h$1(ContentNavButton,{path:o+r,title:"Go Back",icon:"previous",href:"/"}));i=n&&0!==n.id,n=t.meta["event-mode"]?parseInt(t.meta["event-mode"]):0;return e.push(h$1(ContentNavButton,{path:o+r,title:t.name,light:!0,icon:"trophy",href:o+"/"},t.name)),8<=n&&e.push(h$1(ContentNavButton,{path:o+a,title:"Results",icon:"gamepad",href:o+"/results"},"Results")),e.push(h$1(ContentNavButton,{path:o+a,title:"Games",icon:"gamepad",href:o+"/games"},"Games")),e.push(h$1(ContentNavButton,{path:o+a,title:"Theme",icon:"ticket",href:o+"/theme"},"Theme")),e.push(h$1(ContentNavButton,{path:o+r,title:"Stats",icon:"stats",href:o+"/stats"},"Stats")),i&&e.push(h$1(ContentNavButton,{path:o+a,title:"Me",icon:"user",href:o+"/my"},"Me")),h$1("div",{class:"content-base content-nav"},e)},t}(Component),ContentNavTheme=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node;e.user;var o=e.path,i=e.extra;if(n.slug){var e=n.meta["event-mode"]?parseInt(n.meta["event-mode"]):0,r="/"+(i?i.join("/"):""),a=3<=e?"/fusion":2<=e?"/slaughter":1<=e?"/idea":"";if(4<=e)for(var s=1;s<=5;s++){var l=n.meta["theme-page-mode-"+s];0<parseInt(l)&&(a="/"+s)}"/"===r&&(r=a);var c=[];if(4<=e)for(var h,s=1;s<=5;s++)n.meta["theme-page-mode-"+s]&&(h="Round "+s,n.meta["theme-page-name-"+s]&&(h=n.meta["theme-page-name-"+s]),c.push(h$1(ContentNavButton,{path:o+r,title:h,icon:"ticket",href:o+"/"+s},h)));return h$1("div",{class:"content-base content-nav content-nav-root"},c)}return null},e}(Component),Home=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.node,n=e.user,o=e.featured,i=e.path,e=e.extra;return h$1("div",{class:"content-common event-home"},h$1(ContentEvent,{node:t,user:n,path:i,extra:e,featured:o,noflag:!0,title:"Event Details"}))},e}(Component),BAR_WIDTH_GAP_RATIO=.8,Bar=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.valuePos,n=e.zero,o=e.width,i=e.color,r=e.left;if(null!=t&&null!=o&&null!=r&&i)return t<n&&(e=n,n=t,t=e),h$1("rect",{class:cN("-bar","vis_fill_color_"+i,this.props.class),x:r,y:n,width:o*BAR_WIDTH_GAP_RATIO,height:t-n});console.warn("Bar was created with invalid props",this.props)},e}(Component),XAxis=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.yZeroPos,n=e.padLeft,e=e.padRight;return h$1("g",null,h$1("line",{class:cN("-chart-axis","x-axis",this.props.class),x1:n,y1:t,x2:100-e,y2:t}))},t}(Component),MAJOR_TICK_LENGTH=1.5,MINOR_TICK_LENGTH=.5,Tick=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){var t=e.major,n=e.horizontal,o=e.outside,i=e.axis,e=e.position,o=o?i-(t?MAJOR_TICK_LENGTH:MINOR_TICK_LENGTH):i+(t?MAJOR_TICK_LENGTH:MINOR_TICK_LENGTH);return h$1("line",n?{class:cN("-axis-tick",t?"-tick-major":"-tick-minor"),x1:o,x2:i,y1:e,y2:e}:{class:cN("-axis-tick",t?"-tick-major":"-tick-minor"),x1:e,x2:e,y1:o,y2:i})},t}(Component),YAxis=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMinorMajorTickSteps=function(e,t,n){t=(t-e)/n,e=1,n=1;return 100<t?(e=50,n=10):40<t?(e=10,n=5):10<t&&(e=5,n=1),{minorTick:n,majorTick:e}},t.prototype.render=function(e){var t=e.yZeroPos,n=e.yOnePos,o=e.showTicks,i=e.padBottom,r=e.padTop,a=e.width,s=null;if(null!==t&&null!==n&&1==o)if(!0===o){for(var s=[],l=n-t,c=100-r,n=this.getMinorMajorTickSteps(i,c,l),h=n.minorTick,u=n.majorTick,f=0,d=t;;){if(c<=(d=t+(f+=h)*l))break;f%u==0?s.push(h$1(Tick,{major:!0,horizontal:!0,outside:!0,axis:a,position:d})):f%h==0&&s.push(h$1(Tick,{minor:!0,horizontal:!0,outside:!0,axis:a,position:d}))}for(d=t,f=0;;){if((d=t-(f+=h)*l)<=i)break;f%u==0?s.push(h$1(Tick,{major:!0,horizontal:!0,outside:!0,axis:a,position:d})):f%h==0&&s.push(h$1(Tick,{minor:!0,horizontal:!0,outside:!0,axis:a,position:d}))}}else s=o.map(function(e){return h$1(Tick,{major:!0,horizontal:!0,outside:!0,axis:a,position:e})});return h$1("g",null,h$1("line",{class:cN("-chart-axis","y-axis",e.class),x1:a,y1:i,x2:a,y2:100-r}),s)},t}(Component),AXIS_RESERVATION=2,BarChart=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.scaleValues=function(e,t,n,o){var i=this,r=1,a=0;e.forEach(function(e){isFinite(e)&&(r=Math.max(e,r),a=Math.min(e,a))});var s=this.scale(0-a,r-a,n,o);s<t&&(s=t);t=this.scale(1,r,s,o);return{valuesYPos:e.map(function(e){return i.scale(e,r,s,o)}),yZeroPos:s,yOnePos:t}},t.prototype.scale=function(e,t,n,o){return(o-n)*e/t+n},t.prototype.render=function(e){e.use_percentages=e.use_percentages&&1==e.use_percentages;var t=e.labels,n=e.values,o=e.use_percentages,i=e.hideLegend;if(!t&&!i||!n)return console.warn("BarChart was created with invalid props",e),h$1("div",null,"No Data!");var r=0,a=0,s=e.xAxisHeight||AXIS_RESERVATION,l=e.yAxisWidth||AXIS_RESERVATION,c=0;e.showXAxis&&(r=s),e.showYAxis&&(a=l,c=.2);var h=c+n.length,u=this.scaleValues(n,r,0,100),f=u.valuesYPos,d=u.yZeroPos,r=u.yOnePos,u=null;e.showXAxis&&(u=h$1(XAxis,{padLeft:0,padRight:0,height:s,yZeroPos:d}));s=null;e.showYAxis&&(s=h$1(YAxis,{yZeroPos:d,yOnePos:r,xZeroPos:a,padTop:0,padBottom:0,width:l,showTicks:e.showYTicks}));for(var p=this.scale(1,h,a,100)-a,m=n.reduce(function(e,t){return e+t},0),g=n.map(function(e){return Math.round(e/m*100*100)/100}),v=[],b=[],_=[],e=null,y=0;y<n.length;y++){f[y]==d||isNaN(f[y]);var $=1+y%6;v.push(h$1(Bar,{valuePos:f[y],zero:d,width:p,left:this.scale(c+y,h,a,100),index:y,color:$})),i||(o?b.push(t[y]+" ("+n[y]+" : "+g[y]+"%)"):b.push(t[y]+" ("+n[y]+")")),_.push($)}return i||(e=h$1(Legend,{names:b,colors:_})),h$1("div",{class:"chart"},h$1("div",{class:"-bar"},h$1("svg",{class:"-svg",viewBox:"0 0 100 100",width:"100%",height:"100%"},h$1("g",{transform:"translate(0,100) scale(1,-1)"},v,s,u))),e)},t}(Component),ContentStatsEvent=function(t){function e(e){t.call(this,e),this.state={stats:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.getStats()},e.prototype.getStats=function(){var t=this,e=this.props;e.node&&e.node.id&&$Stats.Get(e.node.id).then(function(e){e.stats&&t.setState({stats:e.stats})})},e.prototype.render=function(e,t){var n=[],o=(e=Object.assign({},e)).node;if(o&&o.slug&&t.stats){var i=t.stats;n.push("content-stats"),n.push("content-stats-event");var r=0,t=[];if(r=o&&o.meta&&o.meta["event-mode"]?parseInt(o.meta["event-mode"]):r){var a,o=[];return o.push(h$1("div",{class:"-gap"},h$1("span",{class:"-title"},"Number of Users:"))),o.push(h$1("div",null,h$1("span",null,"Signups:")," ",h$1("span",{class:"-value"},i.signups))),o.push(h$1("div",null,h$1("span",null,"Unique Authors:")," ",h$1("span",{class:"-value"},i.authors))),t.push(h$1("div",{class:"-participation"},o)),5<=r&&((a=[]).push(h$1("div",{class:"-gap"},h$1("span",{class:"-title"},"Number of Submissions:")," ",h$1("span",{class:"-value -title"},i.jam+i.compo+i.extra+i.craft))),o=[i.jam,i.compo,i.extra],a.push(h$1(PieChart,{values:o,labels:["Jam","Compo","Extra"],use_percentages:!0})),a.push(h$1("div",null,h$1("span",null,"Unfinished:")," ",h$1("span",{class:"-value"},i.unfinished))),a.push(h$1("div",null,h$1("span",null,"Unpublished:")," ",h$1("span",{class:"-value"},i.unpublished))),a.push(h$1("div",null,h$1("span",null,"Warmups:")," ",h$1("span",{class:"-value"},i.warmup))),t.push(h$1("div",{class:"section -submissions"},a))),6<=r&&((a=[]).push(h$1("div",{class:"-gap"},h$1("span",{class:"-title"},"Types of Entries:"))),r=[i.game,i.craft,i.demo,i.tool],a.push(h$1(PieChart,{values:r,labels:["Games","Crafts","Demos","Tools"],use_percentages:!0})),t.push(h$1("div",{class:"section -types"},a)),(r=[]).push(h$1("div",{class:"-gap"},h$1("span",{class:"-title"},"Ratings Received per Entry:"))),a=[i["grade-20-plus"],i["grade-15-20"],i["grade-10-15"],i["grade-5-10"],i["grade-0-5"]-i["grade-0-only"],i["grade-0-only"]],r.push(h$1(BarChart,{values:a.reverse(),labels:["20 or more","15 to 20","10 to 15","5 to 10","1 to 5","0"].reverse(),use_percentages:!0})),t.push(h$1("div",{class:"section -ratings"},r))),t.push(h$1("div",{class:"-gap"},"Last Updated: ",i.timestamp)),h$1(ContentCommon,Object.assign({},e,{class:cN(n)}),h$1(ContentCommonBodyTitle,{title:"Statistics"}),h$1(ContentCommonBody,null,t))}return h$1("div",null)}return h$1(ContentLoading,null)},e}(Component),EventStats=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){e=e.node;return h$1(ContentStatsEvent,{node:e})},t}(Component),ContentEventTheme=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){var t=e.node,n=e.user,o=e.path,i=e.extra;if(t.slug){var r=t.meta["event-mode"]?parseInt(t.meta["event-mode"]):0,a="/"+(i?i.join("/"):""),s=3<=r?"fusion":2<=r?"slaughter":1<=r?"idea":"";if(4<=r)for(var l=1;l<=5;l++){var c=t.meta["theme-page-mode-"+l];0<parseInt(c)&&(s=l)}r=null;return"/idea"==(a="/"===a?"/"+s:a)?r=h$1(ContentEventIdea,{node:t,user:n,path:o,extra:i}):"/slaughter"==a?r=h$1(ContentEventSlaughter,{node:t,user:n,path:o,extra:i}):"/fusion"==a?r=h$1(ContentEventFusion,{node:t,user:n,path:o,extra:i}):0<parseInt(a.substr(1))&&(r=h$1(ContentEventList,{node:t,user:n,path:o,extra:i})),h$1(ContentCommon,e,h$1(ContentCommonBody,null,r))}return h$1(ContentError,null)},e}(Component),UserStats=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.featured,r=e.path,a=e.extra;e.error,e.home;e=e.params,r=r+"/"+a[0],a=[];return e&&e.page&&(a=[e.page]),h$1("div",null,h$1(ContentNavTheme,{node:n,user:o,path:r,extra:a,featured:i}),h$1(ContentEventTheme,{node:n,user:o,path:r,extra:a,featured:i}))},e}(Component),EventGames=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n=this,o=e.node,i=e.user,r=e.path,a=e.extra;e.featured;var s="all",l="smart";o&&o.meta&&8<=o.meta["event-mode"]&&(s="all",l="overall");var c=this.state.gamesFilter;function h(e){var t={all:"compo+jam+extra",classic:"cool",overall:"grade-01-result",fun:"grade-02-result",innovation:"grade-03-result",theme:"grade-04-result",graphics:"grade-05-result",audio:"grade-06-result",humor:"grade-07-result",mood:"grade-08-result"};return t[e]||e}var u=[],f=l,d=s;if(2<a.length&&(d=a[2]),-1==(f=1<a.length?a[1]:f).indexOf("-"))switch(f){case"smart":case"classic":case"cool":case"danger":case"grade":case"feedback":u=[h(f)];break;case"overall":case"fun":case"innovation":case"theme":case"graphics":case"audio":case"humor":case"mood":u=[h(f),"reverse"];break;case"zero":u=["grade","reverse"];break;case"jam":case"compo":case"craft":case"extra":case"late":case"release":case"unfinished":d=f,u=[h(l)];break;default:u=["null"]}else d=f.split("-"),u=[h(l)];e=new URLSearchParams(window.location.search),s=parseInt(e.get("admin")),e=i&&i.private&&i.private.meta&&i.private.meta.admin;return ShowFilters=o&&o.meta&&(8<=o.meta["event-mode"]||e&&s)?h$1(GamesFilter,{Filter:f,SubFilter:d,Path:this.props.path+"/"+a[0]+"/",node:o,onchangefilter:function(e){n.setState({gamesFilter:e})},showEvent:!0,showVotingCategory:!0}):h$1(GamesFilter,{Filter:f,SubFilter:d,Path:this.props.path+"/"+a[0]+"/",node:o,onchangefilter:function(e){n.setState({gamesFilter:e})},showEvent:!0,showRatingSort:!0,showRatingSortDesc:!0}),d=h(d),u.push("parent"),h$1("div",null,ShowFilters,h$1(ContentGames,{node:o,user:i,path:r,extra:a,noevent:!0,methods:u,subsubtypes:d||null,filter:c}))},t}(Component),PageNavEventMy=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){e.node,e.parent,e.superparent,e.author;var t=e.user,n=e.path,o=e.extra,e=o&&o.length?"/"+o.join("/"):"";(e=e||"/").split("/",2).join("/");o=[];return o.push(h$1(ContentNavButton,{path:n+e,title:"Home",icon:"home",href:n+"/my"},"Home")),t&&0!==t.id&&o.push(h$1(ContentNavButton,{path:n+e,title:"My Grades",icon:"star-half",href:n+"/my/grades"},"My Grades")),h$1("div",{class:"content-base content-nav"},o)},t}(Component),EventMy=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1("div",null,h$1(PageNavEventMy,e),h$1("div",{class:"content-common event-my",style:"overflow: overlay"},h$1("div",{class:"content-common-body"},h$1("p",null,"Things about you this event go here."),h$1("p",null,"Right now, that's only the button above that lets you see what games you've rated."))))},e}(Component),GradedItem=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.cleanGameDescription=function(e){return e.replace(/!?\[[^\]]+]\([^)]+\)/g,"").replace(/\*{1,2}/g,"").replace(/\~~[^~]+~~/g,"").replace(/#{1,3}/g,"").replace(/\n/g," ")},t.prototype.trimDescriptionToLength=function(e,t,n){var o=e.substr(0,n),n=Math.max(o.lastIndexOf("."),o.lastIndexOf("?"),o.lastIndexOf("!"));n<t&&(n=Math.max(o.lastIndexOf(","),o.lastIndexOf(":")));e=(n=e.substr(0,Math.max(t,n))).length<e.length,n=n.trim();return e&&(n+="."==n[n.length-1]?"..":"..."),n},t.prototype.getItemType=function(e){var t=null;return e.subtype?t=e.subsubtype?e.subsubtype.toUpperCase()+": "+e.subtype.toUpperCase():e.subtype.toUpperCase():e.type&&(t=e.type.toUpperCase()),t?h$1("div",{class:"-item-type"},t):null},t.prototype.render=function(e){var n,t=e.node,o=e.authors,i=e.grades,r=e.gradeNames,a=e.focusGrade,s=e.comments,l=this.cleanGameDescription(t.body),l=this.trimDescriptionToLength(l,100,175),c=null;o&&0<o.length&&(n=[],o.forEach(function(e,t){0<t&&t==o.length-1?n.push(" & "):0<t&&n.push(", "),n.push(h$1("div",{class:"-at-name"},"@",e.slug))}),c=h$1("p",{class:"-authors"},n));var h,u=[];for(h in r)!function(t){var e=i.filter(function(e){return e.name==t});r[t]&&1===e.length&&u.push(h$1("div",{class:cN("-grade",e[0].name==a?"-focused":""),key:t},h$1("div",{class:"-grade-label"},r[t],":"),e[0].value))}(h);var f=h$1("div",{class:"-grades"},u),s=s?h$1(SVGIcon,null,1<s?"bubbles":"bubble"):null;return h$1(UIButtonLink,{class:cN("graded-item",e.class),href:t.path},this.getItemType(t),h$1("strong",null,t.name),s,c,h$1("p",null,l),f)},t}(Component),GradeGraphs=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getHistogram=function(e,t,n){return n=n||{},e.filter(function(e){return e.name==t}).map(function(e){return e.value}).forEach(function(e){n[e]?n[e]+=1:n[e]=1}),n},t.prototype.getGlobalHistogram=function(e,t){var n,o={};for(n in t)o=this.getHistogram(e,n,o);return o},t.prototype.getAverage=function(e,t,n){e=e.filter(function(e){return e.name==t}).map(function(e){return e.value});return this.averageArray(e,n)},t.prototype.countTypes=function(e){var t={};return e.forEach(function(e){e=e.subsubtype.toUpperCase()+": "+e.subtype.toUpperCase();t[e]?t[e]+=1:t[e]=1}),t},t.prototype.getVotesBias=function(e,t,n){var o,i={};for(o in n){var r=this.getAverage(e,o,5),a=this.getAverage(t,o,5);i[o]=Number((r-a).toFixed(1))}return i},t.prototype.binGrades=function(e){if(!e)return NaN;var o={};return e.forEach(function(e){var t=e.timestamp.split(" ",1)[0],n=e.value,e=e.id;o[t]?o[t].push([e,n]):o[t]=[[e,n]]}),o},t.prototype.getDateRange=function(e,t){function n(e){return new Date(e.getTime()+864e5)}var o=[],i=e.getMonth()+1,r=e.getDate();o.push([e.getFullYear(),(9<i?"":"0")+i,(9<r?"":"0")+r].join("-"));for(var a=n(e);a<=t;)i=a.getMonth()+1,r=a.getDate(),o.push([a.getFullYear(),(9<i?"":"0")+i,(9<r?"":"0")+r].join("-")),a=n(a);return o},t.prototype.getDayLabels=function(e){var t,n=[];for(t in e)n.push(t);return 0<n.length?(n=n.map(function(e){return new Date(e)}).sort(function(e,t){return e-t}),this.getDateRange(n[0],n[n.length-1])):[]},t.prototype.averageArray=function(e,t){return 0==e.length?NaN:Number((e.reduce(function(e,t){return e+t})/e.length).toFixed(t))},t.prototype.render=function(e){var t,n,o=this,i=e.grades,r=e.gradeNames,a=e.focusGrade,s=e.nodes,l=e.showByType,c=e.showTrend,h=[],u=[],f=null,d=c?this.binGrades(i):null,p=c?this.getDayLabels(d):null;for(n in r)u.push(r[n]);if(l){var m,g=this.countTypes(s),v=[],b=[];for(m in g)v.push(m),b.push(g[m]),g[m];f=h$1("div",{class:"-graph"},h$1("h3",null,"Graded items per type"),h$1(PieChart,{values:b,labels:v,use_percentages:!0}))}else if(c)var _=(_=p.map(function(e){return d[e]?d[e].map(function(e){return e[0]}):[]})).map(function(n){return n.filter(function(e,t){return n.indexOf(e)==t}).length}),f=h$1("div",{class:"-graph"},h$1("h3",null,"Graded items per day"),h$1(BarChart,{values:_,labels:p,use_percentages:!1,hideLegend:!0,showXAxis:!0,showYAxis:!0,showYTicks:!0}));else{for(var y in r)h.push(this.getAverage(i,y,2));f=h$1("div",{class:"-graph"},h$1("h3",null,"Average grade per category"),h$1(BarChart,{values:h,labels:u,use_percentages:!1,showXAxis:!0,showYAxis:!0,showYTicks:!0}))}var $=null,w=null,k=null,C=null,S=null,e={},_=[1,1.5,2,2.5,3,3.5,4,4.5,5];if(a)w=this.getHistogram(i,a),$="Distribution of stars ("+r[a]+"):",C=_.map(function(e){return w[e]||0}),k=_.map(function(e){return e+" star"+(1<e?"s":"")}),e.showXAxis=!0,e.showYAxis=!0,e.showYTicks=!0;else if(l){for(var x in $="JAM vs COMPO average bias",k=u,w=this.getVotesBias(i.filter(function(t){return"jam"==s.filter(function(e){return e.id==t.id})[0].subsubtype}),i.filter(function(t){return"jam"!=s.filter(function(e){return e.id==t.id})[0].subsubtype}),r),C=[],r)C.push(w[x]);S=h$1("div",{class:"-caption"},"Positive values indicate you give higher grades to JAM items. Negative that you give higher grades to COMPO items."),e.showXAxis=!0,e.showYAxis=!0,e.showYTicks=!0}else c?($="Total average grade per day",C=p.map(function(e){return d[e]?o.averageArray(d[e].map(function(e){return e[1]}),1):NaN}),k=p,e.hideLegend=!0):(w=this.getGlobalHistogram(i,r),$="Total distribution of stars",C=_.map(function(e){return w[e]||0}),k=_.map(function(e){return e+" star"+(1<e?"s":"")})),e.showXAxis=!0,e.showYAxis=!0,e.showYTicks=!0;return t=h$1("div",{class:"-graph"},h$1("h3",null,$),h$1(BarChart,Object.assign({},{values:C,labels:k,use_percentages:!1},e)),S),h$1("div",{class:"-graphs"},f,t)},t}(Component),SORT_ORDER=0,SORT_ALPHA=1,SORT_TYPE=2,SORT_GRADE_AVERAGE=3,pad=function(e,t){return Array(Math.max(t-String(e).length+1,0)).join(0)+e},MyGrades=function(t){function e(e){t.call(this,e),this.state={loading:!0},this.onSortByChange=this.onSortByChange.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this,n=this.props.node.id,e=$Grade.GetAllMy(n).then(function(e){t.setState({grades:e.grade})}),o=$Grade.GetMyList(this.props.node.id).then(function(e){return t.setState({gameIds:e.items,nodes:new Map,error:null}),t.collectNodes(e.items,n)}).catch(function(e){t.setState({error:e,gameIds:null})}),i=$Comment.GetMyListByParentNode(n).then(function(e){return t.collectComments(e.comment)});Promise.all([e,o,i]).then(function(){t.setState({loading:!1})})},e.prototype.collectComments=function(e){for(var t=this,n=0,o=[],i=new Map;;){var r=e.slice(n,200);if(0==r.length)break;o.push($Comment.Get(r).then(function(e){e.comment.forEach(function(e){i[e.node]?i[e.node]+=1:i[e.node]=1})})),n+=200}return Promise.all(o).then(function(e){t.setState({myComments:i})})},e.prototype.collectNodes=function(t,e){var n=this,o=[],i=new Map,r=new Map,a=0;for(o.push($Node.Get(e).then(function(e){for(var t=e.node[0].meta,n=1;;){var o="grade-"+pad(n,2),i=t[o];if(!i)break;r[o]=i,n+=1}}));;){var s=t.slice(a,a+20);if(0==s.length)break;o.push($Node.Get(s).then(function(e){e.node.map(function(e){i[e.id]=e})}).catch(function(e){n.setState({error:e})})),a+=20}return Promise.all(o).then(function(e){return n.setState({nodes:i,gradeNames:r}),n.collectAuthors(i,t)})},e.prototype.collectAuthors=function(n,o){for(var t=this,i=[],r=new Map,e=[],a=0;a<o.length;a+=1)!function(e){var t=n[o[e]];t.author&&0<t.author&&i.push(t.author),t.meta&&t.meta.authors&&t.meta.authors.forEach(function(e){e!=t.author&&i.push(e)})}(a);for(var i=i.filter(function(e,t){return i.indexOf(e)==t}),s=0;;){var l=i.slice(s,s+20);if(0==l.length)break;e.push($Node.Get(l).then(function(e){e.node.map(function(e){r[e.id]=e})}).catch(function(e){t.setState({error:e})})),s+=20}return Promise.all(e).then(function(e){t.setState({authors:r})})},e.prototype.getItemAuthorsFromState=function(e){var t=this.state.nodes[e],n=this.state.authors;if(!n)return[];var o=[],e=n[t.author];return e&&o.push(e),t.meta&&t.meta.authors&&t.meta.authors.forEach(function(e){e==t.author||(e=n[e])&&o.push(e)}),o},e.prototype.onSortByChange=function(e){this.setState({sortBy:e})},e.prototype.getSortedGames=function(){var e=this.state,t=e.gameIds,n=e.nodes,o=e.sortBy,i=e.grades;switch(o){case SORT_TYPE:return t.map(function(e){return[e,n[e].subsubtype+n[e].subtype+n[e].type]}).sort(function(e,t){return e[1]>t[1]}).map(function(e){return e[0]});case SORT_ALPHA:return t.map(function(e){return[e,n[e].name]}).sort(function(e,t){return e[1]>t[1]}).map(function(e){return e[0]});case SORT_ORDER:case void 0:return t;case SORT_GRADE_AVERAGE:return t.map(function(t){var e=i.filter(function(e){return e.id===t}).map(function(e){return e.value}),n=e.reduce(function(e,t){return e+t});return[t,n/e.length]}).sort(function(e,t){return t[1]-e[1]}).map(function(e){return e[0]});default:var r="grade-"+pad(o-SORT_GRADE_AVERAGE,2);return t.map(function(t){var e=i.filter(function(e){return e.id===t&&e.name===r});return[t,1==e.length?e[0].value:-1]}).sort(function(e,t){return t[1]-e[1]}).map(function(e){return e[0]})}},e.prototype.render=function(e,t){var n=this,o=t.error,i=t.nodes,r=t.loading,a=t.grades,s=t.gradeNames,l=t.sortBy,c=t.myComments,h=this.getSortedGames(),u=!r&&!o,f=o?h$1("div",{class:"-warning"},"Could not retrieve your votes. Are you logged in?"):null,d=l&&(SORT_GRADE_AVERAGE<l?"grade-"+pad(l-SORT_GRADE_AVERAGE,2):null),p=!h&&(o?null:h$1(ContentLoading,null)),m=null,g=null,v=null,r=null,o=null;if(h&&(h.length<20&&(g=h$1("div",{class:"-warning"},"To fully participate in Ludum Dare you need to play and grade others' games. You should aim at playing at least ",20," games. Doing so will also ensure that when the event is over, your game will be ranked and given a grade.")),m=h$1("div",{class:"-info"},"You have graded ",h.length," game",1==h.length?"":"s","."),0<h.length&&(o=h$1(GradeGraphs,{grades:a,gradeNames:s,focusGrade:d,showByType:l==SORT_TYPE,showTrend:l==SORT_ORDER||!l,nodes:h.map(function(e){return i[e]})}))),u){var b=[];h.map(function(t){b.push(h$1(GradedItem,{node:i[t],grades:a.filter(function(e){return e.id==t}),gradeNames:s,focusGrade:d,comments:c?c[t]:null,authors:n.getItemAuthorsFromState(t),key:t}))});var r=h$1(ContentList,null,b),_=null;sortOptions=[[SORT_ORDER,"Grading order"],[SORT_ALPHA,"Alphabetically"],[SORT_TYPE,"Type"],[SORT_GRADE_AVERAGE,"Average grade"]];var y,$=1;for(y in s)sortOptions.push([$+SORT_GRADE_AVERAGE,s[y]]),$+=1;switch(l){case SORT_ORDER:case void 0:_=h$1("div",{class:"-description"},"Showing the games in the order you graded them.");break;case SORT_TYPE:_=h$1("div",{class:"-description"},"Showing first by class (JAM/COMPO) and then by item type (probably just GAME).");break;case SORT_GRADE_AVERAGE:_=h$1("div",{class:"-description"},"Showing by average grade across all categories.")}v=h$1("div",{class:"-sort-by"},"Sort by: ",h$1(InputDropdown,{class:"-tag",items:sortOptions,value:t.sortBy,onmodify:this.onSortByChange,useClickCatcher:!1,selfManaged:!0}),_)}return h$1("div",null,h$1(PageNavEventMy,e),h$1("div",{class:"content-common event-mygraded"},h$1("h2",null,"Items you have graded"),p,f,g,m,v,o,r))},e}(Component),PageEvent=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e,t){var n=e.node,o=e.user,i=e.featured,r=(e.path,e.extra);if(!n)return null;i=i&&n.id==i.id;return n&&n.meta&&n.meta["event-mode"],r[0],r.slice(1),h$1("div",{id:"content"},h$1(ContentHeadlinerEvent,{node:n,name:"event",icon:"trophy",flagclass:"-col-ab",childclass:i?"-col-a -inv-lit":"-inv -inv-lit",style:"--headlinerSize: 2.5rem;"}),h$1(PageNavEvent,e),h$1(Router,{node:n,props:e},h$1(Route,{default:!0,static:!0,path:"/home",component:Home}),h$1(Route,{static:!0,path:"/stats",component:EventStats}),h$1(Route,{static:!0,path:"/theme/:page?",component:UserStats}),h$1(Route,{static:!0,path:["/games/:filter?/:subfilter?","/results/:filter?/:subfilter?"],component:EventGames}),h$1(Route,{static:!0,path:"/my",component:EventMy,user:o}),h$1(Route,{static:!0,path:"/my/grades",component:MyGrades,user:o}),h$1(Route,{type:"error",component:ContentError})))},t}(Component),GROUP_ICONS={tag:"tag","tag/platform/source-code":"embed","tag/platform/microsoft-windows":"windows","tag/platform/linux":"linux","tag/platform/google-android":"android","tag/platform/apple":"apple","tag/platform/apple-macos":"apple","tag/platform/apple-ios":"apple","tag/platform/web-html5":"html5","tag/genre":"lightbulb","tag/input":"gamepad",group:"folder-open","group/tags":"tags","group/events":"trophys",event:"trophy",page:"article"},GROUP_SUFFIX={group:"/","group/tags":"/","group/events":"/"},ContentGroup=function(t){function e(e){t.call(this,e),this.state={items:null,nodes:null}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.getIconName=function(e){var t=this.makePath(e);return GROUP_ICONS[t+"/"+e.slug]?GROUP_ICONS[t+"/"+e.slug]:GROUP_ICONS[t]||GROUP_ICONS[e.type]||"file-empty"},e.prototype.makePath=function(e){var t="";return e.type&&(t+=e.type),e.subtype&&(t+="/"+e.subtype),e.subsubtype&&(t+="/"+e.subsubtype),t},e.prototype.componentDidMount=function(){var t=this,e=this.props.node;$Node.GetFeed(e.id,"parent",["group","event","page","tag"],null,null,null,null,200).then(function(e){if(e&&e.feed)return t.setState({items:e.feed}),$Node.Get(e.feed)}).then(function(e){e&&e.node&&(e.node.sort(function(e,t){return e.slug>t.slug?1:e.slug<t.slug?-1:0}),t.setState({nodes:e.node}))})},e.prototype.render=function(e,t){var n=e.node,o=e.user,e=t.items,i=t.nodes,r=[];if(e&&e.length&&i){r.push(h$1("div",null,h$1(NavLink,{href:n.path+"/.."},h$1("span",null,h$1(UIIcon,{src:"previous"})," "),"../")));for(var a=0;a<i.length;a++){var s=i[a],l=h$1("span",null,"[",this.makePath(s),"]");this.getIconName(s)&&(l=h$1("span",null,h$1(UIIcon,{src:this.getIconName(s)})," "));var c="";GROUP_SUFFIX[this.makePath(s)]&&(c=GROUP_SUFFIX[this.makePath(s)]),r.push(h$1("div",null,h$1(NavLink,{href:s.path},l,s.name,c)))}}else e&&0==e.length?r.push(h$1("div",null,h$1(NavLink,{href:n.path+"/.."},h$1("span",null,h$1(UIIcon,{src:"previous"})," "),"../"))):r.push(h$1(NavSpinner,null));e="";return GROUP_SUFFIX[this.makePath(n)]&&(e=GROUP_SUFFIX[this.makePath(n)]),h$1(ContentCommon,{node:n,user:o,header:n.name+e,headerIcon:this.getIconName(n)},h$1(ContentCommonBody,null,h$1("br",null),h$1("br",null),h$1("br",null),r))},e}(Component),PageEvents=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return h$1("div",{id:"content"},h$1(PageNavRoot,e),h$1(ContentGroup,e))},t}(Component),PageError=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.render=function(e){return h$1("div",{id:"content"},h$1(ContentError,e))},t}(Component),DialogBase=function(t){function e(e){t.call(this,e),this.eventKey=this.eventKey.bind(this),this.eventFocus=this.eventFocus.bind(this),this.onAbort=this.onAbort.bind(this),this.onDialogClick=this.onDialogClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){document.body.addEventListener("keydown",this.eventKey),window.addEventListener("focus",this.eventFocus),window.addEventListener("pageshow",this.eventFocus)},e.prototype.componentWillUnmount=function(){document.body.removeEventListener("keydown",this.eventKey),window.removeEventListener("focus",this.eventFocus),window.removeEventListener("pageshow",this.eventFocus)},e.prototype.getFocusable=function(){return document.getElementsByClassName("focusable")},e.prototype.eventFocus=function(e){var t=this.getFocusable();t.length&&(t[document.activeElement.id]||(e.preventDefault(),t[0].focus()))},e.prototype.eventKey=function(e){var t,n;9==e.keyCode?(t=this.getFocusable(),n=document.activeElement.id,t.length&&(t[n]&&(t[n]!=t[t.length-1]||e.shiftKey)?t[n]==t[0]&&e.shiftKey&&(e.preventDefault(),t[t.length-1].focus()):(e.preventDefault(),t[0].focus()))):27==e.keyCode&&(this.props.explicit||(e.preventDefault(),this.onAbort()))},e.prototype.onAbort=function(){window.location.hash="--"},e.prototype.onDialogClick=function(e){e.preventDefault(),e.stopPropagation()},e.prototype.render=function(e){var t={id:"dialog-background",class:"dialog-background"};return e.explicit||(t.onclick=e.oncancel||this.onAbort),h$1("div",t,h$1("div",{class:"dialog-base"+(e.class?" "+e.class:""),onclick:this.onDialogClick},e.children))},e}(Component),DialogCommon=function(t){function e(e){t.call(this,e),this.onAbort=this.onAbort.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onAbort=function(){window.location.hash="--"},e.prototype.render=function(e){var t={class:"dialog-common"+(e.class?" "+e.class:""),oncancel:e.oncancel||this.onAbort};e.explicit&&(t.explicit=e.explicit);var n=null;e.error&&(n=h$1("div",{class:"-error"},h$1("strong",null,"Error:")," ",e.error));var o=null;e.ok&&(i=e.onok?{onclick:e.onok}:e.cancel?{}:{onclick:this.onAbort},o=h$1(ButtonBase,Object.assign({},{class:"-button -light focusable",id:"dialog-button-ok"},i),e.oktext||"OK"));var i,r=null;return e.cancel&&(i=e.oncancel?{onclick:e.oncancel}:{onclick:this.onAbort},r=h$1(ButtonBase,Object.assign({},{class:"-button focusable",id:"dialog-button-cancel"},i),e.canceltext||"Cancel")),e.empty?h$1(DialogBase,t,e.children):h$1(DialogBase,t,h$1("div",{class:"-header"},h$1("div",{class:"-title _font2"},e.title)),n,h$1("div",{class:"-body"},e.children),h$1("div",{class:"-footer"},o,r))},e}(Component),DialogUnfinished=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1(DialogCommon,{title:"Unavailable",ok:!0},h$1("div",null,"Sorry. This feature is unavailable at this time."))},e}(Component),DialogLogin=function(n){function e(e){var t=this;n.call(this,e),this.state={login:"",password:"",remember:!1},this.onLoginChange=this.onLoginChange.bind(this),this.onPasswordChange=this.onPasswordChange.bind(this),this.onRememberChange=this.onRememberChange.bind(this),this.onKeyDownPwd=this.onKeyDown.bind(this,this.onPasswordChange),this.onKeyDownUser=this.onKeyDown.bind(this,this.onLoginChange),this.doLogin=this.doLogin.bind(this),this.clearError=function(){return t.state.error&&t.setState({error:null})}}return n&&(e.__proto__=n),((e.prototype=Object.create(n&&n.prototype)).constructor=e).prototype.onLoginChange=function(e){this.setState({login:e.target.value.trim(),error:null})},e.prototype.onPasswordChange=function(e){var t=null!=this.nameInput?this.nameInput.value:this.state.login;this.setState({password:e.target.value,login:t,error:null})},e.prototype.onRememberChange=function(e){this.setState({remember:e.target.checked})},e.prototype.onKeyDown=function(e,t){13===(t=t||window.event).keyCode&&(e(t),this.doLogin())},e.prototype.doLogin=function(){var t=this;this.clearError(),$User.Login(this.state.login.trim(),this.state.password.trim(),"").then(function(e){return 200===e.status?(t.submitForm&&t.submitForm.submit(),location.href=location.pathname+location.search,t.props.onlogin()):t.setState({error:e.message||e.response}),e}).catch(function(e){t.setState({error:e})})},e.prototype.componentDidMount=function(){this.nameInput&&this.nameInput.focus()},e.prototype.render=function(e,t){var n=this,o=t.login,i=t.password,r=t.remember,t=t.error;return h$1("form",{onsubmit:function(e){e.preventDefault()},ref:function(e){n.submitForm=e},autocomplete:"on"},h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Log In",onok:this.doLogin,cancel:!0},{title:"Log in",error:t}),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{name:"user",autofocus:!0,id:"dialog-login-login",onchange:this.onLoginChange,onkeydown:this.onKeyDownUser,class:"-text -block focusable",type:"text",name:"username",placeholder:"Name, account name, or e-mail",maxlength:"254",value:o,ref:function(e){n.nameInput=e}}))),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{name:"password",id:"dialog-login-password",onchange:this.onPasswordChange,onkeydown:this.onKeyDownPwd,class:"-text -block focusable",type:"password",name:"password",placeholder:"Password",maxlength:"128",value:i}))),h$1("div",{style:"overflow:hidden"},h$1("div",{class:"_float-right -link",id:"dialog-login-forgot",onclick:function(e){location.href="#user-reset"}},"Forgot Password?"),h$1("div",{title:"LOL. This is broken. Sorry!",class:"_hidden"},h$1("input",{id:"dialog-login-remember",onchange:this.onRememberChange,class:"focusable",type:"checkbox",name:"remember",checked:r}),h$1("span",null,"Stay Logged In")))))},e}(Component),LabelYesNo=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){},e.prototype.render=function(e){return 0<parseInt(e.value)?h$1("div",{class:"label-yesno"},h$1(SVGIcon,null,"checkmark")):parseInt(e.value)<=0?h$1("div",{class:"label-yesno"},h$1(SVGIcon,null,"cross")):void 0},e}(Component),DialogRegister=function(t){function e(e){t.call(this,e),this.state={mail:"",error:null,loading:!1},this.onChange=this.onChange.bind(this),this.doRegister=this.doRegister.bind(this),this.doFinish=this.doFinish.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onChange=function(e){this.setState({mail:e.target.value.trim()})},e.prototype.doRegister=function(){var t=this;mail=this.state.mail.trim(),Sanitize.validateMail(mail)?(this.setState({loading:!0,error:null}),$User.Register(mail).then(function(e){return 201===e.status?t.setState({sent:!0,loading:!1}):200===e.status?t.setState({sent:!0,resent:!0,loading:!1}):t.setState({error:e.message||e.response,loading:!1}),e}).catch(function(e){t.setState({error:e,loading:!1})})):this.setState({error:"Incorrectly formatted e-mail address"})},e.prototype.doFinish=function(){location.href=location.pathname+location.search},e.prototype.render=function(e,t){var n=t.mail,o=t.sent,i=t.resent,r=t.loading,a=t.error,t={title:"Create Account"};return a&&(t.error=a),r?h$1(DialogCommon,Object.assign({},{empty:!0,explicit:!0},t),h$1(NavSpinner,null)):o?h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doFinish,explicit:!0},t),h$1("div",null,"Activation e-mail ",i?"resent":"sent"," to ",h$1("code",null,n))):h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Send Activation E-mail",onok:this.doRegister,cancel:!0,explicit:!0},t),h$1("div",{class:"-info"},"Enter your e-mail address to begin activating your account"),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{autofocus:!0,id:"dialog-register-mail",onchange:this.onChange,class:"-text focusable",type:"email",name:"email",placeholder:"E-mail address",maxlength:"254",value:n}),h$1(LabelYesNo,{value:n.trim().length?Sanitize.validateMail(n)?1:-1:0}))))},e}(Component),DialogActivate=function(t){function e(e){t.call(this,e),this.state={loading:!0};e=Sanitize.getHTTPVars();console.log("v",e),this.ActID=e.id,this.ActHash=e.key,this.onNameChange=this.onNameChange.bind(this),this.onPasswordChange=this.onPasswordChange.bind(this),this.onPassword2Change=this.onPassword2Change.bind(this),this.doActivate=this.doActivate.bind(this),this.doFinishActivation=this.doFinishActivation.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var o=this;$User.Activate(this.ActID,this.ActHash.trim(),"","").then(function(e){var t,n;200===e.status?(t=e.slug&&e.slug.length?e.slug[0]:"",n=Sanitize.makeSlug(t),o.setState({mail:e.mail,name:t,slug:n,password:"",password2:"",valid_slug:0,loading:!1})):(console.log(e),o.setState({error:e.response,loading:!1}))}).catch(function(e){console.log(e),o.setState({error:e,loading:!1})})},e.prototype.onNameChange=function(e){var t=this,e=e.target.value.trim(),n=Sanitize.makeSlug(e);$User.Have(e,this.state.mail).then(function(e){return 200===e.status?t.setState({valid_slug:e.available&&""!==n?1:-1}):t.setState({error:e.message||e.response,loading:!1}),e}).catch(function(e){t.setState({error:e,loading:!1})}),this.setState({name:e,slug:n,valid_slug:0,error:null})},e.prototype.onPasswordChange=function(e){this.setState({password:e.target.value,error:null})},e.prototype.onPassword2Change=function(e){this.setState({password2:e.target.value,error:null})},e.prototype.isValidName=function(){var e=this.state.name.trim();return 0===e.length?0:e.length<3?-1:1},e.prototype.isValidSlug=function(){var e=this.state.slug.trim();return 0===e.length?0:e.length<3?-1:1},e.prototype.isValidPassword=function(){var e=this.state.password.trim();return 0===e.length?0:e.length<8?-1:1},e.prototype.isValidPassword2=function(){var e=this.state.password.trim(),t=this.state.password2.trim();return 0===e.length?0:t.length<8||e!==t||this.state.password!==this.state.password2?-1:1},e.prototype.doActivate=function(){var t=this;0<this.isValidName()&&0<this.isValidPassword()&&0<this.isValidPassword2()?(this.setState({loading:!0}),$User.Activate(this.ActID,this.ActHash.trim(),this.state.name.trim(),this.state.password.trim()).then(function(e){return 201===e.status?t.setState({created:!0,loading:!1,error:null}):t.setState({error:e.message||e.response,loading:!1}),e}).catch(function(e){t.setState({error:e,loading:!1})})):this.setState({error:"Form incomplete or invalid"})},e.prototype.doFinishActivation=function(){window.location.href=window.location.pathname},e.prototype.render=function(e,t){var n=t.mail,o=t.name,i=t.slug,r=t.password,a=t.password2,s=t.valid_slug,l=t.created,c=t.loading,h=t.error,t={title:"Create Account: Step 2"};return h&&(t.error=h),c?h$1(DialogCommon,Object.assign({},{empty:!0,explicit:!0},t),h$1(NavSpinner,null)):n?l?h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doFinishActivation,explicit:!0},t),"Account ",h$1("code",null,this.slug)," Created. You can now ",h$1("strong",null,"Log In"),"."):h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Create Account",onok:this.doActivate,cancel:!0,oncancel:this.doFinishActivation,explicit:!0},t),h$1("div",null,h$1("span",{class:"-label"},"E-mail:"),h$1("div",{class:"-input-container"},h$1("span",{id:"dialog-activate-mail"},n))),h$1("div",null,h$1("span",{class:"-label"},"Name:"),h$1("div",{class:"-input-container"},h$1("input",{autofocus:!0,id:"dialog-activate-name",onchange:this.onNameChange,class:"-text focusable",type:"text",name:"username",maxlength:"32",placeholder:"How your name appears",value:o}),h$1(LabelYesNo,{value:this.isValidName()}))),h$1("div",null,h$1("span",{class:"-label"},"Account Name:"),h$1("div",{class:"-input-container"},h$1("span",{id:"dialog-activate-slug"},h$1("code",null,i)),h$1(LabelYesNo,{value:s}))),h$1("div",null,h$1("span",{class:"-label"},"Password:"),h$1("div",{class:"-input-container"},h$1("input",{id:"dialog-activate-password",oninput:this.onPasswordChange,class:"-text focusable",type:"password",name:"password",maxlength:"128",value:r}),h$1(LabelYesNo,{value:this.isValidPassword()}))),h$1("div",null,h$1("span",{class:"-label"},"Password Again:"),h$1("div",{class:"-input-container"},h$1("input",{id:"dialog-activate-password2",oninput:this.onPassword2Change,class:"-text focusable",type:"password",name:"password2",maxlength:"128",placeholder:"Confirmation",value:a}),h$1(LabelYesNo,{value:this.isValidPassword2()}))),h$1("div",{class:"-info -topline if-dialog-not-small-block"},h$1("strong",null,"Account Names")," are generated automatically from your ",h$1("strong",null,"Name"),". An ",h$1("strong",null,"Account Name")," is the name used in your personalized URLs, and your ",h$1("strong",null,"@name"),"."),h$1("div",{class:"-info if-dialog-not-small-block"},h$1("strong",null,"Names")," let you customize how your ",h$1("strong",null,"Account Name")," looks. You can use case, accents, and simple punctuation. ",h$1("strong",null,"Account Names")," are more strict. ",h$1("strong",null,"Names")," will be converted to ",h$1("strong",null,"Account Names")," by using only lower case letters, numbers, and single dashes.")):h$1(DialogCommon,Object.assign({},{ok:!0,explicit:!0},t),"This account can't be activated.")},e}(Component),DialogReset=function(t){function e(e){t.call(this,e),this.state={mail:"",error:null,loading:!1},this.onChange=this.onChange.bind(this),this.doReset=this.doReset.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){},e.prototype.onChange=function(e){this.setState({mail:e.target.value})},e.prototype.doReset=function(){var t=this;mail=this.state.mail.trim(),Sanitize.validateMail(mail)?(this.setState({loading:!0,error:null}),$User.Reset(mail).then(function(e){return 200===e.status?(console.log("sent",e.sent),t.setState({sent:!0,loading:!1})):(console.log(e),t.setState({error:e.message||e.response,loading:!1})),e}).catch(function(e){console.log(e),t.setState({error:e,loading:!1})})):this.setState({error:"Incorrectly formatted e-mail address"})},e.prototype.render=function(e,t){var n=t.mail,o=t.sent,i=t.loading,r=t.error,t={title:"Reset Password"};return r&&(t.error=r),i?h$1(DialogCommon,Object.assign({},{empty:!0,explicit:!0},t),h$1(NavSpinner,null)):o?h$1(DialogCommon,Object.assign({},{ok:!0,explicit:!0},t),h$1("div",null,"Password reset message sent to ",h$1("code",null,n))):h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Send E-mail",onok:this.doReset,cancel:!0,explicit:!0},t),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{autofocus:!0,id:"dialog-register-mail",onchange:this.onChange,class:"-text focusable",type:"email",name:"email",placeholder:"E-mail address",maxlength:"254"}),h$1(LabelYesNo,{value:Sanitize.validateMail(n)?1:-1})),h$1("p",null,"See ",h$1(UILink,{href:"https://ludumdare.com/resources/questions/how-do-i-reset-password/"},"this article")," for help")))},e}(Component),DialogPassword=function(t){function e(e){t.call(this,e),this.state={loading:!0};e=Sanitize.getHTTPVars();this.ActID=e.id,this.ActHash=e.key,this.onPasswordChange=this.onPasswordChange.bind(this),this.onPassword2Change=this.onPassword2Change.bind(this),this.doResetPassword=this.doResetPassword.bind(this),this.doFinishReset=this.doFinishReset.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){var t=this;$User.Password(this.ActID,this.ActHash.trim(),"").then(function(e){200===e.status?t.setState({node:e.node,password:"",password2:"",loading:!1}):(console.log(e),t.setState({error:e.response,loading:!1}))}).catch(function(e){console.log(e),t.setState({error:e,loading:!1})})},e.prototype.onPasswordChange=function(e){this.setState({password:e.target.value,error:null})},e.prototype.onPassword2Change=function(e){this.setState({password2:e.target.value,error:null})},e.prototype.isValidPassword=function(){var e=this.state.password.trim();return 0===e.length?0:e.length<8?-1:1},e.prototype.isValidPassword2=function(){var e=this.state.password.trim(),t=this.state.password2.trim();return 0===e.length?0:t.length<8||e!==t||this.state.password!==this.state.password2?-1:1},e.prototype.doResetPassword=function(){var t=this;0<this.isValidPassword()&&0<this.isValidPassword2()?$User.Password(this.ActID,this.ActHash.trim(),this.state.password.trim()).then(function(e){return 200===e.status?(console.log("success",e),t.setState({success:!0,error:null})):t.setState({error:e.message||e.response}),e}).catch(function(e){t.setState({error:e})}):this.setState({error:"Form incomplete or invalid"})},e.prototype.doFinishReset=function(){location.href="?"},e.prototype.render=function(e,t){var n=t.password,o=t.password2,i=t.node,r=t.success,a=t.loading,s=t.error,t={title:"Reset Password: Step 2"};return s&&(t.error=s),a?h$1(DialogCommon,Object.assign({},{empty:!0,explicit:!0},t),h$1(NavSpinner,null)):i?r?h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doFinishReset,explicit:!0},t),"Password Reset. You can now ",h$1("strong",null,"Log In"),"."):h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Save",onok:this.doResetPassword,cancel:!0,explicit:!0},t),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{autofocus:!0,id:"dialog-password-password2",oninput:this.onPasswordChange,class:"-text focusable",type:"password",name:"password",maxlength:"128",placeholder:"Password",value:n}),h$1(LabelYesNo,{value:this.isValidPassword()}))),h$1("div",null,h$1("div",{class:"-input-container"},h$1("input",{id:"dialog-password-password2",oninput:this.onPassword2Change,class:"-text focusable",type:"password",name:"password2",maxlength:"128",placeholder:"Password again",value:o}),h$1(LabelYesNo,{value:this.isValidPassword2()})))):h$1(DialogCommon,Object.assign({},{ok:!0,explicit:!0},t),"Password can not be reset.")},e}(Component),DialogAuth=function(t){function e(e){t.call(this,e),this.state={secret:""}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onChange=function(e){this.setState({secret:e.target.value})},e.prototype.render=function(e){return h$1(DialogCommon,Object.assign({},{ok:!0,oktext:"Authenticate",cancel:!0,explicit:!0},{title:"Two Factor Authentication"}),h$1("div",{class:"-info -botbar"},"Open the Authenticator App, and write the code here."),h$1("div",null,h$1("span",{class:"-label"},"Code:"),h$1("div",{class:"-input-container"},h$1("input",{autofocus:!0,id:"dialog-auth-secret",class:"-text focusable",onchange:this.onChange.bind(this),type:"text",name:"secret",autocomplete:"off",value:this.state.secret}))))},e}(Component),DialogSession=function(t){function e(e){t.call(this,e),this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){location.href=location.pathname+location.search},e.prototype.render=function(e,t){return h$1(DialogCommon,{title:"Session Expired",ok:!0,explicit:!0,onok:this.onClick},h$1("div",null,h$1("strong",null,"Oops!!")),h$1("div",null,"It looks like your session expired (and yes, it's probably a bug)."),h$1("div",null,"Log in again to continue what you were doing."))},e}(Component),DialogSavebug=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){return h$1(DialogCommon,{title:"Oops!",ok:!0},h$1("div",null,"Oops!! It looks like the website logged you out! This is a bug. :("),h$1("div",null,"As a workaround, Copy+paste your changes somewhere (a text editor), reload the page, login and try again. It should work."),h$1("div",null,"Sorry about this!"))},e}(Component),DialogUserConfirm=function(t){function e(e){t.call(this,e),this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){location.href=location.pathname+location.search},e.prototype.render=function(e){return h$1(DialogCommon,{title:"Cookie Problem",ok:!0,explicit:!0,onok:this.onClick},h$1("div",null,"If you are seeing this message, then we were not able to set your login cookie."),h$1("div",null,"Please whitelist ",h$1("code",null,"https://api.ldjam.com")," (and ",h$1("code",null,"https://api.jam.host"),") so we can log you in."))},e}(Component),DialogSubmit=function(t){function e(e){t.call(this,e),this.onClick=this.onClick.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.onClick=function(e){window.location.href=window.location.pathname},e.prototype.render=function(e,t){return h$1(DialogCommon,{title:"Publish Game",ok:!0,explicit:!0,onok:this.onClick},h$1("div",null,"Game Successsfully Published :D"))},e}(Component),Video={EmbedTwitch:EmbedTwitch,EmbedHitbox:EmbedHitbox,EmbedYouTube:EmbedYouTube,EmbedTwitchChat:EmbedTwitchChat,EmbedHitboxChat:EmbedHitboxChat,EmbedYouTubeChat:EmbedYouTubeChat},IFrame=function(e){var t,n={class:e.class,src:e.src};return(e.width||e.height)&&(e.width&&e.height?n.style="width:"+e.width+"px;height:"+e.height+"px;":e.width?(t=e.width*(16/9),n.style="width:"+e.width+"px;height:"+t+"px;"):e.height&&(t=e.width/(16/9),n.style="width:"+t+"px;height:"+e.height+"px;")),h$1("iframe",Object.assign({},n,{frameborder:"0",scrolling:"no",allowfullscreen:!0,allow:"autoplay; fullscreen"}))};function EmbedTwitch(e,t,n,o){return h$1(IFrame,{class:e,src:t,width:n=void 0===n?null:n,height:o=void 0===o?null:o})}function EmbedTwitchChat(e,t,n,o){return h$1(IFrame,{class:e,src:t,style:"width: "+(n=void 0===n?null:n)+"px; height: "+(o=void 0===o?null:o)+"px"})}function EmbedHitbox(){}function EmbedHitboxChat(){}function EmbedYouTube(){}function EmbedYouTubeChat(){}var DialogTV=function(t){function e(e){t.call(this,e),this.state=this.calcSizes(),this.state.showchat=!1,this.onResize=this.onResize.bind(this),this.onChatClick=this.onChatClick.bind(this),this.defaults={MinWidth:480,MinHeight:270,ChatWidth:320,BarHeight:48}}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.shouldComponentUpdate=function(e,t){return!0},e.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize)},e.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize)},e.prototype.canShowChat=function(){var e=window.innerWidth;return Math.floor(e-32)>=this.defaults.MinWidth+this.defaults.ChatWidth},e.prototype.calcSizes=function(){var e={},t=window.innerWidth,n=window.innerHeight-64;e.showchat=this.state.showchat;t=Math.floor(t-32),n=Math.floor(n-32);800<=t||(e.showchat=!1);t-=e.showchat?320:0,n-=48;return 16/9<(t=t<480?480:t)/(n=n<270?270:n)?t=Math.floor(n*(16/9)):n=Math.floor(t/(16/9)),1==(1&t)&&(t+=1),1==(1&n)&&(n+=1),e.main=[t+(e.showchat?320:0),n+48],e.bar=[t,48],e.chat=[320,n+48],e.side=[e.showchat?320:0,n+48],e.video=[t,n],e},e.prototype.onResize=function(e){var t=this.calcSizes();this.setState(t)},e.prototype.onChatClick=function(e){this.canShowChat()&&(this.setState({showchat:!this.state.showchat}),this.onResize(e))},e.prototype.render=function(e,t){var n=null,o=h$1("div",{class:"-chat",style:"width:"+t.chat[0]+"px; height:"+t.chat[1]+"px;"});1<e.extra.length&&"twitch"==e.extra[0]&&(n=Video.EmbedTwitch("-tv","//player.twitch.tv/?channel="+e.extra[1]+"&parent="+window.location.host,t.video[0],t.video[1]),t.showchat&&(o=Video.EmbedTwitch("-chat","//www.twitch.tv/embed/"+e.extra[1]+"/chat?parent="+window.location.host,t.chat[0],t.chat[1])));e=null,e=h$1("div",{class:"-bar"},h$1("div",{class:"-right"},h$1("div",{class:["-button",this.canShowChat()?"":"-disabled"],onclick:this.onChatClick},h$1(SVGIcon,{baseline:!0},t.showchat?"bubble":"bubble-empty"),h$1("div",null,"Chat"))),null);return h$1(DialogBase,{title:"Jammer TV",class:"dialog-tv",style:"width:"+t.main[0]+"px; height:"+t.main[1]+"px;"},h$1("div",{class:"-branding"},h$1("img",{class:"-logo",src:"//"+STATIC_DOMAIN+"/other/logo/jammer/JammerLogo56W.png"}),h$1("span",{class:"-text"},"TV")),h$1("div",{class:"-side",style:"width:"+t.side[0]+"px; height:"+t.side[1]+"px;"},o),n,e)},e}(Component),DialogCreate=function(t){function e(e){t.call(this,e),this.doCreate=this.doCreate.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.doCreate=function(e){var t=this,n=this.props.extra.length?Number.parseInt(this.props.extra[0]):0,o=1<this.props.extra.length?this.props.extra[1]:"",i=2<this.props.extra.length?this.props.extra[2]:"";console.log(n,o,i),n&&$Node.Add(n,o,i).then(function(e){console.log("hurr",e),e.path?"post"==e.type?window.location.href=e.path+"/edit":window.location.href=e.path:t.setState({error:e.message})}).catch(function(e){t.setState({error:e})})},e.prototype.render=function(e,t){var n=t.error,o={title:"Create"};n&&(o.error=n);t=null,n="";if(e.extra&&e.extra.length&&(t=Number.parseInt(e.extra[0]),1<e.extra.length&&(n=e.extra.slice(1).join("/"))),0<t&&n.length){if("item/game"==n){var i="Game";return o.title+=" "+i+" for Ludum Dare",o.oktext="Create "+i,h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doCreate,cancel:!0,explicit:!0},o),h$1("div",null,h$1("strong",null,"Team Leaders")," and ",h$1("strong",null,"Solo")," participants, would you like to create a game?"),h$1("div",null,"If you are a ",h$1("strong",null,"Team Member"),", add your ",h$1("strong",null,"Team Leader")," as friend, then ask them to add you."),h$1("div",null,"You need to ",h$1("strong",null,"make")," or ",h$1("strong",null,"join")," a game before you can create blog posts! When your team is done, you ",h$1("strong",null,"Publish")," your game (not before, thanks)."))}if("post"==n){i="Blog Post";return o.title+=" "+i,o.oktext="Create "+i,h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doCreate,cancel:!0,explicit:!0},o),h$1("div",null,"Create a new Blog Post?"),h$1("div",null,"You can find your unpublished draft posts on your user page."))}}return o.oktext="Yes",o.canceltext="No",h$1(DialogCommon,Object.assign({},{ok:!0,onok:this.doCreate,cancel:!0,explicit:!0},o),h$1("div",null,"Would you like to create a game?"))},e}(Component),DialogErrorUpload=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e=decodeURI(e.extra);return h$1(DialogCommon,{title:"Upload failed",ok:!0},h$1("p",null,"Looks like the upload failed."),h$1("ul",null,h$1("li",null,"Make sure your image is under 4MB"),h$1("li",null,"Make sure the image you're trying to upload is a bitmap (png, jpeg, gif). Vector images (svg) are not supported at the current time")),h$1("p",null,"Error: ",h$1("i",null,e)))},e}(Component),DialogErrorPublish=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.render=function(e){e=decodeURI(e.extra);return h$1(DialogCommon,{title:"Publish failed",ok:!0},h$1("p",null,"Looks like publishing failed."),h$1("p",null,"Error: ",h$1("i",null,e)))},e}(Component);window.LUDUMDARE_ROOT="/",window.SITE_ROOT=1,options.vnode=function(e){e&&e.attributes&&Array.isArray(e.attributes.class)&&(e.attributes.class.length?e.attributes.class=e.attributes.class.join(" "):delete e.attributes.class)};var Main=function(t){function e(e){t.call(this,e),console.log("[constructor]");e=this.cleanLocation(window.location);window.location.origin+e.path!==window.location.href&&this.storeHistory(window.history.state,null,e.path),this.state={path:"",slugs:e.slugs,extra:[],node:{id:0},parent:null,superparent:null,author:null,root:null,featured:null,user:null},window.addEventListener("hashchange",this.onHashChange.bind(this)),window.addEventListener("navchange",this.onNavChange.bind(this)),window.addEventListener("popstate",this.onPopState.bind(this)),this.onLogin=this.onLogin.bind(this)}return t&&(e.__proto__=t),((e.prototype=Object.create(t&&t.prototype)).constructor=e).prototype.componentDidMount=function(){this.fetchUser(),this.fetchFeatured(),this.fetchNode()},e.prototype.storeHistory=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null),window.history&&window.history.replaceState&&e&&history.replaceState({path:e.path||"",slugs:e.slugs||[],extra:e.extra||[],node:e.node||null},t,n)},e.prototype.componentDidUpdate=function(e,t){"#--"==window.location.href.substr(-3)&&history.replaceState({},"",window.location.href.replace("#--","")),this.storeHistory(this.state),this.state.node!=t.node&&this.handleAnchors()},e.prototype.cleanLocation=function(e){e={pathname:Sanitize.clean_Path(e.pathname),search:Sanitize.clean_Query(e.search),hash:Sanitize.clean_Hash(e.hash)};return e.path=e.pathname+e.search+e.hash,e.slugs=Sanitize.trimSlashes(e.pathname).split("/"),e},e.prototype.getDialog=function(){var e=Sanitize.parseHash(window.location.hash);if(window.location.hash&&1!=window.location.hash.indexOf("/")&&"--"!==e.path)switch(e.path){case"user-login":return e.onlogin=this.onLogin,h$1(DialogLogin,e);case"user-confirm":return h$1(DialogUserConfirm,e);case"user-activate":return h$1(DialogActivate,e);case"user-register":return h$1(DialogRegister,e);case"user-auth":return h$1(DialogAuth,e);case"user-reset":return h$1(DialogReset,e);case"user-password":return h$1(DialogPassword,e);case"expired":return h$1(DialogSession,e);case"savebug":return h$1(DialogSavebug,e);case"create":return h$1(DialogCreate,e);case"submit":return h$1(DialogSubmit,e);case"tv":return h$1(DialogTV,e);case"error-upload":return h$1(DialogErrorUpload,e);case"error-publish":return h$1(DialogErrorPublish,e);default:return h$1(DialogUnfinished,e)}return null},e.prototype.onLogin=function(){this.setState({user:null})},e.prototype.fetchFeatured=function(e){var s=this;return console.log("[fetchFeatured] +"),$Node.What(SITE_ROOT).then(function(e){var t={};t.root=e.root,t.featured=e.featured,t.featured.what=e.node;var n,o=0,i=0,r=0;for(n in console.log("[fetchFeatured] Hack! We don't support choosing your active game yes, so use logic to detect it"),e.node){var a=new Date(e.node[n].modified).getTime();i<a&&(i=a,o=0|n),e.node[n].published&&(r=0|n,console.log("[fetchFeatured] "+n+" is published"))}o&&console.log("[fetchFeatured] "+o+" was the last modified"),e.node[o]&&e.node[o].published?t.featured.focus_id=o:t.featured.focus_id=r||o,console.log("[fetchFeatured] - "+t.featured.focus_id+" chosen as focus_id"),s.setState(t)})},e.prototype.fetchNode=function(e){var n=this;console.log("[fetchNode] +");var t=["node","parent","superparent","author"];return e&&(t=t.concat(e)),$Node.Walk(SITE_ROOT,this.state.slugs,t).then(function(e){if(e.node_id){var t={};return t.path=(e.path.length?"/":"")+n.state.slugs.slice(0,e.path.length).join("/"),t.extra=e.extra,t.node=e.node[e.node_id],t.parent=t.node.parent?e.node[t.node.parent]:null,t.superparent=t.node.superparent?e.node[t.node.superparent]:null,t.author=t.node.author?e.node[t.node.author]:null,n.setState(t),console.log("[fetchNode] - Node:",e.node_id),null}throw"[fetchNode] Unable to walk tree"}).catch(function(e){n.setState({error:e})})},e.prototype.fetchUser=function(){var t=this;console.log("[fetchUser] +");var n={id:0};return $Node.GetMy().then(function(e){return e.node&&((n=Object.assign({},e.node)).private={},n.private.meta=e.meta,n.private.refs=e.refs),t.setState({user:n}),console.log("[fetchUser] - You are",n.id,"("+n.name+")"),n&&n.private&&n.private.meta&&n.private.meta.admin&&console.log("[fetchUser] - Administrator"),$NodeLove.GetMy()}).catch(function(e){t.setState({user:n})})},e.prototype.onHashChange=function(e){console.log("hashchange: ",e.newURL);e=this.cleanLocation(window.location).slugs;e.join()===this.state.slugs.join()?this.setState({}):this.setState({slugs:e}),this.handleAnchors()},e.prototype.handleAnchors=function(e){!window.location.hash&&!e||""===(e=Sanitize.parseHash(e||window.location.hash)).path&&0<e.extra.length&&((e=document.getElementById(e.extra[0]))&&(e.scrollIntoView(),(e=document.getElementsByClassName("view-bar")[0])&&window.scrollBy(0,-e.clientHeight)))},e.prototype.onNavChange=function(e){var t;console.log("navchange:",e.detail.old.href,"=>",e.detail.location.href),e.detail.location.href===e.detail.old.href||(t=this.cleanLocation(e.detail.location).slugs).join()!==this.state.slugs.join()&&(history.pushState(null,null,e.detail.location.pathname+e.detail.location.search),this.setState({slugs:t,node:{id:0}}),this.fetchNode()),window.scrollTo(0,0),this.handleAnchors(e.detail.location.hash)},e.prototype.onPopState=function(e){console.log("popstate: ",e.state),e.state&&this.setState(e.state),this.handleAnchors()},e.prototype.getTitle=function(e){var t="",n=window.location.host;return"ldjam.com"==window.location.host&&(n+=" | Ludum Dare game jam"),!e.name||""===(t=titleParser.parse(e.name,!0))?t=n:t+=" | "+n,t},e.prototype.render=function(e,t){var n=t.node,o=t.parent,i=t.superparent,r=t.author,a=t.user,s=t.featured,l=t.path,c=t.extra,l={node:n,parent:o,superparent:i,author:r,user:a,featured:s,path:l,extra:c};return n&&(document.title=this.getTitle(n)),h$1(Layout,t,h$1(Router,{node:n,props:l,path:c},h$1(Route,{type:"root",component:PageRoot}),h$1(Route,{type:"page",component:PagePage}),h$1(Route,{type:"post",component:PagePost}),h$1(Route,{type:"item"},h$1(Route,{subtype:"game",component:PageItem})),h$1(Route,{type:"tag",component:PageTag}),h$1(Route,{type:"user",component:PageUser}),h$1(Route,{type:"users",component:PageUsers}),h$1(Route,{type:"event",component:PageEvent}),h$1(Route,{type:["events","group","tags"],component:PageEvents}),h$1(Route,{type:"error",component:PageError})),this.getDialog())},e}(Component);render(h$1(Main,null),document.body);